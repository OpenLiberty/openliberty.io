<!DOCTYPE html>
<html lang="zh-Hans">

  





<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Implementing a GraphQL microservice using MicroProfile API to query and update data from multiple services.
    
  </title>
  <meta name="description" content="A getting started tutorial with examples on how to implement a GraphQL microservice using Java and Eclipse MicroProfile API to query and update data from multiple RESTful services, and how to test GraphQL queries and mutations using the GraphiQL user interface.">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/openliberty.css">
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/coderay-custom.css">

  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header-dark.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/toc-multipane-static.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/end-of-guide.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-card.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/tabs.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-common.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane-static.css">
  

  

  

  <link rel="canonical" href="https://openliberty.io/zh-Hans/guides/microprofile-graphql">
  <link rel="alternate" type="application/rss+xml" title="Open Liberty" href="/zh-Hans/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Asap:400,500" rel="stylesheet">
    
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@OpenLibertyIO" />
  <meta name="twitter:title" content="Implementing a GraphQL microservice using MicroProfile API to query and update data from multiple services." />
  <meta name="twitter:description" content="A getting started tutorial with examples on how to implement a GraphQL microservice using Java and Eclipse MicroProfile API to query and update data from multiple RESTful services, and how to test GraphQL queries and mutations using the GraphiQL user interface." />

  <meta property='og:title' content="Implementing a GraphQL microservice using MicroProfile API to query and update data from multiple services." />
  <meta property='og:image' content="https://openliberty.io/img/twitter_card.jpg" />
  <meta property='og:image:alt' content="Open Liberty Logo" />
  <meta property='og:description' content="A getting started tutorial with examples on how to implement a GraphQL microservice using Java and Eclipse MicroProfile API to query and update data from multiple RESTful services, and how to test GraphQL queries and mutations using the GraphiQL user interface." />
  <meta property='og:url' content="https://openliberty.io/zh-Hans/guides/microprofile-graphql" />
  <meta property='og:type' content="website" />
  
  <meta name="google-site-verification" content="h2P030H9b66CyL1nEmWfrZB8Fr14h9LmVMG7Ur0caBs" />

  
      <meta name="robots" content="noindex" />
  

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>


  <body>
    
    

    


<!--  -->

<header>
    <nav id="nav_bar">
        <div id="nav_header">
            <a id="home_link" href="/" aria-label="Open Liberty Home">
                <img id="ol_logo" src="/img/docs_openliberty_logo.png" alt="Open Liberty Logo">
            </a>
            <button id="hamburger_toggle_button" onclick="$('#nav_bar').toggleClass('responsive');">
                <span id="hamburger_toggle_icon"></span>
            </button>
        </div>
        <div id="hamburger_menu">
            <ul class="nav_list">
                <li class="nav_link">
                    <a href="/start/">入门</a>
                </li>
                <li class="nav_link">
                    <a href="/guides/">指南</a>
                </li>
                <li class="nav_link">
                    <a href="/docs/">文档</a>
                </li>
                <li class="nav_link">
                    <a href="/support/">支持</a>
                </li>
                <li class="nav_link">
                    <a href="/blog/">博客</a>
                </li>
            </ul>
            <div id="header_round_links_container"> 
                <a id="header_twitter_link" class="header_round_button" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="header_stackoverflow_link" class="header_round_button" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="header_groupsio_link" class="header_round_button" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="header_gitter_link" class="header_round_button" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>

    </nav>
</header>


    <main aria-label="Content">

      <!-- Build a list of all the documents in the guides code base -->
  
 

<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->
<!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
 

<!-- Sort list of guides by date with most recent first -->


<div id="background_container">
  <div id="toc_hotspot"></div>
  <!-- Guide's table of contents section -->
  <div id="toc_column" class="collapse inline open">
    <div id="toc_inner">
       
      <div id="close_container">
        <img id="toc_close_white" src="/img/toc_close_white.svg" alt="Close the table of contents" tabindex="0">
      </div>
      <h3 id="toc_title">Contents</h3>
      <div id="toc_container"><ul class="sectlevel1">
<li><a href="#what-youll-learn">What you’ll learn</a></li>
<li><a href="#additional-prerequisites">Additional prerequisites</a></li>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#creating-graphql-object-types">Creating GraphQL object types</a></li>
<li><a href="#implementing-system-service">Implementing system service</a></li>
<li><a href="#implementing-graphql-resolvers">Implementing GraphQL resolvers</a></li>
<li><a href="#enabling-graphql">Enabling GraphQL</a></li>
<li><a href="#building-and-running-the-application">Building and running the application</a></li>
<li><a href="#running-graphql-queries">Running GraphQL queries</a></li>
<li><a href="#tearing-down-the-environment">Tearing down the environment</a></li>
<li><a href="#great-work-youre-done">Great work! You’re done!</a></li>
<li><a href="#guide-attribution">Guide Attribution</a></li>
</ul></div>
      <div id="toc_separator"></div>
      
      <h3 id="tag_title">标签</h3>
      <div id="tags_container"></div>
    </div>
  </div>
  <div id="toc_indicator" tabindex="0" aria-label="Open the table of contents" class="hidden">
    <img src="/img/arrow_white.svg" alt="arrow">
  </div>
  <div id="toc_line" class="open"></div>
  <!-- Entire guide section -->
  <div id="guide_column" class="position_relative open">
    <div id="guide_content">
      <!-- Guide header section -->
      <div id="guide_meta" class="sect1" tabindex="0">
        <h1 id="guide_title">Optimizing REST queries for microservices with GraphQL</h1>
        <div id="duration_container">
          <img src="/img/guide_duration_clock_icon_large.svg" alt="duration">
          <span id="guide_duration">30 minutes</span>

          <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
          <!-- If new posts count is less than 4, use 4 most recent posts -->
           
          <!-- If new posts count is >= 4, use posts from last 30 days-->
          
          <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
          <!-- Count number of guides from past last 12 weeks that is 84 days-->
          <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
          
        </div>
        <div id="mobile_prereqs_section">
          <p id="mobile_prereqs_title">Prerequisites:</p>
          <div class="prereqs_list"></div>
          <div class="skills_network_container">
            <div class="skills_network_description"></div>
          </div>
        </div>
      </div>

      <div class="scroller_anchor"></div>
      <div id="mobile_toc_accordion_container" data-toggle="collapse" data-target="#toc_column" aria-expanded="false" aria-controls="toc_column" role="button">
        <div role="menuitem" id="mobile_toc_accordion">
          <button class="breadcrumb_hamburger toc-toggle collapsed" type="button" tabindex="0">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <img src="/img/toc_close_green.svg" class="TOC_Close_SVG hidden img-responsive" alt="Table of contents close button">
          </button>
          <span>Table of contents</span>
        </div>
      </div>

      <!-- Guide content section -->
      <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note hidden">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This repository contains the guide documentation source. To view the guide in published form,
view it on the <a href="https://openliberty.io/guides/microprofile-graphql.html">Open Liberty website</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Learn how to use MicroProfile GraphQL to query and update data from multiple services, and how to test GraphQL queries and mutations using an interactive GraphQL tool (GraphiQL).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-youll-learn">What you’ll learn</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will learn how to build and use a simple GraphQL service with <a href="https://openliberty.io/docs/latest/reference/feature/mpGraphQL-2.0.html" target="_blank" rel="noopener">MicroProfile GraphQL</a>.</p>
</div>
<div class="paragraph">
<p>GraphQL is an open source data query language. Unlike REST APIs, each HTTP request that is sent to a GraphQL service goes to a single HTTP endpoint. Create, read, update, and delete operations and their details are differentiated by the contents of the request. If the operation returns data, the user specifies what properties of the data that they want returned. For read operations, a JSON object is returned that contains only the data and properties that are specified. For other operations, a JSON object might be returned containing information such as a success message.</p>
</div>
<div class="paragraph">
<p>Returning only the specified properties in a read operation has two benefits. If you’re dealing with large amounts of data or large resources, it reduces the size of the responses. If you have properties that are expensive to calculate or retrieve (such as nested objects), it also saves processing time. GraphQL calculates these properties only if they are requested.</p>
</div>
<div class="paragraph">
<p>A GraphQL service can also be used to obtain data from multiple sources such as APIs, databases, and other services. It can then collate this data into a single object for the user, simplifying the data retrieval. The user makes only a single request to the GraphQL service, instead of multiple requests to the individual data sources. GraphQL services require less data fetching than REST services, which results in lower application load times and lower data transfer costs. GraphQL also enables clients to better customize requests to the server.</p>
</div>
<div class="paragraph">
<p>All of the available operations to retrieve or modify data are available in a single GraphQL schema. The GraphQL schema describes all the data types that are used in the GraphQL service. The schema also describes all of the available operations. As well, you can add names and text descriptions to the various object types and operations in the schema.</p>
</div>
<div class="paragraph">
<p>You can learn more about GraphQL at the <a href="https://graphql.org/" target="_blank" rel="noopener noreferrer">GraphQL website</a>.</p>
</div>
<div class="paragraph">
<p>You’ll create a GraphQL application that retrieves data from multiple <code>system</code> services. Users make requests to the GraphQL service, which then makes requests to the <code>system</code> services. The GraphQL service returns a single JSON object containing all the system information from the <code>system</code> services.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/img/guide/microprofile-graphql/architecture.png" alt="GraphQL architecture where multiple system microservices are integrated behind one GraphQL service">
</div>
</div>
<div class="paragraph">
<p>You’ll enable the interactive <a href="https://github.com/graphql/graphiql/tree/main/packages/graphiql" target="_blank" rel="noopener noreferrer">GraphiQL</a> tool in the Open Liberty runtime. GraphiQL helps you make queries to a GraphQL service. In the GraphiQL UI, you need to type only the body of the query for the purposes of manual tests and examples.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-prerequisites">Additional prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you begin, Docker needs to be installed. For installation instructions, refer to the <a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">official Docker documentation</a>. You’ll build and run the application in Docker containers.</p>
</div>
<div class="paragraph">
<p>Make sure to start your Docker daemon before you proceed.</p>
</div>
</div>
</div>
<div class="sect1 command">
<h2 id="getting-started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fastest way to work through this guide is to clone the <a href="https://github.com/openliberty/guide-microprofile-graphql.git" target="_blank" rel="noopener noreferrer">Git repository</a> and use the projects that are provided inside:</p>
</div>
<div id="git_clone" class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>git clone https://github.com/openliberty/guide-microprofile-graphql.git
cd guide-microprofile-graphql</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>start</code> directory contains the starting project that you will build upon.</p>
</div>
<div class="paragraph">
<p>The <code>finish</code> directory contains the finished project that you will build.</p>
</div>
<div class="paragraph">
<p>Before you begin, make sure you have all the necessary <span class="prerequisites">prerequisites</span>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-graphql-object-types">Creating GraphQL object types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to the <code>start</code> directory to begin.</p>
</div>
<div class="paragraph">
<p>Object types determine the structure of the data that GraphQL returns. These object types are defined by annotations that are applied to the declaration and properties of Java classes.</p>
</div>
<div class="paragraph">
<p>You will define <code>java</code>, <code>systemMetrics</code>, and <code>systemInfo</code> object types by creating and applying annotations to the <code>JavaInfo</code>, <code>SystemMetrics</code>, and <code>SystemInfo</code> classes respectively.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Create the <code>JavaInfo</code> class.</mark>
<code>models/src/main/java/io/openliberty/guides/graphql/models/JavaInfo.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>JavaInfo.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2021 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.graphql.models</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Description</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Name</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.NonNull</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Type</span>;
<span class="line-numbers">18</span>
<span class="line-numbers">19</span><span class="comment">// tag::type[]</span>
<span class="line-numbers">20</span><span class="annotation">@Type</span>(<span class="string"><span class="delimiter">"</span><span class="content">java</span><span class="delimiter">"</span></span>)
<span class="line-numbers">21</span><span class="comment">// end::type[]</span>
<span class="line-numbers">22</span><span class="comment">// tag::description[]</span>
<span class="line-numbers">23</span><span class="annotation">@Description</span>(<span class="string"><span class="delimiter">"</span><span class="content">Information about a Java installation</span><span class="delimiter">"</span></span>)
<span class="line-numbers">24</span><span class="comment">// end::description[]</span>
<span class="line-numbers">25</span><span class="comment">// tag::class[]</span>
<span class="line-numbers">26</span><span class="directive">public</span> <span class="type">class</span> <span class="class">JavaInfo</span> {
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>    <span class="comment">// tag::name[]</span>
<span class="line-numbers">29</span>    <span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">vendorName</span><span class="delimiter">"</span></span>)
<span class="line-numbers">30</span>    <span class="comment">// end::name[]</span>
<span class="line-numbers">31</span>    <span class="directive">private</span> <span class="predefined-type">String</span> vendor;
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="comment">// tag::nonnull[]</span>
<span class="line-numbers">34</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">35</span>    <span class="comment">// end::nonnull[]</span>
<span class="line-numbers">36</span>    <span class="comment">// tag::version[]</span>
<span class="line-numbers">37</span>    <span class="directive">private</span> <span class="predefined-type">String</span> version;
<span class="line-numbers">38</span>    <span class="comment">// end::version[]</span>
<span class="line-numbers">39</span>
<span class="line-numbers">40</span>    <span class="comment">// tag::getVendor[]</span>
<span class="line-numbers">41</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getVendor() {
<span class="line-numbers">42</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.vendor;
<span class="line-numbers">43</span>    }
<span class="line-numbers">44</span>    <span class="comment">// end::getVendor[]</span>
<span class="line-numbers">45</span>
<span class="line-numbers">46</span>    <span class="directive">public</span> <span class="type">void</span> setVendor(<span class="predefined-type">String</span> vendor) {
<span class="line-numbers">47</span>        <span class="local-variable">this</span>.vendor = vendor;
<span class="line-numbers">48</span>    }
<span class="line-numbers">49</span>
<span class="line-numbers">50</span>    <span class="comment">// tag::getVersion[]</span>
<span class="line-numbers">51</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getVersion() {
<span class="line-numbers">52</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.version;
<span class="line-numbers">53</span>    }
<span class="line-numbers">54</span>    <span class="comment">// end::getVersion[]</span>
<span class="line-numbers">55</span>
<span class="line-numbers">56</span>    <span class="directive">public</span> <span class="type">void</span> setVersion(<span class="predefined-type">String</span> version) {
<span class="line-numbers">57</span>        <span class="local-variable">this</span>.version = version;
<span class="line-numbers">58</span>    }
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>}
<span class="line-numbers">61</span><span class="comment">// end::class[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=class file=0">JavaInfo</code> class is annotated with a <code>@Type</code> annotation. The <code class="hotspot=type file=0">@Type("java")</code> annotation maps this class to define the <code>java</code> object type in GraphQL. The <code>java</code> object type gives information on the Java installation of the system.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=description file=0">@Description</code> annotation gives a description to the <code>java</code> object type in GraphQL. This description is what appears in the schema and the documentation. Descriptions aren’t required, but it’s good practice to include them.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=name file=0">@Name</code> annotation maps the <code>vendor</code> property to the <code>vendorName</code> name of the <code>java</code> object type in GraphQL. The <code>@Name</code> annotation can be used to change the name of the property used in the schema. Without a <code>@Name</code> annotation, the Java object property is automatically mapped to a GraphQL object type property of the same name. In this case, without the <code>@Name</code> annotation, the property would be displayed as <code>vendor</code> in the schema.</p>
</div>
<div class="paragraph">
<p>All data types in GraphQL are nullable by default. Non-nullable properties are annotated with the <code class="hotspot=nonnull file=0">@NonNull</code> annotation. The <code class="hotspot=nonnull file=0">@NonNull</code> annotation on the <code class="hotspot=version file=0">version</code> field ensures that, when queried, a non-null value is returned by the GraphQL service. The <code class="hotspot=getVendor file=0">getVendor()</code> and <code class="hotspot=getVersion file=0">getVersion()</code> getter functions are automatically mapped to retrieve their respective properties in GraphQL. If needed, setter functions are also supported and automatically mapped.</p>
</div>
<div class="listingblock code_command hotspot file=1">
<div class="content">
<pre><mark>Create the <code>SystemMetrics</code> class.</mark>
<code>models/src/main/java/io/openliberty/guides/graphql/models/SystemMetrics.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>SystemMetrics.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2021 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.graphql.models</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Description</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.NonNull</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Type</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="comment">// tag::type[]</span>
<span class="line-numbers">19</span><span class="annotation">@Type</span>(<span class="string"><span class="delimiter">"</span><span class="content">systemMetrics</span><span class="delimiter">"</span></span>)
<span class="line-numbers">20</span><span class="comment">// end::type[]</span>
<span class="line-numbers">21</span><span class="comment">// tag::description[]</span>
<span class="line-numbers">22</span><span class="annotation">@Description</span>(<span class="string"><span class="delimiter">"</span><span class="content">System metrics</span><span class="delimiter">"</span></span>)
<span class="line-numbers">23</span><span class="comment">// end::description[]</span>
<span class="line-numbers">24</span><span class="comment">// tag::class[]</span>
<span class="line-numbers">25</span><span class="directive">public</span> <span class="type">class</span> <span class="class">SystemMetrics</span> {
<span class="line-numbers">26</span>
<span class="line-numbers">27</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">28</span>    <span class="directive">private</span> <span class="predefined-type">Integer</span> processors;
<span class="line-numbers">29</span>
<span class="line-numbers">30</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">31</span>    <span class="directive">private</span> <span class="predefined-type">Long</span> heapSize;
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">34</span>    <span class="directive">private</span> <span class="predefined-type">Long</span> nonHeapSize;
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="directive">public</span> <span class="predefined-type">Integer</span> getProcessors() {
<span class="line-numbers">37</span>        <span class="keyword">return</span> processors;
<span class="line-numbers">38</span>    }
<span class="line-numbers">39</span>
<span class="line-numbers">40</span>    <span class="directive">public</span> <span class="type">void</span> setProcessors(<span class="type">int</span> processors) {
<span class="line-numbers">41</span>        <span class="local-variable">this</span>.processors = processors;
<span class="line-numbers">42</span>    }
<span class="line-numbers">43</span>
<span class="line-numbers">44</span>    <span class="directive">public</span> <span class="predefined-type">Long</span> getHeapSize() {
<span class="line-numbers">45</span>        <span class="keyword">return</span> heapSize;
<span class="line-numbers">46</span>    }
<span class="line-numbers">47</span>
<span class="line-numbers">48</span>    <span class="directive">public</span> <span class="type">void</span> setHeapSize(<span class="type">long</span> heapSize) {
<span class="line-numbers">49</span>        <span class="local-variable">this</span>.heapSize = heapSize;
<span class="line-numbers">50</span>    }
<span class="line-numbers">51</span>
<span class="line-numbers">52</span>    <span class="directive">public</span> <span class="predefined-type">Long</span> getNonHeapSize() {
<span class="line-numbers">53</span>        <span class="keyword">return</span> nonHeapSize;
<span class="line-numbers">54</span>    }
<span class="line-numbers">55</span>
<span class="line-numbers">56</span>    <span class="directive">public</span> <span class="type">void</span> setNonHeapSize(<span class="predefined-type">Long</span> nonHeapSize) {
<span class="line-numbers">57</span>        <span class="local-variable">this</span>.nonHeapSize = nonHeapSize;
<span class="line-numbers">58</span>    }
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>}
<span class="line-numbers">61</span><span class="comment">// end::class[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=class file=1">SystemMetrics</code> class is set up similarly. It maps to the <code class="hotspot=type file=1">systemMetrics</code> object type, which describes system information such as the number of processor cores and the heap size.</p>
</div>
<div class="listingblock code_command hotspot file=2">
<div class="content">
<pre><mark>Create the <code>SystemInfo</code> class.</mark>
<code>models/src/main/java/io/openliberty/guides/graphql/models/SystemInfo.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>SystemInfo.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers">  1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers">  2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers">  3</span><span class="comment"> * Copyright (c) 2021 IBM Corporation and others.</span>
<span class="line-numbers">  4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers">  5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers">  6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers">  7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers">  8</span><span class="comment"> *</span>
<span class="line-numbers">  9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers"> 10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers"> 11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers"> 12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.graphql.models</span>;
<span class="line-numbers"> 13</span>
<span class="line-numbers"> 14</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Description</span>;
<span class="line-numbers"> 15</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.NonNull</span>;
<span class="line-numbers"> 16</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Type</span>;
<span class="line-numbers"> 17</span>
<span class="line-numbers"> 18</span><span class="comment">// tag::type[]</span>
<span class="line-numbers"> 19</span><span class="annotation">@Type</span>(<span class="string"><span class="delimiter">"</span><span class="content">system</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 20</span><span class="comment">// end::type[]</span>
<span class="line-numbers"> 21</span><span class="annotation">@Description</span>(<span class="string"><span class="delimiter">"</span><span class="content">Information about a single system</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 22</span><span class="comment">// tag::class[]</span>
<span class="line-numbers"> 23</span><span class="directive">public</span> <span class="type">class</span> <span class="class">SystemInfo</span> {
<span class="line-numbers"> 24</span>
<span class="line-numbers"> 25</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers"> 26</span>    <span class="directive">private</span> <span class="predefined-type">String</span> hostname;
<span class="line-numbers"> 27</span>
<span class="line-numbers"> 28</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers"> 29</span>    <span class="directive">private</span> <span class="predefined-type">String</span> username;
<span class="line-numbers"> 30</span>
<span class="line-numbers"> 31</span>    <span class="directive">private</span> <span class="predefined-type">String</span> osName;
<span class="line-numbers"> 32</span>    <span class="directive">private</span> <span class="predefined-type">String</span> osArch;
<span class="line-numbers"> 33</span>    <span class="directive">private</span> <span class="predefined-type">String</span> osVersion;
<span class="line-numbers"> 34</span>    <span class="directive">private</span> <span class="predefined-type">String</span> note;
<span class="line-numbers"> 35</span>
<span class="line-numbers"> 36</span>    <span class="comment">// tag::java[]</span>
<span class="line-numbers"> 37</span>    <span class="directive">private</span> JavaInfo java;
<span class="line-numbers"> 38</span>    <span class="comment">// end::java[]</span>
<span class="line-numbers"> 39</span>
<span class="line-numbers"> 40</span>    <span class="comment">// tag::metrics[]</span>
<span class="line-numbers"> 41</span>    <span class="directive">private</span> SystemMetrics systemMetrics;
<span class="line-numbers"> 42</span>    <span class="comment">// end::metrics[]</span>
<span class="line-numbers"> 43</span>
<span class="line-numbers"> 44</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getHostname() {
<span class="line-numbers"> 45</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.hostname;
<span class="line-numbers"> 46</span>    }
<span class="line-numbers"> 47</span>
<span class="line-numbers"> 48</span>    <span class="directive">public</span> <span class="type">void</span> setHostname(<span class="predefined-type">String</span> hostname) {
<span class="line-numbers"> 49</span>        <span class="local-variable">this</span>.hostname = hostname;
<span class="line-numbers"> 50</span>    }
<span class="line-numbers"> 51</span>
<span class="line-numbers"> 52</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getUsername() {
<span class="line-numbers"> 53</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.username;
<span class="line-numbers"> 54</span>    }
<span class="line-numbers"> 55</span>
<span class="line-numbers"> 56</span>    <span class="directive">public</span> <span class="type">void</span> setUsername(<span class="predefined-type">String</span> username) {
<span class="line-numbers"> 57</span>        <span class="local-variable">this</span>.username = username;
<span class="line-numbers"> 58</span>    }
<span class="line-numbers"> 59</span>
<span class="line-numbers"> 60</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getOsName() {
<span class="line-numbers"> 61</span>        <span class="keyword">return</span> osName;
<span class="line-numbers"> 62</span>    }
<span class="line-numbers"> 63</span>
<span class="line-numbers"> 64</span>    <span class="directive">public</span> <span class="type">void</span> setOsName(<span class="predefined-type">String</span> osName) {
<span class="line-numbers"> 65</span>        <span class="local-variable">this</span>.osName = osName;
<span class="line-numbers"> 66</span>    }
<span class="line-numbers"> 67</span>
<span class="line-numbers"> 68</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getOsArch() {
<span class="line-numbers"> 69</span>        <span class="keyword">return</span> osArch;
<span class="line-numbers"> 70</span>    }
<span class="line-numbers"> 71</span>
<span class="line-numbers"> 72</span>    <span class="directive">public</span> <span class="type">void</span> setOsArch(<span class="predefined-type">String</span> osarch) {
<span class="line-numbers"> 73</span>        <span class="local-variable">this</span>.osArch = osarch;
<span class="line-numbers"> 74</span>    }
<span class="line-numbers"> 75</span>
<span class="line-numbers"> 76</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getOsVersion() {
<span class="line-numbers"> 77</span>        <span class="keyword">return</span> osVersion;
<span class="line-numbers"> 78</span>    }
<span class="line-numbers"> 79</span>
<span class="line-numbers"> 80</span>    <span class="directive">public</span> <span class="type">void</span> setOsVersion(<span class="predefined-type">String</span> osVersion) {
<span class="line-numbers"> 81</span>        <span class="local-variable">this</span>.osVersion = osVersion;
<span class="line-numbers"> 82</span>    }
<span class="line-numbers"> 83</span>
<span class="line-numbers"> 84</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getNote() {
<span class="line-numbers"> 85</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.note;
<span class="line-numbers"> 86</span>    }
<span class="line-numbers"> 87</span>
<span class="line-numbers"> 88</span>    <span class="directive">public</span> <span class="type">void</span> setNote(<span class="predefined-type">String</span> note) {
<span class="line-numbers"> 89</span>        <span class="local-variable">this</span>.note = note;
<span class="line-numbers"> 90</span>    }
<span class="line-numbers"> 91</span>
<span class="line-numbers"> 92</span>    <span class="directive">public</span> JavaInfo getJava() {
<span class="line-numbers"> 93</span>        <span class="keyword">return</span> java;
<span class="line-numbers"> 94</span>    }
<span class="line-numbers"> 95</span>
<span class="line-numbers"> 96</span>    <span class="directive">public</span> <span class="type">void</span> setJava(JavaInfo java) {
<span class="line-numbers"> 97</span>        <span class="local-variable">this</span>.java = java;
<span class="line-numbers"> 98</span>    }
<span class="line-numbers"> 99</span>
<span class="line-numbers">100</span>    <span class="directive">public</span> SystemMetrics getSystemMetrics() {
<span class="line-numbers">101</span>        <span class="keyword">return</span> systemMetrics;
<span class="line-numbers">102</span>    }
<span class="line-numbers">103</span>
<span class="line-numbers">104</span>    <span class="directive">public</span> <span class="type">void</span> setSystemMetrics(SystemMetrics systemMetrics) {
<span class="line-numbers">105</span>        <span class="local-variable">this</span>.systemMetrics = systemMetrics;
<span class="line-numbers">106</span>    }
<span class="line-numbers">107</span>
<span class="line-numbers">108</span>}
<span class="line-numbers">109</span><span class="comment">// end::class[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=class file=2">SystemInfo</code> class is similar to the previous two classes. It maps to the <code class="hotspot=type file=2">system</code> object type, which describes other information Java can retrieve from the system properties.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=java file=2">java</code> and <code class="hotspot=metrics file=2">systemMetrics</code> object types are used as nested objects within the <code>system</code> object type. However, nested objects and other properties that are expensive to calculate or retrieve are not included in the class of an object type. Instead, expensive properties are added as part of implementing GraphQL resolvers.</p>
</div>
<div class="paragraph">
<p>SystemLoad.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2021 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.graphql.models</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Description</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.NonNull</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Type</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="comment">// tag::type[]</span>
<span class="line-numbers">19</span><span class="annotation">@Type</span>(<span class="string"><span class="delimiter">"</span><span class="content">systemLoad</span><span class="delimiter">"</span></span>)
<span class="line-numbers">20</span><span class="comment">// end::type[]</span>
<span class="line-numbers">21</span><span class="comment">// tag::description[]</span>
<span class="line-numbers">22</span><span class="annotation">@Description</span>(<span class="string"><span class="delimiter">"</span><span class="content">Information of system usage</span><span class="delimiter">"</span></span>)
<span class="line-numbers">23</span><span class="comment">// end::description[]</span>
<span class="line-numbers">24</span><span class="comment">// tag::class[]</span>
<span class="line-numbers">25</span><span class="directive">public</span> <span class="type">class</span> <span class="class">SystemLoad</span> {
<span class="line-numbers">26</span>
<span class="line-numbers">27</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">28</span>    <span class="directive">private</span> <span class="predefined-type">String</span> hostname;
<span class="line-numbers">29</span>
<span class="line-numbers">30</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">31</span>    <span class="directive">private</span> SystemLoadData loadData;
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getHostname() {
<span class="line-numbers">34</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.hostname;
<span class="line-numbers">35</span>    }
<span class="line-numbers">36</span>
<span class="line-numbers">37</span>    <span class="directive">public</span> <span class="type">void</span> setHostname(<span class="predefined-type">String</span> hostname) {
<span class="line-numbers">38</span>        <span class="local-variable">this</span>.hostname = hostname;
<span class="line-numbers">39</span>    }
<span class="line-numbers">40</span>
<span class="line-numbers">41</span>    <span class="directive">public</span> SystemLoadData getLoadData() {
<span class="line-numbers">42</span>        <span class="keyword">return</span> <span class="local-variable">this</span>.loadData;
<span class="line-numbers">43</span>    }
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>    <span class="directive">public</span> <span class="type">void</span> setLoadData(SystemLoadData loadData) {
<span class="line-numbers">46</span>        <span class="local-variable">this</span>.loadData = loadData;
<span class="line-numbers">47</span>    }
<span class="line-numbers">48</span>
<span class="line-numbers">49</span>}
<span class="line-numbers">50</span><span class="comment">// end::class[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>SystemLoadData.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2021 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.graphql.models</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Description</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.NonNull</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Type</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="comment">// tag::type[]</span>
<span class="line-numbers">19</span><span class="annotation">@Type</span>(<span class="string"><span class="delimiter">"</span><span class="content">loadData</span><span class="delimiter">"</span></span>)
<span class="line-numbers">20</span><span class="comment">// end::type[]</span>
<span class="line-numbers">21</span><span class="comment">// tag::description[]</span>
<span class="line-numbers">22</span><span class="annotation">@Description</span>(<span class="string"><span class="delimiter">"</span><span class="content">System usage data</span><span class="delimiter">"</span></span>)
<span class="line-numbers">23</span><span class="comment">// end::description[]</span>
<span class="line-numbers">24</span><span class="comment">// tag::class[]</span>
<span class="line-numbers">25</span><span class="directive">public</span> <span class="type">class</span> <span class="class">SystemLoadData</span> {
<span class="line-numbers">26</span>
<span class="line-numbers">27</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">28</span>    <span class="directive">private</span> <span class="predefined-type">Double</span> loadAverage;
<span class="line-numbers">29</span>
<span class="line-numbers">30</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">31</span>    <span class="directive">private</span> <span class="predefined-type">Long</span> heapUsed;
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">34</span>    <span class="directive">private</span> <span class="predefined-type">Long</span> nonHeapUsed;
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="directive">public</span> <span class="predefined-type">Double</span> getLoadAverage() {
<span class="line-numbers">37</span>        <span class="keyword">return</span> loadAverage;
<span class="line-numbers">38</span>    }
<span class="line-numbers">39</span>
<span class="line-numbers">40</span>    <span class="directive">public</span> <span class="type">void</span> setLoadAverage(<span class="predefined-type">Double</span> loadAverage) {
<span class="line-numbers">41</span>        <span class="local-variable">this</span>.loadAverage = loadAverage;
<span class="line-numbers">42</span>    }
<span class="line-numbers">43</span>
<span class="line-numbers">44</span>    <span class="directive">public</span> <span class="predefined-type">Long</span> getHeapUsed() {
<span class="line-numbers">45</span>        <span class="keyword">return</span> heapUsed;
<span class="line-numbers">46</span>    }
<span class="line-numbers">47</span>
<span class="line-numbers">48</span>    <span class="directive">public</span> <span class="type">void</span> setHeapUsed(<span class="predefined-type">Long</span> heapUsed) {
<span class="line-numbers">49</span>        <span class="local-variable">this</span>.heapUsed = heapUsed;
<span class="line-numbers">50</span>    }
<span class="line-numbers">51</span>
<span class="line-numbers">52</span>    <span class="directive">public</span> <span class="predefined-type">Long</span> getNonHeapUsed() {
<span class="line-numbers">53</span>        <span class="keyword">return</span> nonHeapUsed;
<span class="line-numbers">54</span>    }
<span class="line-numbers">55</span>
<span class="line-numbers">56</span>    <span class="directive">public</span> <span class="type">void</span> setNonHeapUsed(<span class="predefined-type">Long</span> nonHeapUsed) {
<span class="line-numbers">57</span>        <span class="local-variable">this</span>.nonHeapUsed = nonHeapUsed;
<span class="line-numbers">58</span>    }
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>}
<span class="line-numbers">61</span><span class="comment">// end::class[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To save time, the <code class="hotspot=class file=3">SystemLoad</code> class and <code class="hotspot=class file=4">SystemLoadData</code> class are provided for you. The <code>SystemLoad</code> class maps to the <code class="hotspot=type file=3">systemLoad</code> object type, which describes the resource usage of a <code>system</code> service. The <code>SystemLoadData</code> class maps to the <code class="hotspot=type file=4">loadData</code> object type. The <code>loadData</code> object will be a nested object inside the <code>systemLoad</code> object type. Together, these objects will contain the details of the resource usage of a <code>system</code> service.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementing-system-service">Implementing system service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>system</code> microservices are backend services that use Jakarta Restful Web Services. For more details on using Jakarta Restful Web Services, see the <a href="https://www.openliberty.io/guides/rest-intro.html" target="_blank" rel="noopener noreferrer">Creating a RESTful web service guide</a>. These <code>system</code> microservices report system properties. GraphQL can access multiple instances of these <code>system</code> microservices and collate their information. In a real scenario, GraphQL might access multiple databases or other services.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Create the <code>SystemPropertiesResource</code> class.</mark>
<code>system/src/main/java/io/openliberty/guides/system/SystemPropertiesResource.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>SystemPropertiesResource.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2021, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.system</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">jakarta.enterprise.context.ApplicationScoped</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Consumes</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.GET</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.POST</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.PathParam</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Produces</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.MediaType</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.JavaInfo</span>;
<span class="line-numbers">25</span>
<span class="line-numbers">26</span><span class="annotation">@ApplicationScoped</span>
<span class="line-numbers">27</span><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span>)
<span class="line-numbers">28</span><span class="directive">public</span> <span class="type">class</span> <span class="class">SystemPropertiesResource</span> {
<span class="line-numbers">29</span>
<span class="line-numbers">30</span>    <span class="comment">// tag::queryProperty[]</span>
<span class="line-numbers">31</span>    <span class="annotation">@GET</span>
<span class="line-numbers">32</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">properties/{property}</span><span class="delimiter">"</span></span>)
<span class="line-numbers">33</span>    <span class="annotation">@Produces</span>(MediaType.TEXT_PLAIN)
<span class="line-numbers">34</span>    <span class="directive">public</span> <span class="predefined-type">String</span> queryProperty(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">property</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> property) {
<span class="line-numbers">35</span>        <span class="keyword">return</span> <span class="predefined-type">System</span>.getProperty(property);
<span class="line-numbers">36</span>    }
<span class="line-numbers">37</span>    <span class="comment">// end::queryProperty[]</span>
<span class="line-numbers">38</span>
<span class="line-numbers">39</span>    <span class="comment">// tag::java[]</span>
<span class="line-numbers">40</span>    <span class="annotation">@GET</span>
<span class="line-numbers">41</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">properties/java</span><span class="delimiter">"</span></span>)
<span class="line-numbers">42</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">43</span>    <span class="directive">public</span> JavaInfo java() {
<span class="line-numbers">44</span>        JavaInfo javaInfo = <span class="keyword">new</span> JavaInfo();
<span class="line-numbers">45</span>        javaInfo.setVersion(<span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">java.version</span><span class="delimiter">"</span></span>));
<span class="line-numbers">46</span>        javaInfo.setVendor(<span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">java.vendor</span><span class="delimiter">"</span></span>));
<span class="line-numbers">47</span>        <span class="keyword">return</span> javaInfo;
<span class="line-numbers">48</span>    }
<span class="line-numbers">49</span>    <span class="comment">// end::java[]</span>
<span class="line-numbers">50</span>
<span class="line-numbers">51</span>    <span class="comment">// tag::note[]</span>
<span class="line-numbers">52</span>    <span class="annotation">@POST</span>
<span class="line-numbers">53</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">note</span><span class="delimiter">"</span></span>)
<span class="line-numbers">54</span>    <span class="annotation">@Consumes</span>(MediaType.TEXT_PLAIN)
<span class="line-numbers">55</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">56</span>    <span class="directive">public</span> Response editNote(<span class="predefined-type">String</span> text) {
<span class="line-numbers">57</span>        <span class="predefined-type">System</span>.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">note</span><span class="delimiter">"</span></span>, text);
<span class="line-numbers">58</span>        <span class="keyword">return</span> Response.ok().build();
<span class="line-numbers">59</span>    }
<span class="line-numbers">60</span>    <span class="comment">// end::note[]</span>
<span class="line-numbers">61</span>
<span class="line-numbers">62</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot file=0">SystemPropertiesResource</code> class provides endpoints to interact with the system properties. The <code class="hotspot=queryProperty file=0">properties/{property}</code> endpoint accesses system properties. The <code class="hotspot=java file=0">properties/java</code> endpoint assembles and returns an object describing the system’s Java installation. The <code class="hotspot=note file=0">note</code> endpoint is used to write a note into the system properties.</p>
</div>
<div class="listingblock code_command hotspot file=1">
<div class="content">
<pre><mark>Create the <code>SystemMetricsResource</code> class.</mark>
<code>system/src/main/java/io/openliberty/guides/system/SystemMetricsResource.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>SystemMetricsResource.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2021, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.system</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">java.lang.management.ManagementFactory</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">java.lang.management.MemoryMXBean</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">java.lang.management.OperatingSystemMXBean</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.enterprise.context.ApplicationScoped</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.GET</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Produces</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.MediaType</span>;
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemLoadData</span>;
<span class="line-numbers">25</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemMetrics</span>;
<span class="line-numbers">26</span>
<span class="line-numbers">27</span><span class="annotation">@ApplicationScoped</span>
<span class="line-numbers">28</span><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">metrics</span><span class="delimiter">"</span></span>)
<span class="line-numbers">29</span><span class="directive">public</span> <span class="type">class</span> <span class="class">SystemMetricsResource</span> {
<span class="line-numbers">30</span>
<span class="line-numbers">31</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">OperatingSystemMXBean</span> OS_MEAN =
<span class="line-numbers">32</span>                             <span class="predefined-type">ManagementFactory</span>.getOperatingSystemMXBean();
<span class="line-numbers">33</span>
<span class="line-numbers">34</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">MemoryMXBean</span> MEM_BEAN = <span class="predefined-type">ManagementFactory</span>.getMemoryMXBean();
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="comment">// tag::systemMetrics[]</span>
<span class="line-numbers">37</span>    <span class="annotation">@GET</span>
<span class="line-numbers">38</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">39</span>    <span class="directive">public</span> SystemMetrics getSystemMetrics() {
<span class="line-numbers">40</span>        SystemMetrics metrics = <span class="keyword">new</span> SystemMetrics();
<span class="line-numbers">41</span>        metrics.setProcessors(OS_MEAN.getAvailableProcessors());
<span class="line-numbers">42</span>        metrics.setHeapSize(MEM_BEAN.getHeapMemoryUsage().getMax());
<span class="line-numbers">43</span>        metrics.setNonHeapSize(MEM_BEAN.getNonHeapMemoryUsage().getMax());
<span class="line-numbers">44</span>        <span class="keyword">return</span> metrics;
<span class="line-numbers">45</span>    }
<span class="line-numbers">46</span>    <span class="comment">// end::systemMetrics[]</span>
<span class="line-numbers">47</span>
<span class="line-numbers">48</span>    <span class="comment">// tag::systemLoad[]</span>
<span class="line-numbers">49</span>    <span class="annotation">@GET</span>
<span class="line-numbers">50</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">/systemLoad</span><span class="delimiter">"</span></span>)
<span class="line-numbers">51</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">52</span>    <span class="directive">public</span> SystemLoadData getSystemLoad() {
<span class="line-numbers">53</span>        SystemLoadData systemLoadData = <span class="keyword">new</span> SystemLoadData();
<span class="line-numbers">54</span>        systemLoadData.setLoadAverage(OS_MEAN.getSystemLoadAverage());
<span class="line-numbers">55</span>        systemLoadData.setHeapUsed(MEM_BEAN.getHeapMemoryUsage().getUsed());
<span class="line-numbers">56</span>        systemLoadData.setNonHeapUsed(MEM_BEAN.getNonHeapMemoryUsage().getUsed());
<span class="line-numbers">57</span>        <span class="keyword">return</span> systemLoadData;
<span class="line-numbers">58</span>    }
<span class="line-numbers">59</span>    <span class="comment">// end::systemLoad[]</span>
<span class="line-numbers">60</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot file=1">SystemMetricsResource</code> class provides information on the system resources and their usage. The <code class="hotspot=systemLoad file=1">systemLoad</code> endpoint assembles and returns an object that describes the system load. It includes the JVM heap load and processor load.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementing-graphql-resolvers">Implementing GraphQL resolvers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Resolvers are functions that provide instructions for GraphQL operations. Each operation requires a corresponding resolver. The <code>query</code> operation type is read-only and fetches data. The <code>mutation</code> operation type can create, delete, or modify data.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Create the <code>GraphQLService</code> class.</mark>
<code>graphql/src/main/java/io/openliberty/guides/graphql/GraphQLService.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>GraphQLService.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers">  1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers">  2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers">  3</span><span class="comment"> * Copyright (c) 2021, 2022 IBM Corporation and others.</span>
<span class="line-numbers">  4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers">  5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers">  6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers">  7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers">  8</span><span class="comment"> *</span>
<span class="line-numbers">  9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers"> 10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers"> 11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers"> 12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.graphql</span>;
<span class="line-numbers"> 13</span>
<span class="line-numbers"> 14</span><span class="keyword">import</span> <span class="include">java.net.URI</span>;
<span class="line-numbers"> 15</span><span class="keyword">import</span> <span class="include">java.util.ArrayList</span>;
<span class="line-numbers"> 16</span><span class="keyword">import</span> <span class="include">java.util.Collections</span>;
<span class="line-numbers"> 17</span><span class="keyword">import</span> <span class="include">java.util.HashMap</span>;
<span class="line-numbers"> 18</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers"> 19</span><span class="keyword">import</span> <span class="include">java.util.Map</span>;
<span class="line-numbers"> 20</span>
<span class="line-numbers"> 21</span><span class="keyword">import</span> <span class="include">jakarta.inject.Inject</span>;
<span class="line-numbers"> 22</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.ProcessingException</span>;
<span class="line-numbers"> 23</span>
<span class="line-numbers"> 24</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.config.inject.ConfigProperty</span>;
<span class="line-numbers"> 25</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Description</span>;
<span class="line-numbers"> 26</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.GraphQLApi</span>;
<span class="line-numbers"> 27</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Mutation</span>;
<span class="line-numbers"> 28</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Name</span>;
<span class="line-numbers"> 29</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.NonNull</span>;
<span class="line-numbers"> 30</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Query</span>;
<span class="line-numbers"> 31</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Source</span>;
<span class="line-numbers"> 32</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.rest.client.RestClientBuilder</span>;
<span class="line-numbers"> 33</span>
<span class="line-numbers"> 34</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.client.SystemClient</span>;
<span class="line-numbers"> 35</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.client.UnknownUriException</span>;
<span class="line-numbers"> 36</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.client.UnknownUriExceptionMapper</span>;
<span class="line-numbers"> 37</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.JavaInfo</span>;
<span class="line-numbers"> 38</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemInfo</span>;
<span class="line-numbers"> 39</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemLoad</span>;
<span class="line-numbers"> 40</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemLoadData</span>;
<span class="line-numbers"> 41</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemMetrics</span>;
<span class="line-numbers"> 42</span>
<span class="line-numbers"> 43</span><span class="comment">// tag::graphqlapi[]</span>
<span class="line-numbers"> 44</span><span class="annotation">@GraphQLApi</span>
<span class="line-numbers"> 45</span><span class="comment">// end::graphqlapi[]</span>
<span class="line-numbers"> 46</span><span class="directive">public</span> <span class="type">class</span> <span class="class">GraphQLService</span> {
<span class="line-numbers"> 47</span>
<span class="line-numbers"> 48</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, SystemClient&gt; clients =
<span class="line-numbers"> 49</span>            <span class="predefined-type">Collections</span>.synchronizedMap(<span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;<span class="predefined-type">String</span>, SystemClient&gt;());
<span class="line-numbers"> 50</span>
<span class="line-numbers"> 51</span>    <span class="annotation">@Inject</span>
<span class="line-numbers"> 52</span>    <span class="annotation">@ConfigProperty</span>(name = <span class="string"><span class="delimiter">"</span><span class="content">system.http.port</span><span class="delimiter">"</span></span>, defaultValue = <span class="string"><span class="delimiter">"</span><span class="content">9080</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 53</span>    <span class="predefined-type">String</span> SYSTEM_PORT;
<span class="line-numbers"> 54</span>
<span class="line-numbers"> 55</span>    <span class="comment">// tag::query1[]</span>
<span class="line-numbers"> 56</span>    <span class="annotation">@Query</span>(<span class="string"><span class="delimiter">"</span><span class="content">system</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 57</span>    <span class="comment">// end::query1[]</span>
<span class="line-numbers"> 58</span>    <span class="comment">// tag::nonnull1[]</span>
<span class="line-numbers"> 59</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers"> 60</span>    <span class="comment">// end::nonnull1[]</span>
<span class="line-numbers"> 61</span>    <span class="comment">// tag::description1[]</span>
<span class="line-numbers"> 62</span>    <span class="annotation">@Description</span>(<span class="string"><span class="delimiter">"</span><span class="content">Gets information about the system</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 63</span>    <span class="comment">// end::description1[]</span>
<span class="line-numbers"> 64</span>    <span class="comment">// tag::getSystemInfo[]</span>
<span class="line-numbers"> 65</span>    <span class="comment">// tag::getSystemInfoHeader[]</span>
<span class="line-numbers"> 66</span>    <span class="directive">public</span> SystemInfo getSystemInfo(<span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostname</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> hostname)
<span class="line-numbers"> 67</span>        <span class="directive">throws</span> ProcessingException, UnknownUriException {
<span class="line-numbers"> 68</span>    <span class="comment">// end::getSystemInfoHeader[]</span>
<span class="line-numbers"> 69</span>        SystemClient systemClient = getSystemClient(hostname);
<span class="line-numbers"> 70</span>        SystemInfo systemInfo = <span class="keyword">new</span> SystemInfo();
<span class="line-numbers"> 71</span>        systemInfo.setHostname(hostname);
<span class="line-numbers"> 72</span>        systemInfo.setUsername(systemClient.queryProperty(<span class="string"><span class="delimiter">"</span><span class="content">user.name</span><span class="delimiter">"</span></span>));
<span class="line-numbers"> 73</span>        systemInfo.setOsName(systemClient.queryProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.name</span><span class="delimiter">"</span></span>));
<span class="line-numbers"> 74</span>        systemInfo.setOsArch(systemClient.queryProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.arch</span><span class="delimiter">"</span></span>));
<span class="line-numbers"> 75</span>        systemInfo.setOsVersion(systemClient.queryProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.version</span><span class="delimiter">"</span></span>));
<span class="line-numbers"> 76</span>        systemInfo.setNote(systemClient.queryProperty(<span class="string"><span class="delimiter">"</span><span class="content">note</span><span class="delimiter">"</span></span>));
<span class="line-numbers"> 77</span>
<span class="line-numbers"> 78</span>        <span class="keyword">return</span> systemInfo;
<span class="line-numbers"> 79</span>    }
<span class="line-numbers"> 80</span>    <span class="comment">// end::getSystemInfo[]</span>
<span class="line-numbers"> 81</span>
<span class="line-numbers"> 82</span>    <span class="comment">// tag::mutation[]</span>
<span class="line-numbers"> 83</span>    <span class="annotation">@Mutation</span>(<span class="string"><span class="delimiter">"</span><span class="content">editNote</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 84</span>    <span class="comment">// end::mutation[]</span>
<span class="line-numbers"> 85</span>    <span class="comment">// tag::description2[]</span>
<span class="line-numbers"> 86</span>    <span class="annotation">@Description</span>(<span class="string"><span class="delimiter">"</span><span class="content">Changes the note set for the system</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 87</span>    <span class="comment">// end::description2[]</span>
<span class="line-numbers"> 88</span>    <span class="comment">// tag::editNoteFunction[]</span>
<span class="line-numbers"> 89</span>    <span class="comment">// tag::editNoteHeader[]</span>
<span class="line-numbers"> 90</span>    <span class="directive">public</span> <span class="type">boolean</span> editNote(<span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostname</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> hostname,
<span class="line-numbers"> 91</span>                            <span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">note</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> note)
<span class="line-numbers"> 92</span>        <span class="directive">throws</span> ProcessingException, UnknownUriException {
<span class="line-numbers"> 93</span>    <span class="comment">// end::editNoteHeader[]</span>
<span class="line-numbers"> 94</span>        SystemClient systemClient = getSystemClient(hostname);
<span class="line-numbers"> 95</span>        systemClient.editNote(note);
<span class="line-numbers"> 96</span>        <span class="keyword">return</span> <span class="predefined-constant">true</span>;
<span class="line-numbers"> 97</span>    }
<span class="line-numbers"> 98</span>    <span class="comment">// end::editNoteFunction[]</span>
<span class="line-numbers"> 99</span>
<span class="line-numbers">100</span>    <span class="comment">// tag::query2[]</span>
<span class="line-numbers">101</span>    <span class="annotation">@Query</span>(<span class="string"><span class="delimiter">"</span><span class="content">systemLoad</span><span class="delimiter">"</span></span>)
<span class="line-numbers">102</span>    <span class="comment">// end::query2[]</span>
<span class="line-numbers">103</span>    <span class="comment">// tag::description3[]</span>
<span class="line-numbers">104</span>    <span class="annotation">@Description</span>(<span class="string"><span class="delimiter">"</span><span class="content">Gets system load data from the systems</span><span class="delimiter">"</span></span>)
<span class="line-numbers">105</span>    <span class="comment">// end::description3[]</span>
<span class="line-numbers">106</span>    <span class="comment">// tag::getSystemLoad[]</span>
<span class="line-numbers">107</span>    <span class="comment">// tag::getSystemLoadHeader[]</span>
<span class="line-numbers">108</span>    <span class="directive">public</span> SystemLoad<span class="type">[]</span> getSystemLoad(<span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostnames</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span><span class="type">[]</span> hostnames)
<span class="line-numbers">109</span>        <span class="directive">throws</span> ProcessingException, UnknownUriException {
<span class="line-numbers">110</span>    <span class="comment">// end::getSystemLoadHeader[]</span>
<span class="line-numbers">111</span>        <span class="keyword">if</span> (hostnames == <span class="predefined-constant">null</span> || hostnames.length == <span class="integer">0</span>) {
<span class="line-numbers">112</span>            <span class="keyword">return</span> <span class="keyword">new</span> SystemLoad[<span class="integer">0</span>];
<span class="line-numbers">113</span>        }
<span class="line-numbers">114</span>
<span class="line-numbers">115</span>        <span class="predefined-type">List</span>&lt;SystemLoad&gt; systemLoads = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;SystemLoad&gt;(hostnames.length);
<span class="line-numbers">116</span>
<span class="line-numbers">117</span>        <span class="keyword">for</span> (<span class="predefined-type">String</span> hostname : hostnames) {
<span class="line-numbers">118</span>            SystemLoad systemLoad = <span class="keyword">new</span> SystemLoad();
<span class="line-numbers">119</span>            systemLoad.setHostname(hostname);
<span class="line-numbers">120</span>            systemLoads.add(systemLoad);
<span class="line-numbers">121</span>        }
<span class="line-numbers">122</span>
<span class="line-numbers">123</span>        <span class="keyword">return</span> systemLoads.toArray(<span class="keyword">new</span> SystemLoad[systemLoads.size()]);
<span class="line-numbers">124</span>    }
<span class="line-numbers">125</span>    <span class="comment">// end::getSystemLoad[]</span>
<span class="line-numbers">126</span>
<span class="line-numbers">127</span>    <span class="comment">// Nested objects, these can be expensive to obtain</span>
<span class="line-numbers">128</span>    <span class="comment">// tag::nonnull3[]</span>
<span class="line-numbers">129</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">130</span>    <span class="comment">// tag::nonnull3[]</span>
<span class="line-numbers">131</span>    <span class="comment">// tag::systemMetricsFunction[]</span>
<span class="line-numbers">132</span>    <span class="comment">// tag::systemMetricsHeader[]</span>
<span class="line-numbers">133</span>    <span class="directive">public</span> SystemMetrics systemMetrics(
<span class="line-numbers">134</span>        <span class="annotation">@Source</span> <span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">system</span><span class="delimiter">"</span></span>) SystemInfo systemInfo)
<span class="line-numbers">135</span>        <span class="directive">throws</span> ProcessingException, UnknownUriException {
<span class="line-numbers">136</span>    <span class="comment">// end::systemMetricsHeader[]</span>
<span class="line-numbers">137</span>        <span class="predefined-type">String</span> hostname = systemInfo.getHostname();
<span class="line-numbers">138</span>        SystemClient systemClient = getSystemClient(hostname);
<span class="line-numbers">139</span>        <span class="keyword">return</span> systemClient.getSystemMetrics();
<span class="line-numbers">140</span>    }
<span class="line-numbers">141</span>    <span class="comment">// end::systemMetricsFunction[]</span>
<span class="line-numbers">142</span>
<span class="line-numbers">143</span>    <span class="comment">// tag::nonnull4[]</span>
<span class="line-numbers">144</span>    <span class="annotation">@NonNull</span>
<span class="line-numbers">145</span>    <span class="comment">// end::nonnull4[]</span>
<span class="line-numbers">146</span>    <span class="comment">// tag::javaFunction[]</span>
<span class="line-numbers">147</span>    <span class="comment">// tag::javaHeader[]</span>
<span class="line-numbers">148</span>    <span class="directive">public</span> JavaInfo java(<span class="annotation">@Source</span> <span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">system</span><span class="delimiter">"</span></span>) SystemInfo systemInfo)
<span class="line-numbers">149</span>        <span class="directive">throws</span> ProcessingException, UnknownUriException {
<span class="line-numbers">150</span>    <span class="comment">// end::javaHeader[]</span>
<span class="line-numbers">151</span>        <span class="predefined-type">String</span> hostname = systemInfo.getHostname();
<span class="line-numbers">152</span>        SystemClient systemClient = getSystemClient(hostname);
<span class="line-numbers">153</span>        <span class="keyword">return</span> systemClient.java();
<span class="line-numbers">154</span>    }
<span class="line-numbers">155</span>    <span class="comment">// end::javaFunction[]</span>
<span class="line-numbers">156</span>
<span class="line-numbers">157</span>    <span class="comment">// tag::loadData[]</span>
<span class="line-numbers">158</span>    <span class="comment">// tag::loadDataHeader[]</span>
<span class="line-numbers">159</span>    <span class="directive">public</span> SystemLoadData loadData(<span class="annotation">@Source</span> <span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">systemLoad</span><span class="delimiter">"</span></span>) SystemLoad systemLoad)
<span class="line-numbers">160</span>        <span class="directive">throws</span> ProcessingException, UnknownUriException {
<span class="line-numbers">161</span>    <span class="comment">// end::loadDataHeader[]</span>
<span class="line-numbers">162</span>        <span class="predefined-type">String</span> hostname = systemLoad.getHostname();
<span class="line-numbers">163</span>        SystemClient systemClient = getSystemClient(hostname);
<span class="line-numbers">164</span>        <span class="keyword">return</span> systemClient.getSystemLoad();
<span class="line-numbers">165</span>    }
<span class="line-numbers">166</span>    <span class="comment">// end::loadData[]</span>
<span class="line-numbers">167</span>
<span class="line-numbers">168</span>    <span class="directive">private</span> SystemClient getSystemClient(<span class="predefined-type">String</span> hostname) {
<span class="line-numbers">169</span>        SystemClient sc = clients.get(hostname);
<span class="line-numbers">170</span>        <span class="keyword">if</span> (sc == <span class="predefined-constant">null</span>) {
<span class="line-numbers">171</span>            <span class="predefined-type">String</span> customURIString = <span class="string"><span class="delimiter">"</span><span class="content">http://</span><span class="delimiter">"</span></span> + hostname + <span class="string"><span class="delimiter">"</span><span class="content">:</span><span class="delimiter">"</span></span>
<span class="line-numbers">172</span>                                      + SYSTEM_PORT + <span class="string"><span class="delimiter">"</span><span class="content">/system</span><span class="delimiter">"</span></span>;
<span class="line-numbers">173</span>            <span class="predefined-type">URI</span> customURI = <span class="predefined-type">URI</span>.create(customURIString);
<span class="line-numbers">174</span>            sc = RestClientBuilder
<span class="line-numbers">175</span>                   .newBuilder()
<span class="line-numbers">176</span>                   .baseUri(customURI)
<span class="line-numbers">177</span>                   .register(UnknownUriExceptionMapper.class)
<span class="line-numbers">178</span>                   .build(SystemClient.class);
<span class="line-numbers">179</span>            clients.put(hostname, sc);
<span class="line-numbers">180</span>        }
<span class="line-numbers">181</span>        <span class="keyword">return</span> sc;
<span class="line-numbers">182</span>    }
<span class="line-numbers">183</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resolvers are defined in the <code class="hotspot file=0">GraphQLService.java</code> file. The <code class="hotspot=graphqlapi file=0">@GraphQLApi</code> annotation enables GraphQL to use the methods that are defined in this class as resolvers.</p>
</div>
<div class="paragraph">
<p>Operations of the <code>query</code> type are read-only operations that retrieve data. They’re defined by using the <code class="hotspot=query1 hotspot=query2 file=0">@Query</code> annotation.</p>
</div>
<div class="paragraph">
<p>One of the <code>query</code> requests in this application is the <code>system</code> request. This request is handled by the <code class="hotspot=getSystemInfo file=0">getSystemInfo()</code> function. It retrieves and bundles system information into a <code>SystemInfo</code> object that is returned.</p>
</div>
<div class="paragraph">
<p>It uses a <code class="hotspot=getSystemInfoHeader file=0">@Name</code> on one of its input parameters. The <code>@Name</code> annotation has different functions depending on the context in which it’s used. In this context, it denotes input parameters for GraphQL operations. For the <code class="hotspot=getSystemInfo file=0">getSystemInfo()</code> function, it’s used to input the <code>hostname</code> for the system you want to look up information for.</p>
</div>
<div class="paragraph">
<p>Recall that the <code>SystemInfo</code> class contained nested objects. It contained a <code>JavaInfo</code> and an <code>SystemMetrics</code> object. The <code class="hotspot=systemMetricsHeader hotspot=javaHeader file=0">@Source</code> annotation is used to add these nested objects as properties to the <code>SystemInfo</code> object.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=systemMetricsHeader hotspot=javaHeader file=0">@Name</code> appears again here. In this context alongside the <code class="hotspot=systemMetricsHeader hotspot=javaHeader file=0">@Source</code> annotation, it’s used to connect the <code class="hotspot=javaFunction file=0">java</code> and <code class="hotspot=systemMetricsFunction file=0">systemMetrics</code> object types to <code>system</code> requests and the <code>system</code> object type.</p>
</div>
<div class="paragraph">
<p>The other <code>query</code> request is the <code>systemLoad</code> request, which is handled by the <code class="hotspot=getSystemLoad file=0">getSystemLoad()</code> function. The <code>systemLoad</code> request retrieves information about the resource usage of any number of system services. It accepts an array of <code>hostnames</code> as the input for the systems to look up. It’s set up similarly to the <code>system</code> request, with the <code class="hotspot=loadData file=0">loadData</code> function used for the nested <code>SystemLoadData</code> object.</p>
</div>
<div class="paragraph">
<p>Operations of the <code>mutation</code> type are used to edit data. They can create, update, or delete data. They’re defined by using the <code class="hotspot=mutation file=0">@Mutation</code> annotation.</p>
</div>
<div class="paragraph">
<p>There’s one <code>mutation</code> operation in this application - the <code>editNote</code> request. This request is handled by the <code class="hotspot=editNoteFunction file=0">editNote()</code> function. This request is used to write a note into the properties of a given system. There are inputs for the system you want to write into, and the note you want to write.</p>
</div>
<div class="paragraph">
<p>Each resolver function has a <code class="hotspot=description1 hotspot=description2 hotspot=description3 file=0">@Description</code> annotation, which provides a description that is used for the schema. Descriptions aren’t required, but it’s good practice to include them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-graphql">Enabling GraphQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use GraphQL, the MicroProfile GraphQL dependencies and features need to be included.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Replace the Maven project file.</mark>
<code>graphql/pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>pom.xml</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers">  1</span><span class="preprocessor">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="line-numbers">  2</span><span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span>
<span class="line-numbers">  3</span>         <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
<span class="line-numbers">  4</span>         <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers">  5</span>    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
<span class="line-numbers">  6</span>
<span class="line-numbers">  7</span>    <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">  8</span>    <span class="tag">&lt;artifactId&gt;</span>guide-microprofile-graphql-graphql<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">  9</span>    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 10</span>    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
<span class="line-numbers"> 11</span>
<span class="line-numbers"> 12</span>    <span class="tag">&lt;properties&gt;</span>
<span class="line-numbers"> 13</span>        <span class="tag">&lt;maven.compiler.source&gt;</span>11<span class="tag">&lt;/maven.compiler.source&gt;</span>
<span class="line-numbers"> 14</span>        <span class="tag">&lt;maven.compiler.target&gt;</span>11<span class="tag">&lt;/maven.compiler.target&gt;</span>
<span class="line-numbers"> 15</span>        <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
<span class="line-numbers"> 16</span>        <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
<span class="line-numbers"> 17</span>        <span class="comment">&lt;!-- Liberty configuration --&gt;</span>
<span class="line-numbers"> 18</span>        <span class="tag">&lt;liberty.var.default.http.port&gt;</span>9082<span class="tag">&lt;/liberty.var.default.http.port&gt;</span>
<span class="line-numbers"> 19</span>        <span class="tag">&lt;liberty.var.default.https.port&gt;</span>9445<span class="tag">&lt;/liberty.var.default.https.port&gt;</span>
<span class="line-numbers"> 20</span>    <span class="tag">&lt;/properties&gt;</span>
<span class="line-numbers"> 21</span>
<span class="line-numbers"> 22</span>    <span class="tag">&lt;dependencies&gt;</span>
<span class="line-numbers"> 23</span>        <span class="comment">&lt;!-- Provided dependencies --&gt;</span>
<span class="line-numbers"> 24</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 25</span>            <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 26</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 27</span>            <span class="tag">&lt;version&gt;</span>10.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 28</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 29</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 30</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 31</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 32</span>            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 33</span>            <span class="tag">&lt;version&gt;</span>6.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 34</span>            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
<span class="line-numbers"> 35</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 36</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 37</span>        
<span class="line-numbers"> 38</span>        <span class="comment">&lt;!-- Required dependencies --&gt;</span>
<span class="line-numbers"> 39</span>        <span class="comment">&lt;!-- tag::models[] --&gt;</span>
<span class="line-numbers"> 40</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 41</span>           <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 42</span>           <span class="tag">&lt;artifactId&gt;</span>guide-microprofile-graphql-models<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 43</span>           <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 44</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 45</span>        <span class="comment">&lt;!-- end::models[] --&gt;</span>
<span class="line-numbers"> 46</span>        
<span class="line-numbers"> 47</span>        <span class="comment">&lt;!-- GraphQL API dependencies --&gt;</span>
<span class="line-numbers"> 48</span>        <span class="comment">&lt;!-- tag::graphQLDependency[] --&gt;</span>
<span class="line-numbers"> 49</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 50</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile.graphql<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 51</span>            <span class="tag">&lt;artifactId&gt;</span>microprofile-graphql-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 52</span>            <span class="tag">&lt;version&gt;</span>2.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 53</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 54</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 55</span>        <span class="comment">&lt;!-- end::graphQLDependency[] --&gt;</span>
<span class="line-numbers"> 56</span>        <span class="comment">&lt;!-- For tests --&gt;</span>
<span class="line-numbers"> 57</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 58</span>            <span class="tag">&lt;groupId&gt;</span>org.junit.jupiter<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 59</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 60</span>            <span class="tag">&lt;version&gt;</span>5.9.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 61</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 62</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 63</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 64</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 65</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 66</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 67</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 68</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 69</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 70</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 71</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-json-binding-provider<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 72</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 73</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 74</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 75</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 76</span>            <span class="tag">&lt;groupId&gt;</span>org.glassfish<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 77</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.json<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 78</span>            <span class="tag">&lt;version&gt;</span>2.0.1<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 79</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 80</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 81</span>    <span class="tag">&lt;/dependencies&gt;</span>
<span class="line-numbers"> 82</span>
<span class="line-numbers"> 83</span>    <span class="tag">&lt;build&gt;</span>
<span class="line-numbers"> 84</span>        <span class="tag">&lt;finalName&gt;</span>${project.artifactId}<span class="tag">&lt;/finalName&gt;</span>
<span class="line-numbers"> 85</span>        <span class="tag">&lt;plugins&gt;</span>
<span class="line-numbers"> 86</span>            <span class="comment">&lt;!-- Enable liberty-maven plugin --&gt;</span>
<span class="line-numbers"> 87</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 88</span>                <span class="tag">&lt;groupId&gt;</span>io.openliberty.tools<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 89</span>                <span class="tag">&lt;artifactId&gt;</span>liberty-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 90</span>                <span class="tag">&lt;version&gt;</span>3.8.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 91</span>                <span class="tag">&lt;configuration&gt;</span>
<span class="line-numbers"> 92</span>                    <span class="tag">&lt;looseApplication&gt;</span>false<span class="tag">&lt;/looseApplication&gt;</span>
<span class="line-numbers"> 93</span>                <span class="tag">&lt;/configuration&gt;</span>
<span class="line-numbers"> 94</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 95</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 96</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 97</span>                <span class="tag">&lt;artifactId&gt;</span>maven-war-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 98</span>                <span class="tag">&lt;version&gt;</span>3.3.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 99</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">100</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">101</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">102</span>                <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">103</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">104</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">105</span>            <span class="comment">&lt;!-- Plugin to run functional tests --&gt;</span>
<span class="line-numbers">106</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">107</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">108</span>                <span class="tag">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">109</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">110</span>                <span class="tag">&lt;configuration&gt;</span>
<span class="line-numbers">111</span>                    <span class="tag">&lt;systemPropertyVariables&gt;</span>
<span class="line-numbers">112</span>                        <span class="tag">&lt;http.port&gt;</span>${liberty.var.default.http.port}<span class="tag">&lt;/http.port&gt;</span>
<span class="line-numbers">113</span>                    <span class="tag">&lt;/systemPropertyVariables&gt;</span>
<span class="line-numbers">114</span>                <span class="tag">&lt;/configuration&gt;</span>
<span class="line-numbers">115</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">116</span>        <span class="tag">&lt;/plugins&gt;</span>
<span class="line-numbers">117</span>    <span class="tag">&lt;/build&gt;</span>
<span class="line-numbers">118</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adding the <code class="hotspot=graphQLDependency file=0">microprofile-graphql-api</code> dependency to the <code class="hotspot file=0">pom.xml</code> enables the GraphQL annotations that are used to develop the application.</p>
</div>
<div class="paragraph">
<p>The Open Liberty needs to be configured to support the GraphQL query language.</p>
</div>
<div class="listingblock code_command hotspot file=1">
<div class="content">
<pre><mark>Replace the Liberty server.xml configuration file.</mark>
<code>graphql/src/main/liberty/config/server.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>server.xml</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers"> 1</span><span class="tag">&lt;server</span> <span class="attribute-name">description</span>=<span class="string"><span class="delimiter">"</span><span class="content">GraphQL service</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 2</span>    <span class="tag">&lt;featureManager&gt;</span>
<span class="line-numbers"> 3</span>        <span class="tag">&lt;feature&gt;</span>restfulWS-3.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 4</span>        <span class="tag">&lt;feature&gt;</span>jsonb-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 5</span>        <span class="tag">&lt;feature&gt;</span>jsonp-2.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 6</span>        <span class="tag">&lt;feature&gt;</span>cdi-4.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 7</span>        <span class="tag">&lt;feature&gt;</span>mpConfig-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 8</span>        <span class="tag">&lt;feature&gt;</span>mpRestClient-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 9</span>        <span class="comment">&lt;!-- tag::graphql[] --&gt;</span>
<span class="line-numbers">10</span>        <span class="tag">&lt;feature&gt;</span>mpGraphQL-2.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers">11</span>        <span class="comment">&lt;!-- end::graphql[] --&gt;</span>
<span class="line-numbers">12</span>    <span class="tag">&lt;/featureManager&gt;</span>
<span class="line-numbers">13</span>
<span class="line-numbers">14</span>    <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.http.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9082</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">15</span>    <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.https.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9445</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">16</span>
<span class="line-numbers">17</span>    <span class="comment">&lt;!-- tag::enableGraphiql[] --&gt;</span>
<span class="line-numbers">18</span>    <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">io.openliberty.enableGraphQLUI</span><span class="delimiter">"</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="line-numbers">19</span>    <span class="comment">&lt;!-- end::enableGraphiql[] --&gt;</span>
<span class="line-numbers">20</span>
<span class="line-numbers">21</span>    <span class="tag">&lt;webApplication</span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">"</span><span class="content">guide-microprofile-graphql-graphql.war</span><span class="delimiter">"</span></span> <span class="attribute-name">contextRoot</span>=<span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="line-numbers">22</span>    <span class="tag">&lt;httpEndpoint</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span> <span class="attribute-name">httpPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.http.port}</span><span class="delimiter">"</span></span> 
<span class="line-numbers">23</span>        <span class="attribute-name">httpsPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.https.port}</span><span class="delimiter">"</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">defaultHttpEndpoint</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">24</span><span class="tag">&lt;/server&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=graphql file=1">mpGraphQL</code> feature that is added to the <code class="hotspot file=1">server.xml</code> enables the use of the <a href="https://openliberty.io/docs/latest/reference/feature/mpGraphQL-2.0.html" target="_blank" rel="noopener">MicroProfile GraphQL</a> feature in Open Liberty. Open Liberty’s MicroProfile GraphQL feature includes GraphiQL. Enable it by setting the <code class="hotspot=enableGraphiql file=1">io.openliberty.enableGraphQLUI</code> variable to <code>true</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-and-running-the-application">Building and running the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From the <code>start</code> directory, run the following commands:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre>mvn -pl models install
mvn package</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>mvn install</code> command compiles and packages the object types you created to a <code>.jar</code> file. This allows them to be used by the <code>system</code> and <code>graphql</code> services. The <code>mvn package</code> command packages the <code>system</code> and <code>graphql</code> services to <code>.war</code> files.</p>
</div>
<div class="paragraph">
<p>Dockerfiles have already been set up for you. Build your Docker images with the following commands:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre>docker build -t system:1.0-java11-SNAPSHOT --build-arg JAVA_VERSION=java11 system/.
docker build -t system:1.0-java17-SNAPSHOT --build-arg JAVA_VERSION=java17 system/.
docker build -t graphql:1.0-SNAPSHOT graphql/.</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--build-arg</code> parameter is used to create two different <code>system</code> services. One uses Java 11, while the other uses Java 17. Run these Docker images using the provided <code>startContainers</code> script. The script creates a network for the services to communicate through. It creates two <code>system</code> services and a GraphQL service.</p>
</div>
<div class="paragraph tab_link windows_link">
<p><code><strong>WINDOWS</strong></code></p>
</div>
<div class="paragraph tab_link mac_link">
<p><code><strong>MAC</strong></code></p>
</div>
<div class="paragraph tab_link linux_link">
<p><code><strong>LINUX</strong></code></p>
</div>
<div class="openblock tab_content windows_section">
<div class="content">
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>.\scripts\startContainers.bat</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock tab_content mac_section linux_section">
<div class="content">
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>./scripts/startContainers.sh</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The containers may take some time to become available.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-graphql-queries">Running GraphQL queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you make any requests, see the <a href="http://localhost:9082/graphql/schema.graphql" class="notranslate bare" target="_blank" rel="noopener noreferrer">http://localhost:9082/graphql/schema.graphql</a> URL. This URL returns the schema that describes the GraphQL service.</p>
</div>
<div class="paragraph">
<p>To access the GraphQL service, GraphiQL has already been set up and included for you.
Access GraphiQL at the <a href="http://localhost:9082/graphql-ui" class="notranslate bare" target="_blank" rel="noopener noreferrer">http://localhost:9082/graphql-ui</a> URL.</p>
</div>
<div class="paragraph">
<p>Queries that are made through GraphiQL are the same as queries that are made through HTTP requests. You can also view the schema through GraphiQL by clicking the <code>Docs</code> button on the menu bar.</p>
</div>
<div class="paragraph">
<p>Run the following <code>query</code> operation in GraphiQL to get every system property from the container running on Java 11:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>query {
  system(hostname: "system-java11") {
    hostname
    username
    osArch
    osName
    osVersion
    systemMetrics {
      processors
      heapSize
      nonHeapSize
    }
    java {
      vendorName
      version
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output is similar to the following example:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>{
  "data": {
    "system": {
      "hostname": "system-java11",
      "username": "default",
      "osArch": "amd64",
      "osName": "Linux",
      "osVersion": "5.10.25-linuxkit",
      "systemMetrics": {
        "processors": 4,
        "heapSize": 1031864320,
        "nonHeapSize": -1
      },
      "java": {
        "vendorName": "AdoptOpenJDK",
        "version": "11.0.18"
      }
    }
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Run the following <code>mutation</code> operation to add a note to the <code>system</code> service running on Java 11:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mutation {
  editNote(
    hostname: "system-java11"
    note: "I'm trying out GraphQL on Open Liberty!"
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You receive a response containing the Boolean <code>true</code> to let you know that the request was successfully processed. You can see the note that you added by running the following query operation. Notice that there’s no need to run a full query, as you only want the <code>note</code> property. Thus, the request only contains the <code>note</code> property.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>query {
  system(hostname: "system-java11") {
    note
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response is similar to the following example:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>{
  "data": {
    "system": {
      "note": "I'm trying out GraphQL on Open Liberty!"
    }
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>GraphQL returns only the <code>note</code> property, as it was the only property in the request. You can try out the operations using the hostname <code>system-java17</code> as well. To see an example of using an array as an input for an operation, try the following operation to get system loads:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>query {
  systemLoad(hostnames: ["system-java11", "system-java17"]) {
    hostname
    loadData {
      heapUsed
      nonHeapUsed
      loadAverage
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response is similar to the following example:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>{
  "data": {
    "systemLoad": [
      {
        "hostname": "system-java11",
        "loadData": {
          "heapUsed": 32432048,
          "nonHeapUsed": 85147084,
          "loadAverage": 0.36
        }
      },
      {
        "hostname": "system-java17",
        "loadData": {
          "heapUsed": 39373688,
          "nonHeapUsed": 90736300,
          "loadAverage": 0.36
        }
      }
    ]
  }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tearing-down-the-environment">Tearing down the environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you’re done checking out the application, run the following script to stop the application:</p>
</div>
<div class="paragraph tab_link windows_link">
<p><code><strong>WINDOWS</strong></code></p>
</div>
<div class="paragraph tab_link mac_link">
<p><code><strong>MAC</strong></code></p>
</div>
<div class="paragraph tab_link linux_link">
<p><code><strong>LINUX</strong></code></p>
</div>
<div class="openblock tab_content windows_section">
<div class="content">
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>.\scripts\stopContainers.bat</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock tab_content mac_section linux_section">
<div class="content">
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>./scripts/stopContainers.sh</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="great-work-youre-done">Great work! You’re done!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You just created a basic GraphQL service using MicroProfile GraphQL in Open Liberty!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guide-attribution">Guide Attribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Optimizing REST queries for microservices with GraphQL <span class="licensedClass">by</span> Open Liberty <span class="licensedClass">is licensed under</span> CC BY-ND 4.0</p>
</div>
</div>
</div>
    </div>
  </div>

  <!-- Code section -->
  <div id="code_column" class="position_relative" tabindex="0">
    <div id="code_column_title_container">
      <div id="code_column_tabs_container" class="dimmed">
        <ul id="code_column_tabs" class="nav" role="tablist"></ul>
      </div>
      <div class="copyFileButton" tabindex="0">
        <img src="/img/guides_copy_button.svg" alt="Copy file contents" title="Copy file contents">
        <div id="code_section_copied_confirmation">Copied to clipboard </div>
      </div>
    </div>
    <div id="code_column_content"></div>

    <div id="prereqs_container">
      <p id="prereqs_title">Prerequisites:</p>
      <div class="prereqs_list"></div>
      <div class="skills_network_container">
        <div class="skills_network_description"></div>
      </div>
    </div>

    <button id="dismiss_button" aria-label="Back to text" tabindex="0">
      Back to text
    </button>
  </div>
</div>

<!-- Build a list of all the documents in the guides code base -->






<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->


    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    


<!-- Sort list of guides by date with most recent first -->





<div id="end_of_guide">
        <h2 tabindex="0">Nice work! Where to next?</h2>
        <div id="end_of_guide_left_section">
            <p id="guide_attribution"></p>
            
            <h3 id="feedback_rating_question">What did you think of this guide?</h3>
            <div id="feedback_ratings">
                <img class="guide_rating" id="extreme_dislike" src="/img/1_Extreme_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Extreme Dislike" data-guide-rating="1" tabindex="0" aria-label="Rate this guide as extreme dislike">
                <img class="guide_rating" id="dislike" src="/img/2_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Dislike" data-guide-rating="2" tabindex="0" aria-label="Rate this guide as dislike">
                <img class="guide_rating" id="like" src="/img/3_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Like" data-guide-rating="3" tabindex="0" aria-label="Rate this guide as like">
                <img class="guide_rating" id="extreme_like" src="/img/4_Extreme_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Extreme Like" data-guide-rating="4" tabindex="0" aria-label="Rate this guide as extreme like">
            </div>

            <div id="like_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <button id="close_button" class="popup_button" onclick="$('#like_popup').hide();">Close</button>
                </div>
            </div>

            <div id="dislike_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <p id="open_issue">Would you like to open an issue in GitHub?</p>
                    
                        <a href="https://github.com/OpenLiberty/guide-microprofile-graphql/issues/new" target="_blank" id="yes_button" class="popup_button" onclick="$('#dislike_popup').hide();" rel="noopener noreferrer">Yes</a>
                    
                    <button id="no_button" class="popup_button" onclick="$('#dislike_popup').hide();">No, thank you</button>
                </div>
            </div>

            <h3 id="improve_guide_feedback">What could make this guide better?</h3>
            
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-microprofile-graphql/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-microprofile-graphql/pulls">Create a pull request</a> to contribute to this guide</p>
            

            <h3 id="need_help">Need help?</h3>
            <p><a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/open-liberty">Ask a question on Stack Overflow</a></p>

            <h3>Like Open Liberty? Star our repo on GitHub.</h3>
            <a class="github-button" href="https://github.com/OpenLiberty/open-liberty" data-icon="octicon-star" aria-label="Star OpenLiberty/open-liberty on GitHub" target="_blank" rel="noopener noreferrer">Star</a>
        </div>
        <div id="end_of_guide_right_section">
            <h3 id="where_to_next">Where to next?</h3>

            
            

            <!-- Related guides section -->
            
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/rest-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Creating a RESTful web service</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">30 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/graphql-client.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Running GraphQL queries and mutations using a GraphQL client</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">20 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/jpa-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Accessing and persisting data in microservices using Java Persistence API (JPA)</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">20 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/mongodb-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Persisting data with MongoDB</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">25 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                </div>
            </div>
            
        </div>
    </div>



    </main>

    



<footer>
    <div id="footer_gray_background">
        <div id="footer_top_container" class="footer_container container-fluid">
            <div id="footer_project_container">
                <span id="footer_open_liberty"></span>
                <p id="footer_project">IBM 开放式源代码项目</p>
            </div>
            <div id="footer_round_links_container">
                <a id="footer_github_link" class="footer_round_btn" href="https://github.com/OpenLiberty/" target="_blank" rel="noopener noreferrer" aria-label="Github"></a>
                <a id="footer_twitter_link" class="footer_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="footer_stackoverflow_link" class="footer_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="footer_groupsio_link" class="footer_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="footer_gitter_link" class="footer_round_btn" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>         
    </div>

    <div id="footer_bottom_container" class="footer_container container-fluid">
        <div id="footer_bottom_left_section">
            <p id="footer_copyright">© Copyright IBM Corp. 2017, 2023</p>
            <p class="vertical_bar">|</p>
            <a id="footer_privacy_policy_link" href="https://www.ibm.com/privacy/" target="_blank" rel="noopener noreferrer" class="left_footer_link">隐私策略</a>
            <p class="vertical_bar">|</p>
            <a id="footer_license_link" href="https://github.com/OpenLiberty/open-liberty/blob/release/LICENSE" target="_blank" rel="noopener noreferrer" class="left_footer_link">许可证</a>
            <p class="vertical_bar">|</p>
            <a id="footer_logos_link" href="https://github.com/OpenLiberty/logos" target="_blank" rel="noopener noreferrer" class="left_footer_link">洛戈斯</a>
        </div>
        <div id="footer_bottom_right_section">
            <a id="footer_docs_link" href="/docs" aria-label="Open Liberty Docs" class="right_footer_link blue_link_light_background">文档</a>
            <a id="footer_blog_link" href="/blog" aria-label="Open Liberty Blog" class="right_footer_link blue_link_light_background">博客</a>
            <a id="footer_support_link" href="/support" aria-label="Open Liberty Support" class="right_footer_link blue_link_light_background">支持</a>
        </div>
    </div>
</footer>

<!-- PRE-LOADED IMAGES FOR ON HOVER BEHAVIOR -->
<div class="d-none hidden">
    <img src="/img/Footer_GitCat_Hover.svg" alt="OpenLiberty Github link">
    <img src="/img/Footer_TwitterBird_Hover.svg" alt="OpenLibertyIO Twitter link">
    <img src="/img/Footer_StackO_Hover.svg" alt="Open-liberty Stack Overflow link">
    <img src="/img/Footer_GroupsIO_Hover.svg" alt="Openliberty Groups IO link">
    <img src="/img/footer_gitter_hover.svg" alt="Openliberty Gitter link">
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha512-lzilC+JFd6YV8+vQRNRtU7DOqv5Sa9Ek53lXt/k91HZTJpytHS1L6l1mMKR9K6VVoDt4LiEXaa6XBrYk1YhGTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>


<script type="text/javascript" src="/zh-Hans/assets/devEnvironment.js"></script>




  <script type="text/javascript" src="/zh-Hans/assets/guide-common.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/toc.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/tabs.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-static.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-multipane-static.js"></script>


<script type="text/javascript" src="/zh-Hans/assets/openliberty.js"></script>

  </body>

</html>
