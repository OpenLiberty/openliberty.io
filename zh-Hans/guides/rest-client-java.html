<!DOCTYPE html>
<html lang="zh-Hans">

  





<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Consuming a RESTful Java web service
    
  </title>
  <meta name="description" content="A getting started tutorial with examples on how to access a RESTful Java microservice and consume its resources using the Java API for JSON Binding (JSON-B) and the Java API for JSON Processing (JSON-P).">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/openliberty.css">
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/coderay-custom.css">

  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header-dark.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/toc-multipane-static.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/end-of-guide.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-card.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/tabs.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-common.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane-static.css">
  

  

  

  <link rel="canonical" href="https://openliberty.io/zh-Hans/guides/rest-client-java">
  <link rel="alternate" type="application/rss+xml" title="Open Liberty" href="/zh-Hans/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Asap:400,500" rel="stylesheet">
    
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@OpenLibertyIO" />
  <meta name="twitter:title" content="Consuming a RESTful Java web service" />
  <meta name="twitter:description" content="A getting started tutorial with examples on how to access a RESTful Java microservice and consume its resources using the Java API for JSON Binding (JSON-B) and the Java API for JSON Processing (JSON-P)." />

  <meta property='og:title' content="Consuming a RESTful Java web service" />
  <meta property='og:image' content="https://openliberty.io/img/twitter_card.jpg" />
  <meta property='og:image:alt' content="Open Liberty Logo" />
  <meta property='og:description' content="A getting started tutorial with examples on how to access a RESTful Java microservice and consume its resources using the Java API for JSON Binding (JSON-B) and the Java API for JSON Processing (JSON-P)." />
  <meta property='og:url' content="https://openliberty.io/zh-Hans/guides/rest-client-java" />
  <meta property='og:type' content="website" />
  
  <meta name="google-site-verification" content="h2P030H9b66CyL1nEmWfrZB8Fr14h9LmVMG7Ur0caBs" />

  
      <meta name="robots" content="noindex" />
  

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>


  <body>
    
    

    


<!--  -->

<header>
    <nav id="nav_bar">
        <div id="nav_header">
            <a id="home_link" href="/" aria-label="Open Liberty Home">
                <img id="ol_logo" src="/img/docs_openliberty_logo.png" alt="Open Liberty Logo">
            </a>
            <button id="hamburger_toggle_button" onclick="$('#nav_bar').toggleClass('responsive');">
                <span id="hamburger_toggle_icon"></span>
            </button>
        </div>
        <div id="hamburger_menu">
            <ul class="nav_list">
                <li class="nav_link">
                    <a href="/start/">入门</a>
                </li>
                <li class="nav_link">
                    <a href="/guides/">指南</a>
                </li>
                <li class="nav_link">
                    <a href="/docs/">文档</a>
                </li>
                <li class="nav_link">
                    <a href="/support/">支持</a>
                </li>
                <li class="nav_link">
                    <a href="/blog/">博客</a>
                </li>
            </ul>
            <div id="header_round_links_container"> 
                <a id="header_twitter_link" class="header_round_button" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="header_stackoverflow_link" class="header_round_button" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="header_groupsio_link" class="header_round_button" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="header_gitter_link" class="header_round_button" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>

    </nav>
</header>


    <main aria-label="Content">

      <!-- Build a list of all the documents in the guides code base -->
  
 

<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->
<!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
 

<!-- Sort list of guides by date with most recent first -->


<div id="background_container">
  <div id="toc_hotspot"></div>
  <!-- Guide's table of contents section -->
  <div id="toc_column" class="collapse inline open">
    <div id="toc_inner">
       
      <div id="close_container">
        <img id="toc_close_white" src="/img/toc_close_white.svg" alt="Close the table of contents" tabindex="0">
      </div>
      <h3 id="toc_title">Contents</h3>
      <div id="toc_container"><ul class="sectlevel1">
<li><a href="#what-youll-learn">What you’ll learn</a></li>
<li>
<a href="#getting-started">Getting started</a>
<ul class="sectlevel2">
<li><a href="#try-what-youll-build">Try what you’ll build</a></li>
</ul>
</li>
<li><a href="#starting-the-service">Starting the service</a></li>
<li><a href="#creating-pojos">Creating POJOs</a></li>
<li>
<a href="#introducing-json-b-and-json-p">Introducing JSON-B and JSON-P</a>
<ul class="sectlevel2">
<li><a href="#using-json-b">Using JSON-B</a></li>
</ul>
</li>
<li>
<a href="#consuming-the-rest-resource">Consuming the REST resource</a>
<ul class="sectlevel2">
<li><a href="#processing-json-using-json-b">Processing JSON using JSON-B</a></li>
<li><a href="#processing-json-using-json-p">Processing JSON using JSON-P</a></li>
</ul>
</li>
<li><a href="#creating-additional-rest-resources">Creating additional REST resources</a></li>
<li><a href="#running-the-application">Running the application</a></li>
<li>
<a href="#testing-deserialization">Testing deserialization</a>
<ul class="sectlevel2">
<li><a href="#testing-the-binding-process">Testing the binding process</a></li>
<li><a href="#processing-with-json-b-test">Processing with JSON-B test</a></li>
<li><a href="#processing-with-json-p-test">Processing with JSON-P test</a></li>
<li><a href="#running-the-tests">Running the tests</a></li>
</ul>
</li>
<li><a href="#building-the-application">Building the application</a></li>
<li><a href="#great-work-youre-done">Great work! You’re done!</a></li>
<li><a href="#guide-attribution">Guide Attribution</a></li>
</ul></div>
      <div id="toc_separator"></div>
      
      <h3 id="tag_title">标签</h3>
      <div id="tags_container"></div>
    </div>
  </div>
  <div id="toc_indicator" tabindex="0" aria-label="Open the table of contents" class="hidden">
    <img src="/img/arrow_white.svg" alt="arrow">
  </div>
  <div id="toc_line" class="open"></div>
  <!-- Entire guide section -->
  <div id="guide_column" class="position_relative open">
    <div id="guide_content">
      <!-- Guide header section -->
      <div id="guide_meta" class="sect1" tabindex="0">
        <h1 id="guide_title">Consuming a RESTful web service</h1>
        <div id="duration_container">
          <img src="/img/guide_duration_clock_icon_large.svg" alt="duration">
          <span id="guide_duration">25 minutes</span>

          <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
          <!-- If new posts count is less than 4, use 4 most recent posts -->
           
          <!-- If new posts count is >= 4, use posts from last 30 days-->
          
          <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
          <!-- Count number of guides from past last 12 weeks that is 84 days-->
          <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
          
        </div>
        <div id="mobile_prereqs_section">
          <p id="mobile_prereqs_title">Prerequisites:</p>
          <div class="prereqs_list"></div>
          <div class="skills_network_container">
            <div class="skills_network_description"></div>
          </div>
        </div>
      </div>

      <div class="scroller_anchor"></div>
      <div id="mobile_toc_accordion_container" data-toggle="collapse" data-target="#toc_column" aria-expanded="false" aria-controls="toc_column" role="button">
        <div role="menuitem" id="mobile_toc_accordion">
          <button class="breadcrumb_hamburger toc-toggle collapsed" type="button" tabindex="0">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <img src="/img/toc_close_green.svg" class="TOC_Close_SVG hidden img-responsive" alt="Table of contents close button">
          </button>
          <span>Table of contents</span>
        </div>
      </div>

      <!-- Guide content section -->
      <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note hidden">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This repository contains the guide documentation source. To view the guide in published form, view it on the <a href="https://openliberty.io/guides/rest-client-java.html">Open Liberty website</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explore how to access a simple RESTful web service and consume its resources in Java using JSON-B and JSON-P.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-youll-learn">What you’ll learn</h2>
<div class="sectionbody">
<div class="paragraph">
<p>artists.json</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="line-numbers"> 1</span>[
<span class="line-numbers"> 2</span>    {
<span class="line-numbers"> 3</span>        <span class="key"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>,
<span class="line-numbers"> 4</span>        <span class="key"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span> : [
<span class="line-numbers"> 5</span>            {
<span class="line-numbers"> 6</span>                <span class="key"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">album_one</span><span class="delimiter">"</span></span>,
<span class="line-numbers"> 7</span>                <span class="key"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>,
<span class="line-numbers"> 8</span>                <span class="key"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span> : <span class="integer">12</span>
<span class="line-numbers"> 9</span>            },
<span class="line-numbers">10</span>            {
<span class="line-numbers">11</span>                <span class="key"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">album_two</span><span class="delimiter">"</span></span>,
<span class="line-numbers">12</span>                <span class="key"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>,
<span class="line-numbers">13</span>                <span class="key"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span> : <span class="integer">15</span>
<span class="line-numbers">14</span>            }
<span class="line-numbers">15</span>        ]
<span class="line-numbers">16</span>    }, 
<span class="line-numbers">17</span>    {
<span class="line-numbers">18</span>        <span class="key"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">bar</span><span class="delimiter">"</span></span>,
<span class="line-numbers">19</span>        <span class="key"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span> : [
<span class="line-numbers">20</span>            {
<span class="line-numbers">21</span>                <span class="key"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">foo walks into a bar</span><span class="delimiter">"</span></span>,
<span class="line-numbers">22</span>                <span class="key"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">bar</span><span class="delimiter">"</span></span>,
<span class="line-numbers">23</span>                <span class="key"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span> : <span class="integer">12</span>
<span class="line-numbers">24</span>            }
<span class="line-numbers">25</span>        ]
<span class="line-numbers">26</span>    }, 
<span class="line-numbers">27</span>    {
<span class="line-numbers">28</span>        <span class="key"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span> : <span class="string"><span class="delimiter">"</span><span class="content">dj</span><span class="delimiter">"</span></span>,
<span class="line-numbers">29</span>        <span class="key"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span> : [
<span class="line-numbers">30</span>        ]
<span class="line-numbers">31</span>    }
<span class="line-numbers">32</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will learn how to access a REST service, serialize a Java object that contains a list of artists and their albums, and use two different approaches to deserialize the returned JSON resources. The first approach consists of using the Java API for JSON Binding (JSON-B) to directly convert JSON messages into Java objects. The second approach consists of using the Java API for JSON Processing (JSON-P) to process the JSON.</p>
</div>
<div class="paragraph">
<p>The REST service that provides the artists and albums resources is already written for you. When the Liberty is running, this service is accessible at the <code>http://localhost:9080/artists</code> endpoint, which responds with the <code class="hotspot">artists.json</code> file.</p>
</div>
<div class="paragraph">
<p>You will implement the following two endpoints using the two deserialization approaches:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>…​/artists/total</code> to return the total number of artists in the JSON</p>
</li>
<li>
<p><code>…​/artists/total/&lt;artist&gt;</code> to return the total number of albums in the JSON
for the particular artist</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are interested in learning more about REST services and how you can write them, read <a href="https://openliberty.io/guides/rest-intro.html" target="_blank" rel="noopener">Creating a RESTful web service</a>.</p>
</div>
</div>
</div>
<div class="sect1 command">
<h2 id="getting-started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fastest way to work through this guide is to clone the <a href="https://github.com/openliberty/guide-rest-client-java.git" target="_blank" rel="noopener noreferrer">Git repository</a> and use the projects that are provided inside:</p>
</div>
<div id="git_clone" class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>git clone https://github.com/openliberty/guide-rest-client-java.git
cd guide-rest-client-java</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>start</code> directory contains the starting project that you will build upon.</p>
</div>
<div class="paragraph">
<p>The <code>finish</code> directory contains the finished project that you will build.</p>
</div>
<div class="paragraph">
<p>Before you begin, make sure you have all the necessary <span class="prerequisites">prerequisites</span>.</p>
</div>
<div class="sect2 command">
<h3 id="try-what-youll-build">Try what you’ll build</h3>
<div class="paragraph">
<p>The <code>finish</code> directory in the root of this guide contains the finished application. Give it a try before you proceed.</p>
</div>
<div class="paragraph">
<p>To try out the application, first go to the <code>finish</code> directory and run the following Maven goal to build the application and deploy it to Open Liberty:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>cd finish
mvn liberty:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you see the following message, your Liberty instance is ready:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>The defaultServer server is ready to run a smarter planet.</pre>
</div>
</div>
<div class="paragraph">
<p>You can find your service at the <a href="http://localhost:9080/artists" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/artists</a> endpoint.</p>
</div>
<div class="paragraph">
<p>Now, you can access the endpoint at <a href="http://localhost:9080/artists/total" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/artists/total</a> to see the total number of artists, and you can access the endpoint at <code>http://localhost:9080/artists/total/&lt;artist&gt;</code> to see a particular artist’s total number of albums.</p>
</div>
<div class="paragraph command">
<p>After you are finished checking out the application, stop the Liberty instance by pressing <code>CTRL+C</code> in the command-line session where you ran Liberty. Alternatively, you can run the <code>liberty:stop</code> goal from the <code>finish</code> directory in another shell session:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn liberty:stop</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-the-service">Starting the service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to the <code>start</code> directory to begin.</p>
</div>
<div class="paragraph command">
<p>When you run Open Liberty in <a href="https://openliberty.io/docs/latest/development-mode.html" target="_blank" rel="noopener">dev mode</a>, dev mode listens for file changes and automatically recompiles and deploys your updates whenever you save a new change. Run the following goal to start Open Liberty in dev mode:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn liberty:dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you see the following message, your Liberty instance is ready in dev mode:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>**************************************************************
*    Liberty is running in dev mode.</pre>
</div>
</div>
<div class="paragraph">
<p>Dev mode holds your command-line session to listen for file changes. Open another command-line session to continue, or open the project in your editor.</p>
</div>
<div class="paragraph">
<p>The application that you’ll build upon was created for you. After your Liberty instance is ready, you can access the service at the <a href="http://localhost:9080/artists" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/artists</a> URL.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-pojos">Creating POJOs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Artist.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest.model</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbCreator</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbProperty</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbTransient</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="comment">// tag::Artist[]</span>
<span class="line-numbers">19</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Artist</span> {
<span class="line-numbers">20</span>    <span class="comment">// tag::name[]</span>
<span class="line-numbers">21</span>    <span class="directive">public</span> <span class="predefined-type">String</span> name;
<span class="line-numbers">22</span>    <span class="comment">// end::name[]</span>
<span class="line-numbers">23</span>    <span class="comment">// tag::Albums[]</span>
<span class="line-numbers">24</span>    <span class="directive">public</span> Album<span class="type">[]</span> albums;
<span class="line-numbers">25</span>    <span class="comment">// end::Albums[]</span>
<span class="line-numbers">26</span>    <span class="comment">// Object property that does not map to a JSON</span>
<span class="line-numbers">27</span>    <span class="comment">// tag::JsonbTransient[]</span>
<span class="line-numbers">28</span>    <span class="annotation">@JsonbTransient</span>
<span class="line-numbers">29</span>    <span class="comment">// end::JsonbTransient[]</span>
<span class="line-numbers">30</span>    <span class="directive">public</span> <span class="type">boolean</span> legendary = <span class="predefined-constant">true</span>;
<span class="line-numbers">31</span>
<span class="line-numbers">32</span>    <span class="directive">public</span> Artist() {
<span class="line-numbers">33</span>
<span class="line-numbers">34</span>    }
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="comment">// tag::JsonbCreator[]</span>
<span class="line-numbers">37</span>    <span class="annotation">@JsonbCreator</span>
<span class="line-numbers">38</span>    <span class="comment">// end::JsonbCreator[]</span>
<span class="line-numbers">39</span>    <span class="directive">public</span> Artist(
<span class="line-numbers">40</span>      <span class="comment">// tag::JsonbProperty[]</span>
<span class="line-numbers">41</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> name,
<span class="line-numbers">42</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span>) Album<span class="type">[]</span> albums) {
<span class="line-numbers">43</span>      <span class="comment">// end::JsonbProperty[]</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>      <span class="local-variable">this</span>.name = name;
<span class="line-numbers">46</span>      <span class="local-variable">this</span>.albums = albums;
<span class="line-numbers">47</span>    }
<span class="line-numbers">48</span>
<span class="line-numbers">49</span>    <span class="annotation">@Override</span>
<span class="line-numbers">50</span>    <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
<span class="line-numbers">51</span>      <span class="keyword">return</span> name + <span class="string"><span class="delimiter">"</span><span class="content"> wrote </span><span class="delimiter">"</span></span> + albums.length + <span class="string"><span class="delimiter">"</span><span class="content"> albums</span><span class="delimiter">"</span></span>;
<span class="line-numbers">52</span>    }
<span class="line-numbers">53</span>}
<span class="line-numbers">54</span><span class="comment">// end::Artist[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Album.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest.model</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbCreator</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbProperty</span>;
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="comment">// tag::Album[]</span>
<span class="line-numbers">18</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Album</span> {
<span class="line-numbers">19</span>    <span class="comment">// tag::title[]</span>
<span class="line-numbers">20</span>    <span class="directive">public</span> <span class="predefined-type">String</span> title;
<span class="line-numbers">21</span>    <span class="comment">// end::title[]</span>
<span class="line-numbers">22</span>
<span class="line-numbers">23</span>    <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>)
<span class="line-numbers">24</span>    <span class="comment">// tag::artistName[]</span>
<span class="line-numbers">25</span>    <span class="directive">public</span> <span class="predefined-type">String</span> artistName;
<span class="line-numbers">26</span>    <span class="comment">// end::artistName[]</span>
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>    <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span>)
<span class="line-numbers">29</span>    <span class="comment">// tag::totalTracks[]</span>
<span class="line-numbers">30</span>    <span class="directive">public</span> <span class="type">int</span> totalTracks;
<span class="line-numbers">31</span>    <span class="comment">// end::totalTracks[]</span>
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="directive">public</span> Album() {
<span class="line-numbers">34</span>    }
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="annotation">@JsonbCreator</span>
<span class="line-numbers">37</span>    <span class="directive">public</span> Album(
<span class="line-numbers">38</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> title,
<span class="line-numbers">39</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> artistName,
<span class="line-numbers">40</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span>) <span class="type">int</span> totalTracks) {
<span class="line-numbers">41</span>
<span class="line-numbers">42</span>      <span class="local-variable">this</span>.title = title;
<span class="line-numbers">43</span>      <span class="local-variable">this</span>.artistName = artistName;
<span class="line-numbers">44</span>      <span class="local-variable">this</span>.totalTracks = totalTracks;
<span class="line-numbers">45</span>    }
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>    <span class="annotation">@Override</span>
<span class="line-numbers">48</span>    <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
<span class="line-numbers">49</span>      <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">Album titled </span><span class="delimiter">"</span></span> + title + <span class="string"><span class="delimiter">"</span><span class="content"> by </span><span class="delimiter">"</span></span> + artistName
<span class="line-numbers">50</span>                             + <span class="string"><span class="delimiter">"</span><span class="content"> contains </span><span class="delimiter">"</span></span> + totalTracks + <span class="string"><span class="delimiter">"</span><span class="content"> tracks</span><span class="delimiter">"</span></span>;
<span class="line-numbers">51</span>    }
<span class="line-numbers">52</span>}
<span class="line-numbers">53</span><span class="comment">// end::Album[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To deserialize a JSON message, start with creating Plain Old Java Objects (POJOs) that represent what is in the JSON and whose instance members map to the keys in the JSON.</p>
</div>
<div class="paragraph">
<p>For the purpose of this guide, you are given two POJOs. The <code class="hotspot=Artist file=0">Artist</code> object has two instance members <code class="hotspot=name file=0">name</code> and <code class="hotspot=Albums file=0">albums</code>, which map to the artist name and the collection of the albums they have written. The <code class="hotspot=Album file=1">Album</code> object represents a single object within the album collection, and contains three instance members <code class="hotspot=title file=1">title</code>, <code class="hotspot=artistName file=1">artistName</code>, and <code class="hotspot=totalTracks file=1">totalTracks</code>, which map to the album title, the artist who wrote the album, and the number of tracks the album contains.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introducing-json-b-and-json-p">Introducing JSON-B and JSON-P</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JSON-B is a feature introduced with Java EE 8 and strengthens Java support for JSON. With JSON-B you directly serialize and deserialize POJOs. This API gives you a variety of options for working with JSON resources.</p>
</div>
<div class="paragraph">
<p>In contrast, you need to use helper methods with JSON-P to process a JSON response. This tactic is more straightforward, but it can be cumbersome with more complex classes.</p>
</div>
<div class="paragraph">
<p>JSON-B is built on top of the existing JSON-P API. JSON-B can do everything that JSON-P can do and allows for more customization for serializing and deserializing.</p>
</div>
<div class="sect2">
<h3 id="using-json-b">Using JSON-B</h3>
<div class="paragraph">
<p>Artist.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest.model</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbCreator</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbProperty</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbTransient</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="comment">// tag::Artist[]</span>
<span class="line-numbers">19</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Artist</span> {
<span class="line-numbers">20</span>    <span class="comment">// tag::name[]</span>
<span class="line-numbers">21</span>    <span class="directive">public</span> <span class="predefined-type">String</span> name;
<span class="line-numbers">22</span>    <span class="comment">// end::name[]</span>
<span class="line-numbers">23</span>    <span class="comment">// tag::Albums[]</span>
<span class="line-numbers">24</span>    <span class="directive">public</span> Album<span class="type">[]</span> albums;
<span class="line-numbers">25</span>    <span class="comment">// end::Albums[]</span>
<span class="line-numbers">26</span>    <span class="comment">// Object property that does not map to a JSON</span>
<span class="line-numbers">27</span>    <span class="comment">// tag::JsonbTransient[]</span>
<span class="line-numbers">28</span>    <span class="annotation">@JsonbTransient</span>
<span class="line-numbers">29</span>    <span class="comment">// end::JsonbTransient[]</span>
<span class="line-numbers">30</span>    <span class="directive">public</span> <span class="type">boolean</span> legendary = <span class="predefined-constant">true</span>;
<span class="line-numbers">31</span>
<span class="line-numbers">32</span>    <span class="directive">public</span> Artist() {
<span class="line-numbers">33</span>
<span class="line-numbers">34</span>    }
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="comment">// tag::JsonbCreator[]</span>
<span class="line-numbers">37</span>    <span class="annotation">@JsonbCreator</span>
<span class="line-numbers">38</span>    <span class="comment">// end::JsonbCreator[]</span>
<span class="line-numbers">39</span>    <span class="directive">public</span> Artist(
<span class="line-numbers">40</span>      <span class="comment">// tag::JsonbProperty[]</span>
<span class="line-numbers">41</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> name,
<span class="line-numbers">42</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span>) Album<span class="type">[]</span> albums) {
<span class="line-numbers">43</span>      <span class="comment">// end::JsonbProperty[]</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>      <span class="local-variable">this</span>.name = name;
<span class="line-numbers">46</span>      <span class="local-variable">this</span>.albums = albums;
<span class="line-numbers">47</span>    }
<span class="line-numbers">48</span>
<span class="line-numbers">49</span>    <span class="annotation">@Override</span>
<span class="line-numbers">50</span>    <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
<span class="line-numbers">51</span>      <span class="keyword">return</span> name + <span class="string"><span class="delimiter">"</span><span class="content"> wrote </span><span class="delimiter">"</span></span> + albums.length + <span class="string"><span class="delimiter">"</span><span class="content"> albums</span><span class="delimiter">"</span></span>;
<span class="line-numbers">52</span>    }
<span class="line-numbers">53</span>}
<span class="line-numbers">54</span><span class="comment">// end::Artist[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>JSON-B requires a POJO to have a public default no-argument constructor for deserialization and binding to work properly.</p>
</div>
<div class="paragraph">
<p>The JSON-B engine includes a set of default mapping rules, which can be run without any customization annotations or custom configuration. In some instances, you might find it useful to deserialize a JSON message with only certain fields, specific field names, or classes with custom constructors. In these cases, annotations are necessary and recommended:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code class="hotspot=JsonbProperty">@JsonbProperty</code> annotation to map JSON keys to class instance members and vice versa. Without the use of this annotation, JSON-B will attempt to do POJO mapping, matching the keys in the JSON to the class instance members by name. JSON-B will attempt to match the JSON key with a Java field or method annotated with <code>@JsonbProperty</code> where the value in the annotation exactly matches the JSON key. If no annotation exists with the given JSON key, JSON-B will attempt to find a matching field with the same name. If no match is found, JSON-B attempts to find a matching getter method for serialization or a matching setter method for de-serialization. A match occurs when the property name of the method matches the JSON key. If no matching getter or setter method is found, serialization or de-serialization, respectively, fails with an exception. The Artist POJO does not require this annotation because all instance members match the JSON keys by name.</p>
</li>
<li>
<p>The <code class="hotspot=JsonbCreator">@JsonbCreator</code> and <code class="hotspot=JsonbProperty">@JsonbProperty</code> annotations to annotate a custom constructor. These annotations are required for proper parameter substitution when a custom constructor is used.</p>
</li>
<li>
<p>The <code class="hotspot=JsonbTransient">@JsonbTransient</code> annotation to define an object property that does not map to a JSON property. While the use of this annotation is good practice, it is only necessary for serialization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on customization with JSON-B, see the <a href="https://javaee.github.io/jsonb-spec" target="_blank" rel="noopener noreferrer">official JSON-B site</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="consuming-the-rest-resource">Consuming the REST resource</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Artist.java</p>
</div>
<div class="listingblock code_column hide_tags=comment,copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest.model</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbCreator</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbProperty</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbTransient</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="comment">// tag::Artist[]</span>
<span class="line-numbers">19</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Artist</span> {
<span class="line-numbers">20</span>    <span class="comment">// tag::name[]</span>
<span class="line-numbers">21</span>    <span class="directive">public</span> <span class="predefined-type">String</span> name;
<span class="line-numbers">22</span>    <span class="comment">// end::name[]</span>
<span class="line-numbers">23</span>    <span class="comment">// tag::Albums[]</span>
<span class="line-numbers">24</span>    <span class="directive">public</span> Album<span class="type">[]</span> albums;
<span class="line-numbers">25</span>    <span class="comment">// end::Albums[]</span>
<span class="line-numbers">26</span>    <span class="comment">// Object property that does not map to a JSON</span>
<span class="line-numbers">27</span>    <span class="comment">// tag::JsonbTransient[]</span>
<span class="line-numbers">28</span>    <span class="annotation">@JsonbTransient</span>
<span class="line-numbers">29</span>    <span class="comment">// end::JsonbTransient[]</span>
<span class="line-numbers">30</span>    <span class="directive">public</span> <span class="type">boolean</span> legendary = <span class="predefined-constant">true</span>;
<span class="line-numbers">31</span>
<span class="line-numbers">32</span>    <span class="directive">public</span> Artist() {
<span class="line-numbers">33</span>
<span class="line-numbers">34</span>    }
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="comment">// tag::JsonbCreator[]</span>
<span class="line-numbers">37</span>    <span class="annotation">@JsonbCreator</span>
<span class="line-numbers">38</span>    <span class="comment">// end::JsonbCreator[]</span>
<span class="line-numbers">39</span>    <span class="directive">public</span> Artist(
<span class="line-numbers">40</span>      <span class="comment">// tag::JsonbProperty[]</span>
<span class="line-numbers">41</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> name,
<span class="line-numbers">42</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span>) Album<span class="type">[]</span> albums) {
<span class="line-numbers">43</span>      <span class="comment">// end::JsonbProperty[]</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>      <span class="local-variable">this</span>.name = name;
<span class="line-numbers">46</span>      <span class="local-variable">this</span>.albums = albums;
<span class="line-numbers">47</span>    }
<span class="line-numbers">48</span>
<span class="line-numbers">49</span>    <span class="annotation">@Override</span>
<span class="line-numbers">50</span>    <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
<span class="line-numbers">51</span>      <span class="keyword">return</span> name + <span class="string"><span class="delimiter">"</span><span class="content"> wrote </span><span class="delimiter">"</span></span> + albums.length + <span class="string"><span class="delimiter">"</span><span class="content"> albums</span><span class="delimiter">"</span></span>;
<span class="line-numbers">52</span>    }
<span class="line-numbers">53</span>}
<span class="line-numbers">54</span><span class="comment">// end::Artist[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Album.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest.model</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbCreator</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.annotation.JsonbProperty</span>;
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="comment">// tag::Album[]</span>
<span class="line-numbers">18</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Album</span> {
<span class="line-numbers">19</span>    <span class="comment">// tag::title[]</span>
<span class="line-numbers">20</span>    <span class="directive">public</span> <span class="predefined-type">String</span> title;
<span class="line-numbers">21</span>    <span class="comment">// end::title[]</span>
<span class="line-numbers">22</span>
<span class="line-numbers">23</span>    <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>)
<span class="line-numbers">24</span>    <span class="comment">// tag::artistName[]</span>
<span class="line-numbers">25</span>    <span class="directive">public</span> <span class="predefined-type">String</span> artistName;
<span class="line-numbers">26</span>    <span class="comment">// end::artistName[]</span>
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>    <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span>)
<span class="line-numbers">29</span>    <span class="comment">// tag::totalTracks[]</span>
<span class="line-numbers">30</span>    <span class="directive">public</span> <span class="type">int</span> totalTracks;
<span class="line-numbers">31</span>    <span class="comment">// end::totalTracks[]</span>
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="directive">public</span> Album() {
<span class="line-numbers">34</span>    }
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="annotation">@JsonbCreator</span>
<span class="line-numbers">37</span>    <span class="directive">public</span> Album(
<span class="line-numbers">38</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> title,
<span class="line-numbers">39</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> artistName,
<span class="line-numbers">40</span>      <span class="annotation">@JsonbProperty</span>(<span class="string"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span>) <span class="type">int</span> totalTracks) {
<span class="line-numbers">41</span>
<span class="line-numbers">42</span>      <span class="local-variable">this</span>.title = title;
<span class="line-numbers">43</span>      <span class="local-variable">this</span>.artistName = artistName;
<span class="line-numbers">44</span>      <span class="local-variable">this</span>.totalTracks = totalTracks;
<span class="line-numbers">45</span>    }
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>    <span class="annotation">@Override</span>
<span class="line-numbers">48</span>    <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
<span class="line-numbers">49</span>      <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">Album titled </span><span class="delimiter">"</span></span> + title + <span class="string"><span class="delimiter">"</span><span class="content"> by </span><span class="delimiter">"</span></span> + artistName
<span class="line-numbers">50</span>                             + <span class="string"><span class="delimiter">"</span><span class="content"> contains </span><span class="delimiter">"</span></span> + totalTracks + <span class="string"><span class="delimiter">"</span><span class="content"> tracks</span><span class="delimiter">"</span></span>;
<span class="line-numbers">51</span>    }
<span class="line-numbers">52</span>}
<span class="line-numbers">53</span><span class="comment">// end::Album[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=Artist file=0">Artist</code> and <code class="hotspot=Album file=1">Album</code> POJOs are ready for deserialization.
Next, we’ll learn to consume the JSON response from your REST service.</p>
</div>
<div class="listingblock code_command hotspot file=2">
<div class="content">
<pre><mark>Create the <code>Consumer</code> class.</mark>
<code>src/main/java/io/openliberty/guides/consumingrest/Consumer.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consumer.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">java.util.stream.Collectors</span>;
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonArray</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonObject</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers">22</span>
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Album</span>;
<span class="line-numbers">24</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers">25</span>
<span class="line-numbers">26</span><span class="comment">// tag::Consumer[]</span>
<span class="line-numbers">27</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Consumer</span> {
<span class="line-numbers">28</span>    <span class="comment">// tag::consumeWithJsonb[]</span>
<span class="line-numbers">29</span>    <span class="directive">public</span> <span class="directive">static</span> Artist<span class="type">[]</span> consumeWithJsonb(<span class="predefined-type">String</span> targetUrl) {
<span class="line-numbers">30</span>      Client client = ClientBuilder.newClient();
<span class="line-numbers">31</span>      <span class="comment">// tag::get-1[]</span>
<span class="line-numbers">32</span>      Response response = client.target(targetUrl).request().get();
<span class="line-numbers">33</span>      <span class="comment">// end::get-1[]</span>
<span class="line-numbers">34</span>      <span class="comment">// tag::readEntity[]</span>
<span class="line-numbers">35</span>      Artist<span class="type">[]</span> artists = response.readEntity(Artist<span class="type">[]</span>.class);
<span class="line-numbers">36</span>      <span class="comment">// end::readEntity[]</span>
<span class="line-numbers">37</span>
<span class="line-numbers">38</span>      response.close();
<span class="line-numbers">39</span>      client.close();
<span class="line-numbers">40</span>
<span class="line-numbers">41</span>      <span class="keyword">return</span> artists;
<span class="line-numbers">42</span>    }
<span class="line-numbers">43</span>    <span class="comment">// end::consumeWithJsonb[]</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>    <span class="comment">// tag::consumeWithJsonp[]</span>
<span class="line-numbers">46</span>    <span class="directive">public</span> <span class="directive">static</span> Artist<span class="type">[]</span> consumeWithJsonp(<span class="predefined-type">String</span> targetUrl) {
<span class="line-numbers">47</span>      Client client = ClientBuilder.newClient();
<span class="line-numbers">48</span>      <span class="comment">// tag::get-2[]</span>
<span class="line-numbers">49</span>      Response response = client.target(targetUrl).request().get();
<span class="line-numbers">50</span>      <span class="comment">// end::get-2[]</span>
<span class="line-numbers">51</span>      JsonArray arr = response.readEntity(JsonArray.class);
<span class="line-numbers">52</span>
<span class="line-numbers">53</span>      response.close();
<span class="line-numbers">54</span>      client.close();
<span class="line-numbers">55</span>
<span class="line-numbers">56</span>      <span class="keyword">return</span> Consumer.collectArtists(arr);
<span class="line-numbers">57</span>    }
<span class="line-numbers">58</span>    <span class="comment">// end::consumeWithJsonp[]</span>
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>    <span class="comment">// tag::collectArtists[]</span>
<span class="line-numbers">61</span>    <span class="directive">private</span> <span class="directive">static</span> Artist<span class="type">[]</span> collectArtists(JsonArray artistArr) {
<span class="line-numbers">62</span>      <span class="predefined-type">List</span>&lt;Artist&gt; artists = artistArr.stream().map(artistJson -&gt; {
<span class="line-numbers">63</span>        JsonArray albumArr = ((JsonObject) artistJson).getJsonArray(<span class="string"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span>);
<span class="line-numbers">64</span>        Artist artist = <span class="keyword">new</span> Artist(
<span class="line-numbers">65</span>          ((JsonObject) artistJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>),
<span class="line-numbers">66</span>          Consumer.collectAlbums(albumArr));
<span class="line-numbers">67</span>        <span class="keyword">return</span> artist;
<span class="line-numbers">68</span>      }).collect(Collectors.toList());
<span class="line-numbers">69</span>
<span class="line-numbers">70</span>      <span class="keyword">return</span> artists.toArray(<span class="keyword">new</span> Artist[artists.size()]);
<span class="line-numbers">71</span>    }
<span class="line-numbers">72</span>    <span class="comment">// end::collectArtists[]</span>
<span class="line-numbers">73</span>
<span class="line-numbers">74</span>    <span class="comment">// tag::collectAlbums[]</span>
<span class="line-numbers">75</span>    <span class="directive">private</span> <span class="directive">static</span> Album<span class="type">[]</span> collectAlbums(JsonArray albumArr) {
<span class="line-numbers">76</span>      <span class="predefined-type">List</span>&lt;Album&gt; albums = albumArr.stream().map(albumJson -&gt; {
<span class="line-numbers">77</span>        Album album = <span class="keyword">new</span> Album(
<span class="line-numbers">78</span>          ((JsonObject) albumJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span>),
<span class="line-numbers">79</span>          ((JsonObject) albumJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>),
<span class="line-numbers">80</span>          ((JsonObject) albumJson).getInt(<span class="string"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span>));
<span class="line-numbers">81</span>        <span class="keyword">return</span> album;
<span class="line-numbers">82</span>      }).collect(Collectors.toList());
<span class="line-numbers">83</span>
<span class="line-numbers">84</span>      <span class="keyword">return</span> albums.toArray(<span class="keyword">new</span> Album[albums.size()]);
<span class="line-numbers">85</span>    }
<span class="line-numbers">86</span>    <span class="comment">// end::collectAlbums[]</span>
<span class="line-numbers">87</span>}
<span class="line-numbers">88</span><span class="comment">// end::Consumer[]</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="processing-json-using-json-b">Processing JSON using JSON-B</h3>
<div class="paragraph">
<p>Consumer.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">java.util.stream.Collectors</span>;
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonArray</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonObject</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers">22</span>
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Album</span>;
<span class="line-numbers">24</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers">25</span>
<span class="line-numbers">26</span><span class="comment">// tag::Consumer[]</span>
<span class="line-numbers">27</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Consumer</span> {
<span class="line-numbers">28</span>    <span class="comment">// tag::consumeWithJsonb[]</span>
<span class="line-numbers">29</span>    <span class="directive">public</span> <span class="directive">static</span> Artist<span class="type">[]</span> consumeWithJsonb(<span class="predefined-type">String</span> targetUrl) {
<span class="line-numbers">30</span>      Client client = ClientBuilder.newClient();
<span class="line-numbers">31</span>      <span class="comment">// tag::get-1[]</span>
<span class="line-numbers">32</span>      Response response = client.target(targetUrl).request().get();
<span class="line-numbers">33</span>      <span class="comment">// end::get-1[]</span>
<span class="line-numbers">34</span>      <span class="comment">// tag::readEntity[]</span>
<span class="line-numbers">35</span>      Artist<span class="type">[]</span> artists = response.readEntity(Artist<span class="type">[]</span>.class);
<span class="line-numbers">36</span>      <span class="comment">// end::readEntity[]</span>
<span class="line-numbers">37</span>
<span class="line-numbers">38</span>      response.close();
<span class="line-numbers">39</span>      client.close();
<span class="line-numbers">40</span>
<span class="line-numbers">41</span>      <span class="keyword">return</span> artists;
<span class="line-numbers">42</span>    }
<span class="line-numbers">43</span>    <span class="comment">// end::consumeWithJsonb[]</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>    <span class="comment">// tag::consumeWithJsonp[]</span>
<span class="line-numbers">46</span>    <span class="directive">public</span> <span class="directive">static</span> Artist<span class="type">[]</span> consumeWithJsonp(<span class="predefined-type">String</span> targetUrl) {
<span class="line-numbers">47</span>      Client client = ClientBuilder.newClient();
<span class="line-numbers">48</span>      <span class="comment">// tag::get-2[]</span>
<span class="line-numbers">49</span>      Response response = client.target(targetUrl).request().get();
<span class="line-numbers">50</span>      <span class="comment">// end::get-2[]</span>
<span class="line-numbers">51</span>      JsonArray arr = response.readEntity(JsonArray.class);
<span class="line-numbers">52</span>
<span class="line-numbers">53</span>      response.close();
<span class="line-numbers">54</span>      client.close();
<span class="line-numbers">55</span>
<span class="line-numbers">56</span>      <span class="keyword">return</span> Consumer.collectArtists(arr);
<span class="line-numbers">57</span>    }
<span class="line-numbers">58</span>    <span class="comment">// end::consumeWithJsonp[]</span>
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>    <span class="comment">// tag::collectArtists[]</span>
<span class="line-numbers">61</span>    <span class="directive">private</span> <span class="directive">static</span> Artist<span class="type">[]</span> collectArtists(JsonArray artistArr) {
<span class="line-numbers">62</span>      <span class="predefined-type">List</span>&lt;Artist&gt; artists = artistArr.stream().map(artistJson -&gt; {
<span class="line-numbers">63</span>        JsonArray albumArr = ((JsonObject) artistJson).getJsonArray(<span class="string"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span>);
<span class="line-numbers">64</span>        Artist artist = <span class="keyword">new</span> Artist(
<span class="line-numbers">65</span>          ((JsonObject) artistJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>),
<span class="line-numbers">66</span>          Consumer.collectAlbums(albumArr));
<span class="line-numbers">67</span>        <span class="keyword">return</span> artist;
<span class="line-numbers">68</span>      }).collect(Collectors.toList());
<span class="line-numbers">69</span>
<span class="line-numbers">70</span>      <span class="keyword">return</span> artists.toArray(<span class="keyword">new</span> Artist[artists.size()]);
<span class="line-numbers">71</span>    }
<span class="line-numbers">72</span>    <span class="comment">// end::collectArtists[]</span>
<span class="line-numbers">73</span>
<span class="line-numbers">74</span>    <span class="comment">// tag::collectAlbums[]</span>
<span class="line-numbers">75</span>    <span class="directive">private</span> <span class="directive">static</span> Album<span class="type">[]</span> collectAlbums(JsonArray albumArr) {
<span class="line-numbers">76</span>      <span class="predefined-type">List</span>&lt;Album&gt; albums = albumArr.stream().map(albumJson -&gt; {
<span class="line-numbers">77</span>        Album album = <span class="keyword">new</span> Album(
<span class="line-numbers">78</span>          ((JsonObject) albumJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span>),
<span class="line-numbers">79</span>          ((JsonObject) albumJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>),
<span class="line-numbers">80</span>          ((JsonObject) albumJson).getInt(<span class="string"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span>));
<span class="line-numbers">81</span>        <span class="keyword">return</span> album;
<span class="line-numbers">82</span>      }).collect(Collectors.toList());
<span class="line-numbers">83</span>
<span class="line-numbers">84</span>      <span class="keyword">return</span> albums.toArray(<span class="keyword">new</span> Album[albums.size()]);
<span class="line-numbers">85</span>    }
<span class="line-numbers">86</span>    <span class="comment">// end::collectAlbums[]</span>
<span class="line-numbers">87</span>}
<span class="line-numbers">88</span><span class="comment">// end::Consumer[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>pom.xml</p>
</div>
<div class="listingblock code_column hide_tags=comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers">  1</span><span class="preprocessor">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="line-numbers">  2</span><span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers">  3</span>
<span class="line-numbers">  4</span>    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
<span class="line-numbers">  5</span>
<span class="line-numbers">  6</span>    <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">  7</span>    <span class="tag">&lt;artifactId&gt;</span>guide-rest-client-java<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">  8</span>    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">  9</span>    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
<span class="line-numbers"> 10</span>
<span class="line-numbers"> 11</span>    <span class="tag">&lt;properties&gt;</span>
<span class="line-numbers"> 12</span>        <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
<span class="line-numbers"> 13</span>        <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
<span class="line-numbers"> 14</span>        <span class="tag">&lt;maven.compiler.source&gt;</span>11<span class="tag">&lt;/maven.compiler.source&gt;</span>
<span class="line-numbers"> 15</span>        <span class="tag">&lt;maven.compiler.target&gt;</span>11<span class="tag">&lt;/maven.compiler.target&gt;</span>
<span class="line-numbers"> 16</span>        <span class="comment">&lt;!-- Liberty configuration --&gt;</span>
<span class="line-numbers"> 17</span>        <span class="tag">&lt;liberty.var.default.http.port&gt;</span>9080<span class="tag">&lt;/liberty.var.default.http.port&gt;</span>
<span class="line-numbers"> 18</span>        <span class="tag">&lt;liberty.var.default.https.port&gt;</span>9443<span class="tag">&lt;/liberty.var.default.https.port&gt;</span>
<span class="line-numbers"> 19</span>    <span class="tag">&lt;/properties&gt;</span>
<span class="line-numbers"> 20</span>
<span class="line-numbers"> 21</span>    <span class="tag">&lt;dependencies&gt;</span>
<span class="line-numbers"> 22</span>        <span class="comment">&lt;!-- Provided dependencies --&gt;</span>
<span class="line-numbers"> 23</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 24</span>            <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 25</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 26</span>            <span class="tag">&lt;version&gt;</span>10.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 27</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 28</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 29</span>        <span class="comment">&lt;!-- tag::microprofile[] --&gt;</span>
<span class="line-numbers"> 30</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 31</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 32</span>            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 33</span>            <span class="tag">&lt;version&gt;</span>6.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 34</span>            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
<span class="line-numbers"> 35</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 36</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 37</span>        <span class="comment">&lt;!-- end::microprofile[] --&gt;</span>
<span class="line-numbers"> 38</span>        <span class="comment">&lt;!-- For tests --&gt;</span>
<span class="line-numbers"> 39</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 40</span>            <span class="tag">&lt;groupId&gt;</span>org.junit.jupiter<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 41</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 42</span>            <span class="tag">&lt;version&gt;</span>5.9.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 43</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 44</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 45</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 46</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 47</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 48</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 49</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 50</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 51</span>        <span class="comment">&lt;!-- JSON-P RI --&gt;</span>
<span class="line-numbers"> 52</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 53</span>            <span class="tag">&lt;groupId&gt;</span>org.glassfish<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 54</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.json<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 55</span>            <span class="tag">&lt;version&gt;</span>2.0.1<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 56</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 57</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 58</span>        <span class="comment">&lt;!-- JSON-B API --&gt;</span>
<span class="line-numbers"> 59</span>        <span class="comment">&lt;!-- tag::Yasson[] --&gt;</span>
<span class="line-numbers"> 60</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 61</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 62</span>            <span class="tag">&lt;artifactId&gt;</span>yasson<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 63</span>            <span class="tag">&lt;version&gt;</span>3.0.3<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 64</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 65</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 66</span>        <span class="comment">&lt;!-- end::Yasson[] --&gt;</span>
<span class="line-numbers"> 67</span>    <span class="tag">&lt;/dependencies&gt;</span>
<span class="line-numbers"> 68</span>
<span class="line-numbers"> 69</span>    <span class="tag">&lt;build&gt;</span>
<span class="line-numbers"> 70</span>        <span class="tag">&lt;finalName&gt;</span>${project.artifactId}<span class="tag">&lt;/finalName&gt;</span>
<span class="line-numbers"> 71</span>        <span class="tag">&lt;plugins&gt;</span>
<span class="line-numbers"> 72</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 73</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 74</span>                <span class="tag">&lt;artifactId&gt;</span>maven-war-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 75</span>                <span class="tag">&lt;version&gt;</span>3.3.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 76</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 77</span>            <span class="comment">&lt;!-- Plugin to run unit tests --&gt;</span>
<span class="line-numbers"> 78</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 79</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 80</span>                <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 81</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 82</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 83</span>            <span class="comment">&lt;!-- Enable liberty-maven plugin --&gt;</span>
<span class="line-numbers"> 84</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 85</span>                <span class="tag">&lt;groupId&gt;</span>io.openliberty.tools<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 86</span>                <span class="tag">&lt;artifactId&gt;</span>liberty-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 87</span>                <span class="tag">&lt;version&gt;</span>3.8.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 88</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 89</span>            <span class="comment">&lt;!-- Plugin to run functional tests --&gt;</span>
<span class="line-numbers"> 90</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 91</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 92</span>                <span class="tag">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 93</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 94</span>                <span class="tag">&lt;configuration&gt;</span>
<span class="line-numbers"> 95</span>                    <span class="tag">&lt;systemPropertyVariables&gt;</span>
<span class="line-numbers"> 96</span>                        <span class="tag">&lt;http.port&gt;</span>${liberty.var.default.http.port}<span class="tag">&lt;/http.port&gt;</span>
<span class="line-numbers"> 97</span>                    <span class="tag">&lt;/systemPropertyVariables&gt;</span>
<span class="line-numbers"> 98</span>                <span class="tag">&lt;/configuration&gt;</span>
<span class="line-numbers"> 99</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">100</span>        <span class="tag">&lt;/plugins&gt;</span>
<span class="line-numbers">101</span>    <span class="tag">&lt;/build&gt;</span>
<span class="line-numbers">102</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>JSON-B is a Java API that is used to serialize Java objects to JSON messages and vice versa.</p>
</div>
<div class="paragraph">
<p>Open Liberty’s JSON-B feature on Maven Central includes the JSON-B provider through transitive dependencies. The JSON-B APIs are provided by the MicroProfile dependency in your <code class="hotspot file=1">pom.xml</code> file. Look for the dependency with the <code class="hotspot=microprofile file=1">microprofile</code> artifact ID.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=consumeWithJsonb file=0">consumeWithJsonb()</code> method in the <code class="hotspot=Consumer file=0">Consumer</code> class makes a <code class="hotspot=get-1 file=0">GET</code> request to the running artist service and retrieves the JSON. To bind the JSON into an <code>Artist</code> array, use the <code class="hotspot=readEntity file=0">Artist[]</code> entity type in the <code class="hotspot=readEntity file=0">readEntity</code> call.</p>
</div>
</div>
<div class="sect2">
<h3 id="processing-json-using-json-p">Processing JSON using JSON-P</h3>
<div class="paragraph">
<p>Consumer.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">java.util.stream.Collectors</span>;
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonArray</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonObject</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers">22</span>
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Album</span>;
<span class="line-numbers">24</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers">25</span>
<span class="line-numbers">26</span><span class="comment">// tag::Consumer[]</span>
<span class="line-numbers">27</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Consumer</span> {
<span class="line-numbers">28</span>    <span class="comment">// tag::consumeWithJsonb[]</span>
<span class="line-numbers">29</span>    <span class="directive">public</span> <span class="directive">static</span> Artist<span class="type">[]</span> consumeWithJsonb(<span class="predefined-type">String</span> targetUrl) {
<span class="line-numbers">30</span>      Client client = ClientBuilder.newClient();
<span class="line-numbers">31</span>      <span class="comment">// tag::get-1[]</span>
<span class="line-numbers">32</span>      Response response = client.target(targetUrl).request().get();
<span class="line-numbers">33</span>      <span class="comment">// end::get-1[]</span>
<span class="line-numbers">34</span>      <span class="comment">// tag::readEntity[]</span>
<span class="line-numbers">35</span>      Artist<span class="type">[]</span> artists = response.readEntity(Artist<span class="type">[]</span>.class);
<span class="line-numbers">36</span>      <span class="comment">// end::readEntity[]</span>
<span class="line-numbers">37</span>
<span class="line-numbers">38</span>      response.close();
<span class="line-numbers">39</span>      client.close();
<span class="line-numbers">40</span>
<span class="line-numbers">41</span>      <span class="keyword">return</span> artists;
<span class="line-numbers">42</span>    }
<span class="line-numbers">43</span>    <span class="comment">// end::consumeWithJsonb[]</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>    <span class="comment">// tag::consumeWithJsonp[]</span>
<span class="line-numbers">46</span>    <span class="directive">public</span> <span class="directive">static</span> Artist<span class="type">[]</span> consumeWithJsonp(<span class="predefined-type">String</span> targetUrl) {
<span class="line-numbers">47</span>      Client client = ClientBuilder.newClient();
<span class="line-numbers">48</span>      <span class="comment">// tag::get-2[]</span>
<span class="line-numbers">49</span>      Response response = client.target(targetUrl).request().get();
<span class="line-numbers">50</span>      <span class="comment">// end::get-2[]</span>
<span class="line-numbers">51</span>      JsonArray arr = response.readEntity(JsonArray.class);
<span class="line-numbers">52</span>
<span class="line-numbers">53</span>      response.close();
<span class="line-numbers">54</span>      client.close();
<span class="line-numbers">55</span>
<span class="line-numbers">56</span>      <span class="keyword">return</span> Consumer.collectArtists(arr);
<span class="line-numbers">57</span>    }
<span class="line-numbers">58</span>    <span class="comment">// end::consumeWithJsonp[]</span>
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>    <span class="comment">// tag::collectArtists[]</span>
<span class="line-numbers">61</span>    <span class="directive">private</span> <span class="directive">static</span> Artist<span class="type">[]</span> collectArtists(JsonArray artistArr) {
<span class="line-numbers">62</span>      <span class="predefined-type">List</span>&lt;Artist&gt; artists = artistArr.stream().map(artistJson -&gt; {
<span class="line-numbers">63</span>        JsonArray albumArr = ((JsonObject) artistJson).getJsonArray(<span class="string"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span>);
<span class="line-numbers">64</span>        Artist artist = <span class="keyword">new</span> Artist(
<span class="line-numbers">65</span>          ((JsonObject) artistJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>),
<span class="line-numbers">66</span>          Consumer.collectAlbums(albumArr));
<span class="line-numbers">67</span>        <span class="keyword">return</span> artist;
<span class="line-numbers">68</span>      }).collect(Collectors.toList());
<span class="line-numbers">69</span>
<span class="line-numbers">70</span>      <span class="keyword">return</span> artists.toArray(<span class="keyword">new</span> Artist[artists.size()]);
<span class="line-numbers">71</span>    }
<span class="line-numbers">72</span>    <span class="comment">// end::collectArtists[]</span>
<span class="line-numbers">73</span>
<span class="line-numbers">74</span>    <span class="comment">// tag::collectAlbums[]</span>
<span class="line-numbers">75</span>    <span class="directive">private</span> <span class="directive">static</span> Album<span class="type">[]</span> collectAlbums(JsonArray albumArr) {
<span class="line-numbers">76</span>      <span class="predefined-type">List</span>&lt;Album&gt; albums = albumArr.stream().map(albumJson -&gt; {
<span class="line-numbers">77</span>        Album album = <span class="keyword">new</span> Album(
<span class="line-numbers">78</span>          ((JsonObject) albumJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span>),
<span class="line-numbers">79</span>          ((JsonObject) albumJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>),
<span class="line-numbers">80</span>          ((JsonObject) albumJson).getInt(<span class="string"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span>));
<span class="line-numbers">81</span>        <span class="keyword">return</span> album;
<span class="line-numbers">82</span>      }).collect(Collectors.toList());
<span class="line-numbers">83</span>
<span class="line-numbers">84</span>      <span class="keyword">return</span> albums.toArray(<span class="keyword">new</span> Album[albums.size()]);
<span class="line-numbers">85</span>    }
<span class="line-numbers">86</span>    <span class="comment">// end::collectAlbums[]</span>
<span class="line-numbers">87</span>}
<span class="line-numbers">88</span><span class="comment">// end::Consumer[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=consumeWithJsonp">consumeWithJsonp()</code> method in the <code class="hotspot=Consumer">Consumer</code> class makes a <code class="hotspot=get-2">GET</code> request to the running artist service and retrieves the JSON. This method then uses the <code class="hotspot=collectArtists">collectArtists</code> and <code class="hotspot=collectAlbums">collectAlbums</code> helper methods. These helper methods will parse the JSON and collect its objects into individual POJOs. Notice that you can use the custom constructors to create instances of <code>Artist</code> and <code>Album</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-additional-rest-resources">Creating additional REST resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Consumer.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">java.util.stream.Collectors</span>;
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonArray</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonObject</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers">22</span>
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Album</span>;
<span class="line-numbers">24</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers">25</span>
<span class="line-numbers">26</span><span class="comment">// tag::Consumer[]</span>
<span class="line-numbers">27</span><span class="directive">public</span> <span class="type">class</span> <span class="class">Consumer</span> {
<span class="line-numbers">28</span>    <span class="comment">// tag::consumeWithJsonb[]</span>
<span class="line-numbers">29</span>    <span class="directive">public</span> <span class="directive">static</span> Artist<span class="type">[]</span> consumeWithJsonb(<span class="predefined-type">String</span> targetUrl) {
<span class="line-numbers">30</span>      Client client = ClientBuilder.newClient();
<span class="line-numbers">31</span>      <span class="comment">// tag::get-1[]</span>
<span class="line-numbers">32</span>      Response response = client.target(targetUrl).request().get();
<span class="line-numbers">33</span>      <span class="comment">// end::get-1[]</span>
<span class="line-numbers">34</span>      <span class="comment">// tag::readEntity[]</span>
<span class="line-numbers">35</span>      Artist<span class="type">[]</span> artists = response.readEntity(Artist<span class="type">[]</span>.class);
<span class="line-numbers">36</span>      <span class="comment">// end::readEntity[]</span>
<span class="line-numbers">37</span>
<span class="line-numbers">38</span>      response.close();
<span class="line-numbers">39</span>      client.close();
<span class="line-numbers">40</span>
<span class="line-numbers">41</span>      <span class="keyword">return</span> artists;
<span class="line-numbers">42</span>    }
<span class="line-numbers">43</span>    <span class="comment">// end::consumeWithJsonb[]</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>    <span class="comment">// tag::consumeWithJsonp[]</span>
<span class="line-numbers">46</span>    <span class="directive">public</span> <span class="directive">static</span> Artist<span class="type">[]</span> consumeWithJsonp(<span class="predefined-type">String</span> targetUrl) {
<span class="line-numbers">47</span>      Client client = ClientBuilder.newClient();
<span class="line-numbers">48</span>      <span class="comment">// tag::get-2[]</span>
<span class="line-numbers">49</span>      Response response = client.target(targetUrl).request().get();
<span class="line-numbers">50</span>      <span class="comment">// end::get-2[]</span>
<span class="line-numbers">51</span>      JsonArray arr = response.readEntity(JsonArray.class);
<span class="line-numbers">52</span>
<span class="line-numbers">53</span>      response.close();
<span class="line-numbers">54</span>      client.close();
<span class="line-numbers">55</span>
<span class="line-numbers">56</span>      <span class="keyword">return</span> Consumer.collectArtists(arr);
<span class="line-numbers">57</span>    }
<span class="line-numbers">58</span>    <span class="comment">// end::consumeWithJsonp[]</span>
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>    <span class="comment">// tag::collectArtists[]</span>
<span class="line-numbers">61</span>    <span class="directive">private</span> <span class="directive">static</span> Artist<span class="type">[]</span> collectArtists(JsonArray artistArr) {
<span class="line-numbers">62</span>      <span class="predefined-type">List</span>&lt;Artist&gt; artists = artistArr.stream().map(artistJson -&gt; {
<span class="line-numbers">63</span>        JsonArray albumArr = ((JsonObject) artistJson).getJsonArray(<span class="string"><span class="delimiter">"</span><span class="content">albums</span><span class="delimiter">"</span></span>);
<span class="line-numbers">64</span>        Artist artist = <span class="keyword">new</span> Artist(
<span class="line-numbers">65</span>          ((JsonObject) artistJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>),
<span class="line-numbers">66</span>          Consumer.collectAlbums(albumArr));
<span class="line-numbers">67</span>        <span class="keyword">return</span> artist;
<span class="line-numbers">68</span>      }).collect(Collectors.toList());
<span class="line-numbers">69</span>
<span class="line-numbers">70</span>      <span class="keyword">return</span> artists.toArray(<span class="keyword">new</span> Artist[artists.size()]);
<span class="line-numbers">71</span>    }
<span class="line-numbers">72</span>    <span class="comment">// end::collectArtists[]</span>
<span class="line-numbers">73</span>
<span class="line-numbers">74</span>    <span class="comment">// tag::collectAlbums[]</span>
<span class="line-numbers">75</span>    <span class="directive">private</span> <span class="directive">static</span> Album<span class="type">[]</span> collectAlbums(JsonArray albumArr) {
<span class="line-numbers">76</span>      <span class="predefined-type">List</span>&lt;Album&gt; albums = albumArr.stream().map(albumJson -&gt; {
<span class="line-numbers">77</span>        Album album = <span class="keyword">new</span> Album(
<span class="line-numbers">78</span>          ((JsonObject) albumJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span>),
<span class="line-numbers">79</span>          ((JsonObject) albumJson).getString(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>),
<span class="line-numbers">80</span>          ((JsonObject) albumJson).getInt(<span class="string"><span class="delimiter">"</span><span class="content">ntracks</span><span class="delimiter">"</span></span>));
<span class="line-numbers">81</span>        <span class="keyword">return</span> album;
<span class="line-numbers">82</span>      }).collect(Collectors.toList());
<span class="line-numbers">83</span>
<span class="line-numbers">84</span>      <span class="keyword">return</span> albums.toArray(<span class="keyword">new</span> Album[albums.size()]);
<span class="line-numbers">85</span>    }
<span class="line-numbers">86</span>    <span class="comment">// end::collectAlbums[]</span>
<span class="line-numbers">87</span>}
<span class="line-numbers">88</span><span class="comment">// end::Consumer[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that you can consume a JSON resource you can put that data to use.</p>
</div>
<div class="listingblock code_command hotspot file=1">
<div class="content">
<pre><mark>Replace the <code>ArtistResource</code> class.</mark>
<code>src/main/java/io/openliberty/guides/consumingrest/service/ArtistResource.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>ArtistResource.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.consumingrest.service</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonArray</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.Jsonb</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.JsonbBuilder</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.GET</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.PathParam</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Produces</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Context</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.MediaType</span>;
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.UriInfo</span>;
<span class="line-numbers">24</span>
<span class="line-numbers">25</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers">26</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.Consumer</span>;
<span class="line-numbers">27</span>
<span class="line-numbers">28</span><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">artists</span><span class="delimiter">"</span></span>)
<span class="line-numbers">29</span><span class="comment">// tag::ArtistResource[]</span>
<span class="line-numbers">30</span><span class="directive">public</span> <span class="type">class</span> <span class="class">ArtistResource</span> {
<span class="line-numbers">31</span>
<span class="line-numbers">32</span>    <span class="annotation">@Context</span>
<span class="line-numbers">33</span>    UriInfo uriInfo;
<span class="line-numbers">34</span>
<span class="line-numbers">35</span>    <span class="annotation">@GET</span>
<span class="line-numbers">36</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">37</span>    <span class="comment">// tag::getArtists[]</span>
<span class="line-numbers">38</span>    <span class="directive">public</span> JsonArray getArtists() {
<span class="line-numbers">39</span>      <span class="keyword">return</span> <span class="predefined-type">Reader</span>.getArtists();
<span class="line-numbers">40</span>    }
<span class="line-numbers">41</span>    <span class="comment">// end::getArtists[]</span>
<span class="line-numbers">42</span>
<span class="line-numbers">43</span>    <span class="annotation">@GET</span>
<span class="line-numbers">44</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>)
<span class="line-numbers">45</span>    <span class="annotation">@Produces</span>(MediaType.TEXT_PLAIN)
<span class="line-numbers">46</span>    <span class="comment">// tag::getJsonString[]</span>
<span class="line-numbers">47</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getJsonString() {
<span class="line-numbers">48</span>      Jsonb jsonb = JsonbBuilder.create();
<span class="line-numbers">49</span>
<span class="line-numbers">50</span>      Artist<span class="type">[]</span> artists = Consumer.consumeWithJsonb(uriInfo.getBaseUri().toString()
<span class="line-numbers">51</span>                                                   + <span class="string"><span class="delimiter">"</span><span class="content">artists</span><span class="delimiter">"</span></span>);
<span class="line-numbers">52</span>      <span class="predefined-type">String</span> result = jsonb.toJson(artists);
<span class="line-numbers">53</span>
<span class="line-numbers">54</span>      <span class="keyword">return</span> result;
<span class="line-numbers">55</span>    }
<span class="line-numbers">56</span>    <span class="comment">// end::getJsonString[]</span>
<span class="line-numbers">57</span>
<span class="line-numbers">58</span>    <span class="annotation">@GET</span>
<span class="line-numbers">59</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">total/{artist}</span><span class="delimiter">"</span></span>)
<span class="line-numbers">60</span>    <span class="annotation">@Produces</span>(MediaType.TEXT_PLAIN)
<span class="line-numbers">61</span>    <span class="comment">// tag::getTotalAlbums[]</span>
<span class="line-numbers">62</span>    <span class="directive">public</span> <span class="type">int</span> getTotalAlbums(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">artist</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> artist) {
<span class="line-numbers">63</span>      Artist<span class="type">[]</span> artists = Consumer.consumeWithJsonb(uriInfo.getBaseUri().toString()
<span class="line-numbers">64</span>        + <span class="string"><span class="delimiter">"</span><span class="content">artists</span><span class="delimiter">"</span></span>);
<span class="line-numbers">65</span>
<span class="line-numbers">66</span>      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; artists.length; i++) {
<span class="line-numbers">67</span>        <span class="keyword">if</span> (artists[i].name.equals(artist)) {
<span class="line-numbers">68</span>          <span class="keyword">return</span> artists[i].albums.length;
<span class="line-numbers">69</span>        }
<span class="line-numbers">70</span>      }
<span class="line-numbers">71</span>      <span class="keyword">return</span> -<span class="integer">1</span>;
<span class="line-numbers">72</span>    }
<span class="line-numbers">73</span>    <span class="comment">// end::getTotalAlbums[]</span>
<span class="line-numbers">74</span>
<span class="line-numbers">75</span>    <span class="annotation">@GET</span>
<span class="line-numbers">76</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">total</span><span class="delimiter">"</span></span>)
<span class="line-numbers">77</span>    <span class="annotation">@Produces</span>(MediaType.TEXT_PLAIN)
<span class="line-numbers">78</span>    <span class="comment">// tag::getTotalArtists[]</span>
<span class="line-numbers">79</span>    <span class="directive">public</span> <span class="type">int</span> getTotalArtists() {
<span class="line-numbers">80</span>      <span class="keyword">return</span> Consumer.consumeWithJsonp(uriInfo.getBaseUri().toString()
<span class="line-numbers">81</span>                                       + <span class="string"><span class="delimiter">"</span><span class="content">artists</span><span class="delimiter">"</span></span>).length;
<span class="line-numbers">82</span>    }
<span class="line-numbers">83</span>    <span class="comment">// end::getTotalArtists[]</span>
<span class="line-numbers">84</span>}
<span class="line-numbers">85</span><span class="comment">// end::ArtistResource[]</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code class="hotspot=getArtists file=1">getArtists()</code> method provides the raw JSON data service that you accessed at the beginning of this guide.</p>
</li>
<li>
<p>The <code class="hotspot=getJsonString file=1">getJsonString()</code> method uses JSON-B to return the JSON as a string that will be used later for testing.</p>
</li>
<li>
<p>The <code class="hotspot=getTotalAlbums file=1">getTotalAlbums()</code> method uses JSON-B to return the total number of albums present in the JSON for a particular artist. The method returns -1 if this artist does not exist.</p>
</li>
<li>
<p>The <code class="hotspot=getTotalArtists file=1">getTotalArtists()</code> method uses JSON-P to return the total number of artists present in the JSON.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The methods that you wrote in the <code class="hotspot=Consumer file=0">Consumer</code> class could be written directly in the <code class="hotspot=ArtistResource file=1">ArtistResource</code> class. However, if you are consuming a REST resource from a third party service, you should separate your <code>GET</code>/<code>POST</code> requests from your data consumption.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-application">Running the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Open Liberty was started in dev mode at the beginning of the guide and all the changes were automatically picked up.</p>
</div>
<div class="paragraph">
<p>You can find your service at <a href="http://localhost:9080/artists" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/artists</a>.</p>
</div>
<div class="paragraph">
<p>Now, you can access the endpoint at <a href="http://localhost:9080/artists/total" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/artists/total</a> to see the total number of artists, and you can access the endpoint at <code>http://localhost:9080/artists/total/&lt;artist&gt;</code> to see a particular artist’s total number of albums.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-deserialization">Testing deserialization</h2>
<div class="sectionbody">
<div class="listingblock code_command hotspot">
<div class="content">
<pre><mark>Create the <code>ConsumingRestIT</code> class.</mark>
<code>src/test/java/it/io/openliberty/guides/consumingrest/ConsumingRestIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>ConsumingRestIT.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers">  1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers">  2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers">  3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers">  4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers">  5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers">  6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers">  7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers">  8</span><span class="comment"> *</span>
<span class="line-numbers">  9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers"> 10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers"> 11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers"> 12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.consumingrest</span>;
<span class="line-numbers"> 13</span>
<span class="line-numbers"> 14</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertEquals</span>;
<span class="line-numbers"> 15</span>
<span class="line-numbers"> 16</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.Jsonb</span>;
<span class="line-numbers"> 17</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.JsonbBuilder</span>;
<span class="line-numbers"> 18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers"> 19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers"> 20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers"> 21</span>
<span class="line-numbers"> 22</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.AfterEach</span>;
<span class="line-numbers"> 23</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeEach</span>;
<span class="line-numbers"> 24</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeAll</span>;
<span class="line-numbers"> 25</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="line-numbers"> 26</span>
<span class="line-numbers"> 27</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers"> 28</span>
<span class="line-numbers"> 29</span><span class="directive">public</span> <span class="type">class</span> <span class="class">ConsumingRestIT</span> {
<span class="line-numbers"> 30</span>
<span class="line-numbers"> 31</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> port;
<span class="line-numbers"> 32</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> baseUrl;
<span class="line-numbers"> 33</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> targetUrl;
<span class="line-numbers"> 34</span>
<span class="line-numbers"> 35</span>    <span class="directive">private</span> Client client;
<span class="line-numbers"> 36</span>    <span class="directive">private</span> Response response;
<span class="line-numbers"> 37</span>
<span class="line-numbers"> 38</span>    <span class="comment">// tag::BeforeAll[]</span>
<span class="line-numbers"> 39</span>    <span class="annotation">@BeforeAll</span>
<span class="line-numbers"> 40</span>    <span class="comment">// end::BeforeAll[]</span>
<span class="line-numbers"> 41</span>    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> oneTimeSetup() {
<span class="line-numbers"> 42</span>      port = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">http.port</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 43</span>      baseUrl = <span class="string"><span class="delimiter">"</span><span class="content">http://localhost:</span><span class="delimiter">"</span></span> + port + <span class="string"><span class="delimiter">"</span><span class="content">/artists/</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 44</span>      targetUrl = baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">total/</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 45</span>    }
<span class="line-numbers"> 46</span>
<span class="line-numbers"> 47</span>    <span class="comment">// tag::BeforeEach[]</span>
<span class="line-numbers"> 48</span>    <span class="annotation">@BeforeEach</span>
<span class="line-numbers"> 49</span>    <span class="comment">// end::BeforeEach[]</span>
<span class="line-numbers"> 50</span>    <span class="directive">public</span> <span class="type">void</span> setup() {
<span class="line-numbers"> 51</span>      client = ClientBuilder.newClient();
<span class="line-numbers"> 52</span>    }
<span class="line-numbers"> 53</span>
<span class="line-numbers"> 54</span>    <span class="comment">// tag::AfterEach[]</span>
<span class="line-numbers"> 55</span>    <span class="annotation">@AfterEach</span>
<span class="line-numbers"> 56</span>    <span class="comment">// end::AfterEach[]</span>
<span class="line-numbers"> 57</span>    <span class="directive">public</span> <span class="type">void</span> teardown() {
<span class="line-numbers"> 58</span>      client.close();
<span class="line-numbers"> 59</span>    }
<span class="line-numbers"> 60</span>
<span class="line-numbers"> 61</span>    <span class="comment">// tag::test-1[]</span>
<span class="line-numbers"> 62</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 63</span>    <span class="comment">// end::test-1[]</span>
<span class="line-numbers"> 64</span>    <span class="comment">// tag::testArtistDeserialization[]</span>
<span class="line-numbers"> 65</span>    <span class="directive">public</span> <span class="type">void</span> testArtistDeserialization() {
<span class="line-numbers"> 66</span>      response = client.target(baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>).request().get();
<span class="line-numbers"> 67</span>      <span class="local-variable">this</span>.assertResponse(baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>, response);
<span class="line-numbers"> 68</span>
<span class="line-numbers"> 69</span>      Jsonb jsonb = JsonbBuilder.create();
<span class="line-numbers"> 70</span>
<span class="line-numbers"> 71</span>      <span class="predefined-type">String</span> expectedString = <span class="string"><span class="delimiter">"</span><span class="content">{</span><span class="char">\"</span><span class="content">name</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">foo</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">albums</span><span class="char">\"</span><span class="content">:</span><span class="delimiter">"</span></span>
<span class="line-numbers"> 72</span>        + <span class="string"><span class="delimiter">"</span><span class="content">[{</span><span class="char">\"</span><span class="content">title</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">album_one</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">artist</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">foo</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">ntracks</span><span class="char">\"</span><span class="content">:12}]}</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 73</span>      Artist expected = jsonb.fromJson(expectedString, Artist.class);
<span class="line-numbers"> 74</span>
<span class="line-numbers"> 75</span>      <span class="predefined-type">String</span> actualString = response.readEntity(<span class="predefined-type">String</span>.class);
<span class="line-numbers"> 76</span>      Artist<span class="type">[]</span> actual = jsonb.fromJson(actualString, Artist<span class="type">[]</span>.class);
<span class="line-numbers"> 77</span>
<span class="line-numbers"> 78</span>      assertEquals(expected.name, actual[<span class="integer">0</span>].name,
<span class="line-numbers"> 79</span>        <span class="string"><span class="delimiter">"</span><span class="content">Expected names of artists does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 80</span>
<span class="line-numbers"> 81</span>      response.close();
<span class="line-numbers"> 82</span>    }
<span class="line-numbers"> 83</span>    <span class="comment">// end::testArtistDeserialization[]</span>
<span class="line-numbers"> 84</span>
<span class="line-numbers"> 85</span>    <span class="comment">// tag::test-2[]</span>
<span class="line-numbers"> 86</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 87</span>    <span class="comment">// end::test-2[]</span>
<span class="line-numbers"> 88</span>    <span class="comment">// tag::testJsonBAlbumCount[]</span>
<span class="line-numbers"> 89</span>    <span class="directive">public</span> <span class="type">void</span> testJsonBAlbumCount() {
<span class="line-numbers"> 90</span>      <span class="predefined-type">String</span><span class="type">[]</span> artists = {<span class="string"><span class="delimiter">"</span><span class="content">dj</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">bar</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>};
<span class="line-numbers"> 91</span>      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; artists.length; i++) {
<span class="line-numbers"> 92</span>        response = client.target(targetUrl + artists[i]).request().get();
<span class="line-numbers"> 93</span>        <span class="local-variable">this</span>.assertResponse(targetUrl + artists[i], response);
<span class="line-numbers"> 94</span>
<span class="line-numbers"> 95</span>        <span class="type">int</span> expected = i;
<span class="line-numbers"> 96</span>        <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers"> 97</span>        assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Album count for </span><span class="delimiter">"</span></span>
<span class="line-numbers"> 98</span>                      + artists[i] + <span class="string"><span class="delimiter">"</span><span class="content"> does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 99</span>
<span class="line-numbers">100</span>        response.close();
<span class="line-numbers">101</span>      }
<span class="line-numbers">102</span>    }
<span class="line-numbers">103</span>    <span class="comment">// end::testJsonBAlbumCount[]</span>
<span class="line-numbers">104</span>
<span class="line-numbers">105</span>    <span class="comment">// tag::testAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">106</span>    <span class="comment">// tag::test-3[]</span>
<span class="line-numbers">107</span>    <span class="annotation">@Test</span>
<span class="line-numbers">108</span>    <span class="comment">// end::test-3[]</span>
<span class="line-numbers">109</span>    <span class="comment">// tag::testJsonBAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">110</span>    <span class="directive">public</span> <span class="type">void</span> testJsonBAlbumCountForUnknownArtist() {
<span class="line-numbers">111</span>      response = client.target(targetUrl + <span class="string"><span class="delimiter">"</span><span class="content">unknown-artist</span><span class="delimiter">"</span></span>).request().get();
<span class="line-numbers">112</span>
<span class="line-numbers">113</span>      <span class="type">int</span> expected = -<span class="integer">1</span>;
<span class="line-numbers">114</span>      <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers">115</span>      assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Unknown artist must have -1 albums</span><span class="delimiter">"</span></span>);
<span class="line-numbers">116</span>
<span class="line-numbers">117</span>      response.close();
<span class="line-numbers">118</span>    }
<span class="line-numbers">119</span>    <span class="comment">// end::testJsonBAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">120</span>
<span class="line-numbers">121</span>    <span class="comment">// tag::test-4[]</span>
<span class="line-numbers">122</span>    <span class="annotation">@Test</span>
<span class="line-numbers">123</span>    <span class="comment">// end::test-4[]</span>
<span class="line-numbers">124</span>    <span class="comment">// tag::testJsonPArtistCount[]</span>
<span class="line-numbers">125</span>    <span class="directive">public</span> <span class="type">void</span> testJsonPArtistCount() {
<span class="line-numbers">126</span>      response = client.target(targetUrl).request().get();
<span class="line-numbers">127</span>      <span class="local-variable">this</span>.assertResponse(targetUrl, response);
<span class="line-numbers">128</span>
<span class="line-numbers">129</span>      <span class="type">int</span> expected = <span class="integer">3</span>;
<span class="line-numbers">130</span>      <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers">131</span>      assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Expected number of artists does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers">132</span>
<span class="line-numbers">133</span>      response.close();
<span class="line-numbers">134</span>    }
<span class="line-numbers">135</span>    <span class="comment">// end::testJsonPArtistCount[]</span>
<span class="line-numbers">136</span>
<span class="line-numbers">137</span>    <span class="comment">/**</span>
<span class="line-numbers">138</span><span class="comment">     * Asserts that the given URL has the correct (200) response code.</span>
<span class="line-numbers">139</span><span class="comment">     */</span>
<span class="line-numbers">140</span>    <span class="comment">// tag::assertResponse[]</span>
<span class="line-numbers">141</span>    <span class="directive">private</span> <span class="type">void</span> assertResponse(<span class="predefined-type">String</span> url, Response response) {
<span class="line-numbers">142</span>      assertEquals(<span class="integer">200</span>, response.getStatus(), <span class="string"><span class="delimiter">"</span><span class="content">Incorrect response code from </span><span class="delimiter">"</span></span> + url);
<span class="line-numbers">143</span>    }
<span class="line-numbers">144</span>    <span class="comment">// end::assertResponse[]</span>
<span class="line-numbers">145</span>    <span class="comment">// end::tests[]</span>
<span class="line-numbers">146</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maven finds and executes all tests under the <code>src/test/java/it/</code> directory, and each test method must be marked with the <code class="hotspot=test-1 hotspot=test-2 hotspot=test-3 hotspot=test-4">@Test</code> annotation.</p>
</div>
<div class="paragraph">
<p>You can use the <code class="hotspot=BeforeAll">@BeforeAll</code> and <code>@AfterAll</code> annotations to perform any one-time setup and teardown tasks before and after all of your tests run. You can also use the <code class="hotspot=BeforeEach">@BeforeEach</code> and <code class="hotspot=AfterEach">@AfterEach</code> annotations to perform setup and teardown tasks for individual test cases.</p>
</div>
<div class="sect2">
<h3 id="testing-the-binding-process">Testing the binding process</h3>
<div class="paragraph">
<p>ConsumingRestIT.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers">  1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers">  2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers">  3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers">  4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers">  5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers">  6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers">  7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers">  8</span><span class="comment"> *</span>
<span class="line-numbers">  9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers"> 10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers"> 11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers"> 12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.consumingrest</span>;
<span class="line-numbers"> 13</span>
<span class="line-numbers"> 14</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertEquals</span>;
<span class="line-numbers"> 15</span>
<span class="line-numbers"> 16</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.Jsonb</span>;
<span class="line-numbers"> 17</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.JsonbBuilder</span>;
<span class="line-numbers"> 18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers"> 19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers"> 20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers"> 21</span>
<span class="line-numbers"> 22</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.AfterEach</span>;
<span class="line-numbers"> 23</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeEach</span>;
<span class="line-numbers"> 24</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeAll</span>;
<span class="line-numbers"> 25</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="line-numbers"> 26</span>
<span class="line-numbers"> 27</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers"> 28</span>
<span class="line-numbers"> 29</span><span class="directive">public</span> <span class="type">class</span> <span class="class">ConsumingRestIT</span> {
<span class="line-numbers"> 30</span>
<span class="line-numbers"> 31</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> port;
<span class="line-numbers"> 32</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> baseUrl;
<span class="line-numbers"> 33</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> targetUrl;
<span class="line-numbers"> 34</span>
<span class="line-numbers"> 35</span>    <span class="directive">private</span> Client client;
<span class="line-numbers"> 36</span>    <span class="directive">private</span> Response response;
<span class="line-numbers"> 37</span>
<span class="line-numbers"> 38</span>    <span class="comment">// tag::BeforeAll[]</span>
<span class="line-numbers"> 39</span>    <span class="annotation">@BeforeAll</span>
<span class="line-numbers"> 40</span>    <span class="comment">// end::BeforeAll[]</span>
<span class="line-numbers"> 41</span>    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> oneTimeSetup() {
<span class="line-numbers"> 42</span>      port = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">http.port</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 43</span>      baseUrl = <span class="string"><span class="delimiter">"</span><span class="content">http://localhost:</span><span class="delimiter">"</span></span> + port + <span class="string"><span class="delimiter">"</span><span class="content">/artists/</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 44</span>      targetUrl = baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">total/</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 45</span>    }
<span class="line-numbers"> 46</span>
<span class="line-numbers"> 47</span>    <span class="comment">// tag::BeforeEach[]</span>
<span class="line-numbers"> 48</span>    <span class="annotation">@BeforeEach</span>
<span class="line-numbers"> 49</span>    <span class="comment">// end::BeforeEach[]</span>
<span class="line-numbers"> 50</span>    <span class="directive">public</span> <span class="type">void</span> setup() {
<span class="line-numbers"> 51</span>      client = ClientBuilder.newClient();
<span class="line-numbers"> 52</span>    }
<span class="line-numbers"> 53</span>
<span class="line-numbers"> 54</span>    <span class="comment">// tag::AfterEach[]</span>
<span class="line-numbers"> 55</span>    <span class="annotation">@AfterEach</span>
<span class="line-numbers"> 56</span>    <span class="comment">// end::AfterEach[]</span>
<span class="line-numbers"> 57</span>    <span class="directive">public</span> <span class="type">void</span> teardown() {
<span class="line-numbers"> 58</span>      client.close();
<span class="line-numbers"> 59</span>    }
<span class="line-numbers"> 60</span>
<span class="line-numbers"> 61</span>    <span class="comment">// tag::test-1[]</span>
<span class="line-numbers"> 62</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 63</span>    <span class="comment">// end::test-1[]</span>
<span class="line-numbers"> 64</span>    <span class="comment">// tag::testArtistDeserialization[]</span>
<span class="line-numbers"> 65</span>    <span class="directive">public</span> <span class="type">void</span> testArtistDeserialization() {
<span class="line-numbers"> 66</span>      response = client.target(baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>).request().get();
<span class="line-numbers"> 67</span>      <span class="local-variable">this</span>.assertResponse(baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>, response);
<span class="line-numbers"> 68</span>
<span class="line-numbers"> 69</span>      Jsonb jsonb = JsonbBuilder.create();
<span class="line-numbers"> 70</span>
<span class="line-numbers"> 71</span>      <span class="predefined-type">String</span> expectedString = <span class="string"><span class="delimiter">"</span><span class="content">{</span><span class="char">\"</span><span class="content">name</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">foo</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">albums</span><span class="char">\"</span><span class="content">:</span><span class="delimiter">"</span></span>
<span class="line-numbers"> 72</span>        + <span class="string"><span class="delimiter">"</span><span class="content">[{</span><span class="char">\"</span><span class="content">title</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">album_one</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">artist</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">foo</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">ntracks</span><span class="char">\"</span><span class="content">:12}]}</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 73</span>      Artist expected = jsonb.fromJson(expectedString, Artist.class);
<span class="line-numbers"> 74</span>
<span class="line-numbers"> 75</span>      <span class="predefined-type">String</span> actualString = response.readEntity(<span class="predefined-type">String</span>.class);
<span class="line-numbers"> 76</span>      Artist<span class="type">[]</span> actual = jsonb.fromJson(actualString, Artist<span class="type">[]</span>.class);
<span class="line-numbers"> 77</span>
<span class="line-numbers"> 78</span>      assertEquals(expected.name, actual[<span class="integer">0</span>].name,
<span class="line-numbers"> 79</span>        <span class="string"><span class="delimiter">"</span><span class="content">Expected names of artists does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 80</span>
<span class="line-numbers"> 81</span>      response.close();
<span class="line-numbers"> 82</span>    }
<span class="line-numbers"> 83</span>    <span class="comment">// end::testArtistDeserialization[]</span>
<span class="line-numbers"> 84</span>
<span class="line-numbers"> 85</span>    <span class="comment">// tag::test-2[]</span>
<span class="line-numbers"> 86</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 87</span>    <span class="comment">// end::test-2[]</span>
<span class="line-numbers"> 88</span>    <span class="comment">// tag::testJsonBAlbumCount[]</span>
<span class="line-numbers"> 89</span>    <span class="directive">public</span> <span class="type">void</span> testJsonBAlbumCount() {
<span class="line-numbers"> 90</span>      <span class="predefined-type">String</span><span class="type">[]</span> artists = {<span class="string"><span class="delimiter">"</span><span class="content">dj</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">bar</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>};
<span class="line-numbers"> 91</span>      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; artists.length; i++) {
<span class="line-numbers"> 92</span>        response = client.target(targetUrl + artists[i]).request().get();
<span class="line-numbers"> 93</span>        <span class="local-variable">this</span>.assertResponse(targetUrl + artists[i], response);
<span class="line-numbers"> 94</span>
<span class="line-numbers"> 95</span>        <span class="type">int</span> expected = i;
<span class="line-numbers"> 96</span>        <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers"> 97</span>        assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Album count for </span><span class="delimiter">"</span></span>
<span class="line-numbers"> 98</span>                      + artists[i] + <span class="string"><span class="delimiter">"</span><span class="content"> does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 99</span>
<span class="line-numbers">100</span>        response.close();
<span class="line-numbers">101</span>      }
<span class="line-numbers">102</span>    }
<span class="line-numbers">103</span>    <span class="comment">// end::testJsonBAlbumCount[]</span>
<span class="line-numbers">104</span>
<span class="line-numbers">105</span>    <span class="comment">// tag::testAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">106</span>    <span class="comment">// tag::test-3[]</span>
<span class="line-numbers">107</span>    <span class="annotation">@Test</span>
<span class="line-numbers">108</span>    <span class="comment">// end::test-3[]</span>
<span class="line-numbers">109</span>    <span class="comment">// tag::testJsonBAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">110</span>    <span class="directive">public</span> <span class="type">void</span> testJsonBAlbumCountForUnknownArtist() {
<span class="line-numbers">111</span>      response = client.target(targetUrl + <span class="string"><span class="delimiter">"</span><span class="content">unknown-artist</span><span class="delimiter">"</span></span>).request().get();
<span class="line-numbers">112</span>
<span class="line-numbers">113</span>      <span class="type">int</span> expected = -<span class="integer">1</span>;
<span class="line-numbers">114</span>      <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers">115</span>      assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Unknown artist must have -1 albums</span><span class="delimiter">"</span></span>);
<span class="line-numbers">116</span>
<span class="line-numbers">117</span>      response.close();
<span class="line-numbers">118</span>    }
<span class="line-numbers">119</span>    <span class="comment">// end::testJsonBAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">120</span>
<span class="line-numbers">121</span>    <span class="comment">// tag::test-4[]</span>
<span class="line-numbers">122</span>    <span class="annotation">@Test</span>
<span class="line-numbers">123</span>    <span class="comment">// end::test-4[]</span>
<span class="line-numbers">124</span>    <span class="comment">// tag::testJsonPArtistCount[]</span>
<span class="line-numbers">125</span>    <span class="directive">public</span> <span class="type">void</span> testJsonPArtistCount() {
<span class="line-numbers">126</span>      response = client.target(targetUrl).request().get();
<span class="line-numbers">127</span>      <span class="local-variable">this</span>.assertResponse(targetUrl, response);
<span class="line-numbers">128</span>
<span class="line-numbers">129</span>      <span class="type">int</span> expected = <span class="integer">3</span>;
<span class="line-numbers">130</span>      <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers">131</span>      assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Expected number of artists does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers">132</span>
<span class="line-numbers">133</span>      response.close();
<span class="line-numbers">134</span>    }
<span class="line-numbers">135</span>    <span class="comment">// end::testJsonPArtistCount[]</span>
<span class="line-numbers">136</span>
<span class="line-numbers">137</span>    <span class="comment">/**</span>
<span class="line-numbers">138</span><span class="comment">     * Asserts that the given URL has the correct (200) response code.</span>
<span class="line-numbers">139</span><span class="comment">     */</span>
<span class="line-numbers">140</span>    <span class="comment">// tag::assertResponse[]</span>
<span class="line-numbers">141</span>    <span class="directive">private</span> <span class="type">void</span> assertResponse(<span class="predefined-type">String</span> url, Response response) {
<span class="line-numbers">142</span>      assertEquals(<span class="integer">200</span>, response.getStatus(), <span class="string"><span class="delimiter">"</span><span class="content">Incorrect response code from </span><span class="delimiter">"</span></span> + url);
<span class="line-numbers">143</span>    }
<span class="line-numbers">144</span>    <span class="comment">// end::assertResponse[]</span>
<span class="line-numbers">145</span>    <span class="comment">// end::tests[]</span>
<span class="line-numbers">146</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>pom.xml</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers">  1</span><span class="preprocessor">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="line-numbers">  2</span><span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers">  3</span>
<span class="line-numbers">  4</span>    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
<span class="line-numbers">  5</span>
<span class="line-numbers">  6</span>    <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">  7</span>    <span class="tag">&lt;artifactId&gt;</span>guide-rest-client-java<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">  8</span>    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">  9</span>    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
<span class="line-numbers"> 10</span>
<span class="line-numbers"> 11</span>    <span class="tag">&lt;properties&gt;</span>
<span class="line-numbers"> 12</span>        <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
<span class="line-numbers"> 13</span>        <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
<span class="line-numbers"> 14</span>        <span class="tag">&lt;maven.compiler.source&gt;</span>11<span class="tag">&lt;/maven.compiler.source&gt;</span>
<span class="line-numbers"> 15</span>        <span class="tag">&lt;maven.compiler.target&gt;</span>11<span class="tag">&lt;/maven.compiler.target&gt;</span>
<span class="line-numbers"> 16</span>        <span class="comment">&lt;!-- Liberty configuration --&gt;</span>
<span class="line-numbers"> 17</span>        <span class="tag">&lt;liberty.var.default.http.port&gt;</span>9080<span class="tag">&lt;/liberty.var.default.http.port&gt;</span>
<span class="line-numbers"> 18</span>        <span class="tag">&lt;liberty.var.default.https.port&gt;</span>9443<span class="tag">&lt;/liberty.var.default.https.port&gt;</span>
<span class="line-numbers"> 19</span>    <span class="tag">&lt;/properties&gt;</span>
<span class="line-numbers"> 20</span>
<span class="line-numbers"> 21</span>    <span class="tag">&lt;dependencies&gt;</span>
<span class="line-numbers"> 22</span>        <span class="comment">&lt;!-- Provided dependencies --&gt;</span>
<span class="line-numbers"> 23</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 24</span>            <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 25</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 26</span>            <span class="tag">&lt;version&gt;</span>10.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 27</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 28</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 29</span>        <span class="comment">&lt;!-- tag::microprofile[] --&gt;</span>
<span class="line-numbers"> 30</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 31</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 32</span>            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 33</span>            <span class="tag">&lt;version&gt;</span>6.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 34</span>            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
<span class="line-numbers"> 35</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 36</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 37</span>        <span class="comment">&lt;!-- end::microprofile[] --&gt;</span>
<span class="line-numbers"> 38</span>        <span class="comment">&lt;!-- For tests --&gt;</span>
<span class="line-numbers"> 39</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 40</span>            <span class="tag">&lt;groupId&gt;</span>org.junit.jupiter<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 41</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 42</span>            <span class="tag">&lt;version&gt;</span>5.9.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 43</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 44</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 45</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 46</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 47</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 48</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 49</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 50</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 51</span>        <span class="comment">&lt;!-- JSON-P RI --&gt;</span>
<span class="line-numbers"> 52</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 53</span>            <span class="tag">&lt;groupId&gt;</span>org.glassfish<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 54</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.json<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 55</span>            <span class="tag">&lt;version&gt;</span>2.0.1<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 56</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 57</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 58</span>        <span class="comment">&lt;!-- JSON-B API --&gt;</span>
<span class="line-numbers"> 59</span>        <span class="comment">&lt;!-- tag::Yasson[] --&gt;</span>
<span class="line-numbers"> 60</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 61</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 62</span>            <span class="tag">&lt;artifactId&gt;</span>yasson<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 63</span>            <span class="tag">&lt;version&gt;</span>3.0.3<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 64</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 65</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 66</span>        <span class="comment">&lt;!-- end::Yasson[] --&gt;</span>
<span class="line-numbers"> 67</span>    <span class="tag">&lt;/dependencies&gt;</span>
<span class="line-numbers"> 68</span>
<span class="line-numbers"> 69</span>    <span class="tag">&lt;build&gt;</span>
<span class="line-numbers"> 70</span>        <span class="tag">&lt;finalName&gt;</span>${project.artifactId}<span class="tag">&lt;/finalName&gt;</span>
<span class="line-numbers"> 71</span>        <span class="tag">&lt;plugins&gt;</span>
<span class="line-numbers"> 72</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 73</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 74</span>                <span class="tag">&lt;artifactId&gt;</span>maven-war-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 75</span>                <span class="tag">&lt;version&gt;</span>3.3.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 76</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 77</span>            <span class="comment">&lt;!-- Plugin to run unit tests --&gt;</span>
<span class="line-numbers"> 78</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 79</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 80</span>                <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 81</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 82</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 83</span>            <span class="comment">&lt;!-- Enable liberty-maven plugin --&gt;</span>
<span class="line-numbers"> 84</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 85</span>                <span class="tag">&lt;groupId&gt;</span>io.openliberty.tools<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 86</span>                <span class="tag">&lt;artifactId&gt;</span>liberty-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 87</span>                <span class="tag">&lt;version&gt;</span>3.8.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 88</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 89</span>            <span class="comment">&lt;!-- Plugin to run functional tests --&gt;</span>
<span class="line-numbers"> 90</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 91</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 92</span>                <span class="tag">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 93</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 94</span>                <span class="tag">&lt;configuration&gt;</span>
<span class="line-numbers"> 95</span>                    <span class="tag">&lt;systemPropertyVariables&gt;</span>
<span class="line-numbers"> 96</span>                        <span class="tag">&lt;http.port&gt;</span>${liberty.var.default.http.port}<span class="tag">&lt;/http.port&gt;</span>
<span class="line-numbers"> 97</span>                    <span class="tag">&lt;/systemPropertyVariables&gt;</span>
<span class="line-numbers"> 98</span>                <span class="tag">&lt;/configuration&gt;</span>
<span class="line-numbers"> 99</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">100</span>        <span class="tag">&lt;/plugins&gt;</span>
<span class="line-numbers">101</span>    <span class="tag">&lt;/build&gt;</span>
<span class="line-numbers">102</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=Yasson file=1">yasson</code> dependency was added in your <code class="hotspot file=1">pom.xml</code> file so that your test classes have access to JSON-B.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testArtistDeserialization file=0">testArtistDeserialization</code> test case checks that <code>Artist</code> instances created from the REST data and those that are hardcoded perform the same.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=assertResponse file=0">assertResponse</code> helper method ensures that the response code you receive is valid (200).</p>
</div>
</div>
<div class="sect2">
<h3 id="processing-with-json-b-test">Processing with JSON-B test</h3>
<div class="paragraph">
<p>ConsumingRestIT.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers">  1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers">  2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers">  3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers">  4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers">  5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers">  6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers">  7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers">  8</span><span class="comment"> *</span>
<span class="line-numbers">  9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers"> 10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers"> 11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers"> 12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.consumingrest</span>;
<span class="line-numbers"> 13</span>
<span class="line-numbers"> 14</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertEquals</span>;
<span class="line-numbers"> 15</span>
<span class="line-numbers"> 16</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.Jsonb</span>;
<span class="line-numbers"> 17</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.JsonbBuilder</span>;
<span class="line-numbers"> 18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers"> 19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers"> 20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers"> 21</span>
<span class="line-numbers"> 22</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.AfterEach</span>;
<span class="line-numbers"> 23</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeEach</span>;
<span class="line-numbers"> 24</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeAll</span>;
<span class="line-numbers"> 25</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="line-numbers"> 26</span>
<span class="line-numbers"> 27</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers"> 28</span>
<span class="line-numbers"> 29</span><span class="directive">public</span> <span class="type">class</span> <span class="class">ConsumingRestIT</span> {
<span class="line-numbers"> 30</span>
<span class="line-numbers"> 31</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> port;
<span class="line-numbers"> 32</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> baseUrl;
<span class="line-numbers"> 33</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> targetUrl;
<span class="line-numbers"> 34</span>
<span class="line-numbers"> 35</span>    <span class="directive">private</span> Client client;
<span class="line-numbers"> 36</span>    <span class="directive">private</span> Response response;
<span class="line-numbers"> 37</span>
<span class="line-numbers"> 38</span>    <span class="comment">// tag::BeforeAll[]</span>
<span class="line-numbers"> 39</span>    <span class="annotation">@BeforeAll</span>
<span class="line-numbers"> 40</span>    <span class="comment">// end::BeforeAll[]</span>
<span class="line-numbers"> 41</span>    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> oneTimeSetup() {
<span class="line-numbers"> 42</span>      port = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">http.port</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 43</span>      baseUrl = <span class="string"><span class="delimiter">"</span><span class="content">http://localhost:</span><span class="delimiter">"</span></span> + port + <span class="string"><span class="delimiter">"</span><span class="content">/artists/</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 44</span>      targetUrl = baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">total/</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 45</span>    }
<span class="line-numbers"> 46</span>
<span class="line-numbers"> 47</span>    <span class="comment">// tag::BeforeEach[]</span>
<span class="line-numbers"> 48</span>    <span class="annotation">@BeforeEach</span>
<span class="line-numbers"> 49</span>    <span class="comment">// end::BeforeEach[]</span>
<span class="line-numbers"> 50</span>    <span class="directive">public</span> <span class="type">void</span> setup() {
<span class="line-numbers"> 51</span>      client = ClientBuilder.newClient();
<span class="line-numbers"> 52</span>    }
<span class="line-numbers"> 53</span>
<span class="line-numbers"> 54</span>    <span class="comment">// tag::AfterEach[]</span>
<span class="line-numbers"> 55</span>    <span class="annotation">@AfterEach</span>
<span class="line-numbers"> 56</span>    <span class="comment">// end::AfterEach[]</span>
<span class="line-numbers"> 57</span>    <span class="directive">public</span> <span class="type">void</span> teardown() {
<span class="line-numbers"> 58</span>      client.close();
<span class="line-numbers"> 59</span>    }
<span class="line-numbers"> 60</span>
<span class="line-numbers"> 61</span>    <span class="comment">// tag::test-1[]</span>
<span class="line-numbers"> 62</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 63</span>    <span class="comment">// end::test-1[]</span>
<span class="line-numbers"> 64</span>    <span class="comment">// tag::testArtistDeserialization[]</span>
<span class="line-numbers"> 65</span>    <span class="directive">public</span> <span class="type">void</span> testArtistDeserialization() {
<span class="line-numbers"> 66</span>      response = client.target(baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>).request().get();
<span class="line-numbers"> 67</span>      <span class="local-variable">this</span>.assertResponse(baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>, response);
<span class="line-numbers"> 68</span>
<span class="line-numbers"> 69</span>      Jsonb jsonb = JsonbBuilder.create();
<span class="line-numbers"> 70</span>
<span class="line-numbers"> 71</span>      <span class="predefined-type">String</span> expectedString = <span class="string"><span class="delimiter">"</span><span class="content">{</span><span class="char">\"</span><span class="content">name</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">foo</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">albums</span><span class="char">\"</span><span class="content">:</span><span class="delimiter">"</span></span>
<span class="line-numbers"> 72</span>        + <span class="string"><span class="delimiter">"</span><span class="content">[{</span><span class="char">\"</span><span class="content">title</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">album_one</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">artist</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">foo</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">ntracks</span><span class="char">\"</span><span class="content">:12}]}</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 73</span>      Artist expected = jsonb.fromJson(expectedString, Artist.class);
<span class="line-numbers"> 74</span>
<span class="line-numbers"> 75</span>      <span class="predefined-type">String</span> actualString = response.readEntity(<span class="predefined-type">String</span>.class);
<span class="line-numbers"> 76</span>      Artist<span class="type">[]</span> actual = jsonb.fromJson(actualString, Artist<span class="type">[]</span>.class);
<span class="line-numbers"> 77</span>
<span class="line-numbers"> 78</span>      assertEquals(expected.name, actual[<span class="integer">0</span>].name,
<span class="line-numbers"> 79</span>        <span class="string"><span class="delimiter">"</span><span class="content">Expected names of artists does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 80</span>
<span class="line-numbers"> 81</span>      response.close();
<span class="line-numbers"> 82</span>    }
<span class="line-numbers"> 83</span>    <span class="comment">// end::testArtistDeserialization[]</span>
<span class="line-numbers"> 84</span>
<span class="line-numbers"> 85</span>    <span class="comment">// tag::test-2[]</span>
<span class="line-numbers"> 86</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 87</span>    <span class="comment">// end::test-2[]</span>
<span class="line-numbers"> 88</span>    <span class="comment">// tag::testJsonBAlbumCount[]</span>
<span class="line-numbers"> 89</span>    <span class="directive">public</span> <span class="type">void</span> testJsonBAlbumCount() {
<span class="line-numbers"> 90</span>      <span class="predefined-type">String</span><span class="type">[]</span> artists = {<span class="string"><span class="delimiter">"</span><span class="content">dj</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">bar</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>};
<span class="line-numbers"> 91</span>      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; artists.length; i++) {
<span class="line-numbers"> 92</span>        response = client.target(targetUrl + artists[i]).request().get();
<span class="line-numbers"> 93</span>        <span class="local-variable">this</span>.assertResponse(targetUrl + artists[i], response);
<span class="line-numbers"> 94</span>
<span class="line-numbers"> 95</span>        <span class="type">int</span> expected = i;
<span class="line-numbers"> 96</span>        <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers"> 97</span>        assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Album count for </span><span class="delimiter">"</span></span>
<span class="line-numbers"> 98</span>                      + artists[i] + <span class="string"><span class="delimiter">"</span><span class="content"> does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 99</span>
<span class="line-numbers">100</span>        response.close();
<span class="line-numbers">101</span>      }
<span class="line-numbers">102</span>    }
<span class="line-numbers">103</span>    <span class="comment">// end::testJsonBAlbumCount[]</span>
<span class="line-numbers">104</span>
<span class="line-numbers">105</span>    <span class="comment">// tag::testAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">106</span>    <span class="comment">// tag::test-3[]</span>
<span class="line-numbers">107</span>    <span class="annotation">@Test</span>
<span class="line-numbers">108</span>    <span class="comment">// end::test-3[]</span>
<span class="line-numbers">109</span>    <span class="comment">// tag::testJsonBAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">110</span>    <span class="directive">public</span> <span class="type">void</span> testJsonBAlbumCountForUnknownArtist() {
<span class="line-numbers">111</span>      response = client.target(targetUrl + <span class="string"><span class="delimiter">"</span><span class="content">unknown-artist</span><span class="delimiter">"</span></span>).request().get();
<span class="line-numbers">112</span>
<span class="line-numbers">113</span>      <span class="type">int</span> expected = -<span class="integer">1</span>;
<span class="line-numbers">114</span>      <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers">115</span>      assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Unknown artist must have -1 albums</span><span class="delimiter">"</span></span>);
<span class="line-numbers">116</span>
<span class="line-numbers">117</span>      response.close();
<span class="line-numbers">118</span>    }
<span class="line-numbers">119</span>    <span class="comment">// end::testJsonBAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">120</span>
<span class="line-numbers">121</span>    <span class="comment">// tag::test-4[]</span>
<span class="line-numbers">122</span>    <span class="annotation">@Test</span>
<span class="line-numbers">123</span>    <span class="comment">// end::test-4[]</span>
<span class="line-numbers">124</span>    <span class="comment">// tag::testJsonPArtistCount[]</span>
<span class="line-numbers">125</span>    <span class="directive">public</span> <span class="type">void</span> testJsonPArtistCount() {
<span class="line-numbers">126</span>      response = client.target(targetUrl).request().get();
<span class="line-numbers">127</span>      <span class="local-variable">this</span>.assertResponse(targetUrl, response);
<span class="line-numbers">128</span>
<span class="line-numbers">129</span>      <span class="type">int</span> expected = <span class="integer">3</span>;
<span class="line-numbers">130</span>      <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers">131</span>      assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Expected number of artists does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers">132</span>
<span class="line-numbers">133</span>      response.close();
<span class="line-numbers">134</span>    }
<span class="line-numbers">135</span>    <span class="comment">// end::testJsonPArtistCount[]</span>
<span class="line-numbers">136</span>
<span class="line-numbers">137</span>    <span class="comment">/**</span>
<span class="line-numbers">138</span><span class="comment">     * Asserts that the given URL has the correct (200) response code.</span>
<span class="line-numbers">139</span><span class="comment">     */</span>
<span class="line-numbers">140</span>    <span class="comment">// tag::assertResponse[]</span>
<span class="line-numbers">141</span>    <span class="directive">private</span> <span class="type">void</span> assertResponse(<span class="predefined-type">String</span> url, Response response) {
<span class="line-numbers">142</span>      assertEquals(<span class="integer">200</span>, response.getStatus(), <span class="string"><span class="delimiter">"</span><span class="content">Incorrect response code from </span><span class="delimiter">"</span></span> + url);
<span class="line-numbers">143</span>    }
<span class="line-numbers">144</span>    <span class="comment">// end::assertResponse[]</span>
<span class="line-numbers">145</span>    <span class="comment">// end::tests[]</span>
<span class="line-numbers">146</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testJsonBAlbumCount">testJsonBAlbumCount</code> and <code class="hotspot=testJsonBAlbumCountForUnknownArtist">testJsonBAlbumCountForUnknownArtist</code> tests both use the <code>total/{artist}</code> endpoint which invokes JSON-B.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testJsonBAlbumCount">testJsonBAlbumCount</code> test case checks that deserialization with JSON-B was done correctly and that the correct number of albums is returned for each artist in the JSON.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testJsonBAlbumCountForUnknownArtist">testJsonBAlbumCountForUnknownArtist</code> test case is similar to <code class="hotspot=testJsonBAlbumCount">testJsonBAlbumCount</code> but instead checks an artist that does not exist in the JSON and ensures that a value of <code>-1</code> is returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="processing-with-json-p-test">Processing with JSON-P test</h3>
<div class="paragraph">
<p>ConsumingRestIT.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,comment">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers">  1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers">  2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers">  3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers">  4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers">  5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers">  6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers">  7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers">  8</span><span class="comment"> *</span>
<span class="line-numbers">  9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers"> 10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers"> 11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers"> 12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.consumingrest</span>;
<span class="line-numbers"> 13</span>
<span class="line-numbers"> 14</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertEquals</span>;
<span class="line-numbers"> 15</span>
<span class="line-numbers"> 16</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.Jsonb</span>;
<span class="line-numbers"> 17</span><span class="keyword">import</span> <span class="include">jakarta.json.bind.JsonbBuilder</span>;
<span class="line-numbers"> 18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers"> 19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers"> 20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers"> 21</span>
<span class="line-numbers"> 22</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.AfterEach</span>;
<span class="line-numbers"> 23</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeEach</span>;
<span class="line-numbers"> 24</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeAll</span>;
<span class="line-numbers"> 25</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="line-numbers"> 26</span>
<span class="line-numbers"> 27</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.consumingrest.model.Artist</span>;
<span class="line-numbers"> 28</span>
<span class="line-numbers"> 29</span><span class="directive">public</span> <span class="type">class</span> <span class="class">ConsumingRestIT</span> {
<span class="line-numbers"> 30</span>
<span class="line-numbers"> 31</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> port;
<span class="line-numbers"> 32</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> baseUrl;
<span class="line-numbers"> 33</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> targetUrl;
<span class="line-numbers"> 34</span>
<span class="line-numbers"> 35</span>    <span class="directive">private</span> Client client;
<span class="line-numbers"> 36</span>    <span class="directive">private</span> Response response;
<span class="line-numbers"> 37</span>
<span class="line-numbers"> 38</span>    <span class="comment">// tag::BeforeAll[]</span>
<span class="line-numbers"> 39</span>    <span class="annotation">@BeforeAll</span>
<span class="line-numbers"> 40</span>    <span class="comment">// end::BeforeAll[]</span>
<span class="line-numbers"> 41</span>    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> oneTimeSetup() {
<span class="line-numbers"> 42</span>      port = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">http.port</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 43</span>      baseUrl = <span class="string"><span class="delimiter">"</span><span class="content">http://localhost:</span><span class="delimiter">"</span></span> + port + <span class="string"><span class="delimiter">"</span><span class="content">/artists/</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 44</span>      targetUrl = baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">total/</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 45</span>    }
<span class="line-numbers"> 46</span>
<span class="line-numbers"> 47</span>    <span class="comment">// tag::BeforeEach[]</span>
<span class="line-numbers"> 48</span>    <span class="annotation">@BeforeEach</span>
<span class="line-numbers"> 49</span>    <span class="comment">// end::BeforeEach[]</span>
<span class="line-numbers"> 50</span>    <span class="directive">public</span> <span class="type">void</span> setup() {
<span class="line-numbers"> 51</span>      client = ClientBuilder.newClient();
<span class="line-numbers"> 52</span>    }
<span class="line-numbers"> 53</span>
<span class="line-numbers"> 54</span>    <span class="comment">// tag::AfterEach[]</span>
<span class="line-numbers"> 55</span>    <span class="annotation">@AfterEach</span>
<span class="line-numbers"> 56</span>    <span class="comment">// end::AfterEach[]</span>
<span class="line-numbers"> 57</span>    <span class="directive">public</span> <span class="type">void</span> teardown() {
<span class="line-numbers"> 58</span>      client.close();
<span class="line-numbers"> 59</span>    }
<span class="line-numbers"> 60</span>
<span class="line-numbers"> 61</span>    <span class="comment">// tag::test-1[]</span>
<span class="line-numbers"> 62</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 63</span>    <span class="comment">// end::test-1[]</span>
<span class="line-numbers"> 64</span>    <span class="comment">// tag::testArtistDeserialization[]</span>
<span class="line-numbers"> 65</span>    <span class="directive">public</span> <span class="type">void</span> testArtistDeserialization() {
<span class="line-numbers"> 66</span>      response = client.target(baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>).request().get();
<span class="line-numbers"> 67</span>      <span class="local-variable">this</span>.assertResponse(baseUrl + <span class="string"><span class="delimiter">"</span><span class="content">jsonString</span><span class="delimiter">"</span></span>, response);
<span class="line-numbers"> 68</span>
<span class="line-numbers"> 69</span>      Jsonb jsonb = JsonbBuilder.create();
<span class="line-numbers"> 70</span>
<span class="line-numbers"> 71</span>      <span class="predefined-type">String</span> expectedString = <span class="string"><span class="delimiter">"</span><span class="content">{</span><span class="char">\"</span><span class="content">name</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">foo</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">albums</span><span class="char">\"</span><span class="content">:</span><span class="delimiter">"</span></span>
<span class="line-numbers"> 72</span>        + <span class="string"><span class="delimiter">"</span><span class="content">[{</span><span class="char">\"</span><span class="content">title</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">album_one</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">artist</span><span class="char">\"</span><span class="content">:</span><span class="char">\"</span><span class="content">foo</span><span class="char">\"</span><span class="content">,</span><span class="char">\"</span><span class="content">ntracks</span><span class="char">\"</span><span class="content">:12}]}</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 73</span>      Artist expected = jsonb.fromJson(expectedString, Artist.class);
<span class="line-numbers"> 74</span>
<span class="line-numbers"> 75</span>      <span class="predefined-type">String</span> actualString = response.readEntity(<span class="predefined-type">String</span>.class);
<span class="line-numbers"> 76</span>      Artist<span class="type">[]</span> actual = jsonb.fromJson(actualString, Artist<span class="type">[]</span>.class);
<span class="line-numbers"> 77</span>
<span class="line-numbers"> 78</span>      assertEquals(expected.name, actual[<span class="integer">0</span>].name,
<span class="line-numbers"> 79</span>        <span class="string"><span class="delimiter">"</span><span class="content">Expected names of artists does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 80</span>
<span class="line-numbers"> 81</span>      response.close();
<span class="line-numbers"> 82</span>    }
<span class="line-numbers"> 83</span>    <span class="comment">// end::testArtistDeserialization[]</span>
<span class="line-numbers"> 84</span>
<span class="line-numbers"> 85</span>    <span class="comment">// tag::test-2[]</span>
<span class="line-numbers"> 86</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 87</span>    <span class="comment">// end::test-2[]</span>
<span class="line-numbers"> 88</span>    <span class="comment">// tag::testJsonBAlbumCount[]</span>
<span class="line-numbers"> 89</span>    <span class="directive">public</span> <span class="type">void</span> testJsonBAlbumCount() {
<span class="line-numbers"> 90</span>      <span class="predefined-type">String</span><span class="type">[]</span> artists = {<span class="string"><span class="delimiter">"</span><span class="content">dj</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">bar</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>};
<span class="line-numbers"> 91</span>      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; artists.length; i++) {
<span class="line-numbers"> 92</span>        response = client.target(targetUrl + artists[i]).request().get();
<span class="line-numbers"> 93</span>        <span class="local-variable">this</span>.assertResponse(targetUrl + artists[i], response);
<span class="line-numbers"> 94</span>
<span class="line-numbers"> 95</span>        <span class="type">int</span> expected = i;
<span class="line-numbers"> 96</span>        <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers"> 97</span>        assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Album count for </span><span class="delimiter">"</span></span>
<span class="line-numbers"> 98</span>                      + artists[i] + <span class="string"><span class="delimiter">"</span><span class="content"> does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 99</span>
<span class="line-numbers">100</span>        response.close();
<span class="line-numbers">101</span>      }
<span class="line-numbers">102</span>    }
<span class="line-numbers">103</span>    <span class="comment">// end::testJsonBAlbumCount[]</span>
<span class="line-numbers">104</span>
<span class="line-numbers">105</span>    <span class="comment">// tag::testAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">106</span>    <span class="comment">// tag::test-3[]</span>
<span class="line-numbers">107</span>    <span class="annotation">@Test</span>
<span class="line-numbers">108</span>    <span class="comment">// end::test-3[]</span>
<span class="line-numbers">109</span>    <span class="comment">// tag::testJsonBAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">110</span>    <span class="directive">public</span> <span class="type">void</span> testJsonBAlbumCountForUnknownArtist() {
<span class="line-numbers">111</span>      response = client.target(targetUrl + <span class="string"><span class="delimiter">"</span><span class="content">unknown-artist</span><span class="delimiter">"</span></span>).request().get();
<span class="line-numbers">112</span>
<span class="line-numbers">113</span>      <span class="type">int</span> expected = -<span class="integer">1</span>;
<span class="line-numbers">114</span>      <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers">115</span>      assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Unknown artist must have -1 albums</span><span class="delimiter">"</span></span>);
<span class="line-numbers">116</span>
<span class="line-numbers">117</span>      response.close();
<span class="line-numbers">118</span>    }
<span class="line-numbers">119</span>    <span class="comment">// end::testJsonBAlbumCountForUnknownArtist[]</span>
<span class="line-numbers">120</span>
<span class="line-numbers">121</span>    <span class="comment">// tag::test-4[]</span>
<span class="line-numbers">122</span>    <span class="annotation">@Test</span>
<span class="line-numbers">123</span>    <span class="comment">// end::test-4[]</span>
<span class="line-numbers">124</span>    <span class="comment">// tag::testJsonPArtistCount[]</span>
<span class="line-numbers">125</span>    <span class="directive">public</span> <span class="type">void</span> testJsonPArtistCount() {
<span class="line-numbers">126</span>      response = client.target(targetUrl).request().get();
<span class="line-numbers">127</span>      <span class="local-variable">this</span>.assertResponse(targetUrl, response);
<span class="line-numbers">128</span>
<span class="line-numbers">129</span>      <span class="type">int</span> expected = <span class="integer">3</span>;
<span class="line-numbers">130</span>      <span class="type">int</span> actual = response.readEntity(<span class="type">int</span>.class);
<span class="line-numbers">131</span>      assertEquals(expected, actual, <span class="string"><span class="delimiter">"</span><span class="content">Expected number of artists does not match</span><span class="delimiter">"</span></span>);
<span class="line-numbers">132</span>
<span class="line-numbers">133</span>      response.close();
<span class="line-numbers">134</span>    }
<span class="line-numbers">135</span>    <span class="comment">// end::testJsonPArtistCount[]</span>
<span class="line-numbers">136</span>
<span class="line-numbers">137</span>    <span class="comment">/**</span>
<span class="line-numbers">138</span><span class="comment">     * Asserts that the given URL has the correct (200) response code.</span>
<span class="line-numbers">139</span><span class="comment">     */</span>
<span class="line-numbers">140</span>    <span class="comment">// tag::assertResponse[]</span>
<span class="line-numbers">141</span>    <span class="directive">private</span> <span class="type">void</span> assertResponse(<span class="predefined-type">String</span> url, Response response) {
<span class="line-numbers">142</span>      assertEquals(<span class="integer">200</span>, response.getStatus(), <span class="string"><span class="delimiter">"</span><span class="content">Incorrect response code from </span><span class="delimiter">"</span></span> + url);
<span class="line-numbers">143</span>    }
<span class="line-numbers">144</span>    <span class="comment">// end::assertResponse[]</span>
<span class="line-numbers">145</span>    <span class="comment">// end::tests[]</span>
<span class="line-numbers">146</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testJsonPArtistCount">testJsonPArtistCount</code> test uses the <code>total</code> endpoint which invokes JSON-P. This test checks that deserialization with JSON-P was done correctly and that the correct number of artists is returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="running-the-tests">Running the tests</h3>
<div class="paragraph">
<p>Becayse you started Open Liberty in dev mode at the start of the guide, press the <code>enter/return</code> key to run the tests.</p>
</div>
<div class="paragraph">
<p>If the tests pass, you see a similar output to the following example:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running it.io.openliberty.guides.consumingrest.ConsumingRestIT
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.59 sec - in it.io.openliberty.guides.consumingrest.ConsumingRestIT

Results :

Tests run: 4, Failures: 0, Errors: 0, Skipped: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you are done checking out the service, exit dev mode by typing <code>q</code> in the command-line session where you ran Liberty, and then press the <code>enter/return</code> key.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-the-application">Building the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are satisfied with your application, run the Maven <code>package</code> goal to build the WAR file in the <code>target</code> directory:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre>mvn package</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="great-work-youre-done">Great work! You’re done!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You just accessed a simple RESTful web service and consumed its resources by using JSON-B and JSON-P in Open Liberty.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guide-attribution">Guide Attribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Consuming a RESTful web service <span class="licensedClass">by</span> Open Liberty <span class="licensedClass">is licensed under</span> CC BY-ND 4.0</p>
</div>
</div>
</div>
    </div>
  </div>

  <!-- Code section -->
  <div id="code_column" class="position_relative" tabindex="0">
    <div id="code_column_title_container">
      <div id="code_column_tabs_container" class="dimmed">
        <ul id="code_column_tabs" class="nav" role="tablist"></ul>
      </div>
      <div class="copyFileButton" tabindex="0">
        <img src="/img/guides_copy_button.svg" alt="Copy file contents" title="Copy file contents">
        <div id="code_section_copied_confirmation">Copied to clipboard </div>
      </div>
    </div>
    <div id="code_column_content"></div>

    <div id="prereqs_container">
      <p id="prereqs_title">Prerequisites:</p>
      <div class="prereqs_list"></div>
      <div class="skills_network_container">
        <div class="skills_network_description"></div>
      </div>
    </div>

    <button id="dismiss_button" aria-label="Back to text" tabindex="0">
      Back to text
    </button>
  </div>
</div>

<!-- Build a list of all the documents in the guides code base -->






<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->


    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    


<!-- Sort list of guides by date with most recent first -->





<div id="end_of_guide">
        <h2 tabindex="0">Nice work! Where to next?</h2>
        <div id="end_of_guide_left_section">
            <p id="guide_attribution"></p>
            
            <h3 id="feedback_rating_question">What did you think of this guide?</h3>
            <div id="feedback_ratings">
                <img class="guide_rating" id="extreme_dislike" src="/img/1_Extreme_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Extreme Dislike" data-guide-rating="1" tabindex="0" aria-label="Rate this guide as extreme dislike">
                <img class="guide_rating" id="dislike" src="/img/2_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Dislike" data-guide-rating="2" tabindex="0" aria-label="Rate this guide as dislike">
                <img class="guide_rating" id="like" src="/img/3_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Like" data-guide-rating="3" tabindex="0" aria-label="Rate this guide as like">
                <img class="guide_rating" id="extreme_like" src="/img/4_Extreme_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Extreme Like" data-guide-rating="4" tabindex="0" aria-label="Rate this guide as extreme like">
            </div>

            <div id="like_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <button id="close_button" class="popup_button" onclick="$('#like_popup').hide();">Close</button>
                </div>
            </div>

            <div id="dislike_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <p id="open_issue">Would you like to open an issue in GitHub?</p>
                    
                        <a href="https://github.com/OpenLiberty/guide-rest-client-java/issues/new" target="_blank" id="yes_button" class="popup_button" onclick="$('#dislike_popup').hide();" rel="noopener noreferrer">Yes</a>
                    
                    <button id="no_button" class="popup_button" onclick="$('#dislike_popup').hide();">No, thank you</button>
                </div>
            </div>

            <h3 id="improve_guide_feedback">What could make this guide better?</h3>
            
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-rest-client-java/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-rest-client-java/pulls">Create a pull request</a> to contribute to this guide</p>
            

            <h3 id="need_help">Need help?</h3>
            <p><a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/open-liberty">Ask a question on Stack Overflow</a></p>

            <h3>Like Open Liberty? Star our repo on GitHub.</h3>
            <a class="github-button" href="https://github.com/OpenLiberty/open-liberty" data-icon="octicon-star" aria-label="Star OpenLiberty/open-liberty on GitHub" target="_blank" rel="noopener noreferrer">Star</a>
        </div>
        <div id="end_of_guide_right_section">
            <h3 id="where_to_next">Where to next?</h3>

            
            

            <!-- Related guides section -->
            
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/rest-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Creating a RESTful web service</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">30 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/rest-client-angularjs.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Consuming a RESTful web service with AngularJS</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">20 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                </div>
            </div>
            
        </div>
    </div>



    </main>

    



<footer>
    <div id="footer_gray_background">
        <div id="footer_top_container" class="footer_container container-fluid">
            <div id="footer_project_container">
                <span id="footer_open_liberty"></span>
                <p id="footer_project">IBM 开放式源代码项目</p>
            </div>
            <div id="footer_round_links_container">
                <a id="footer_github_link" class="footer_round_btn" href="https://github.com/OpenLiberty/" target="_blank" rel="noopener noreferrer" aria-label="Github"></a>
                <a id="footer_twitter_link" class="footer_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="footer_stackoverflow_link" class="footer_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="footer_groupsio_link" class="footer_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="footer_gitter_link" class="footer_round_btn" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>         
    </div>

    <div id="footer_bottom_container" class="footer_container container-fluid">
        <div id="footer_bottom_left_section">
            <p id="footer_copyright">© Copyright IBM Corp. 2017, 2023</p>
            <p class="vertical_bar">|</p>
            <a id="footer_privacy_policy_link" href="https://www.ibm.com/privacy/" target="_blank" rel="noopener noreferrer" class="left_footer_link">隐私策略</a>
            <p class="vertical_bar">|</p>
            <a id="footer_license_link" href="https://github.com/OpenLiberty/open-liberty/blob/release/LICENSE" target="_blank" rel="noopener noreferrer" class="left_footer_link">许可证</a>
            <p class="vertical_bar">|</p>
            <a id="footer_logos_link" href="https://github.com/OpenLiberty/logos" target="_blank" rel="noopener noreferrer" class="left_footer_link">洛戈斯</a>
        </div>
        <div id="footer_bottom_right_section">
            <a id="footer_docs_link" href="/docs" aria-label="Open Liberty Docs" class="right_footer_link blue_link_light_background">文档</a>
            <a id="footer_blog_link" href="/blog" aria-label="Open Liberty Blog" class="right_footer_link blue_link_light_background">博客</a>
            <a id="footer_support_link" href="/support" aria-label="Open Liberty Support" class="right_footer_link blue_link_light_background">支持</a>
        </div>
    </div>
</footer>

<!-- PRE-LOADED IMAGES FOR ON HOVER BEHAVIOR -->
<div class="d-none hidden">
    <img src="/img/Footer_GitCat_Hover.svg" alt="OpenLiberty Github link">
    <img src="/img/Footer_TwitterBird_Hover.svg" alt="OpenLibertyIO Twitter link">
    <img src="/img/Footer_StackO_Hover.svg" alt="Open-liberty Stack Overflow link">
    <img src="/img/Footer_GroupsIO_Hover.svg" alt="Openliberty Groups IO link">
    <img src="/img/footer_gitter_hover.svg" alt="Openliberty Gitter link">
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha512-lzilC+JFd6YV8+vQRNRtU7DOqv5Sa9Ek53lXt/k91HZTJpytHS1L6l1mMKR9K6VVoDt4LiEXaa6XBrYk1YhGTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>


<script type="text/javascript" src="/zh-Hans/assets/devEnvironment.js"></script>




  <script type="text/javascript" src="/zh-Hans/assets/guide-common.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/toc.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/tabs.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-static.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-multipane-static.js"></script>


<script type="text/javascript" src="/zh-Hans/assets/openliberty.js"></script>

  </body>

</html>
