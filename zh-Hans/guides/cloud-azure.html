<!DOCTYPE html>
<html lang="zh-Hans">

  





<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Deploying Java microservices to Microsoft Azure Kubernetes Service (AKS)
    
  </title>
  <meta name="description" content="A getting started tutorial with examples on how to deploy Java microservices to Microsoft Azure Kubernetes Service (AKS) using Azure Container Registry (ACR).">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/openliberty.css">
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/coderay-custom.css">

  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header-dark.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/toc-multipane-static.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/end-of-guide.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-card.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/tabs.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-common.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane-static.css">
  

  

  

  <link rel="canonical" href="https://openliberty.io/zh-Hans/guides/cloud-azure">
  <link rel="alternate" type="application/rss+xml" title="Open Liberty" href="/zh-Hans/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Asap:400,500" rel="stylesheet">
    
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@OpenLibertyIO" />
  <meta name="twitter:title" content="Deploying Java microservices to Microsoft Azure Kubernetes Service (AKS)" />
  <meta name="twitter:description" content="A getting started tutorial with examples on how to deploy Java microservices to Microsoft Azure Kubernetes Service (AKS) using Azure Container Registry (ACR)." />

  <meta property='og:title' content="Deploying Java microservices to Microsoft Azure Kubernetes Service (AKS)" />
  <meta property='og:image' content="https://openliberty.io/img/twitter_card.jpg" />
  <meta property='og:image:alt' content="Open Liberty Logo" />
  <meta property='og:description' content="A getting started tutorial with examples on how to deploy Java microservices to Microsoft Azure Kubernetes Service (AKS) using Azure Container Registry (ACR)." />
  <meta property='og:url' content="https://openliberty.io/zh-Hans/guides/cloud-azure" />
  <meta property='og:type' content="website" />
  
  <meta name="google-site-verification" content="h2P030H9b66CyL1nEmWfrZB8Fr14h9LmVMG7Ur0caBs" />

  
      <meta name="robots" content="noindex" />
  

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>


  <body>
    
    

    


<!--  -->

<header>
    <nav id="nav_bar">
        <div id="nav_header">
            <a id="home_link" href="/" aria-label="Open Liberty Home">
                <img id="ol_logo" src="/img/docs_openliberty_logo.png" alt="Open Liberty Logo">
            </a>
            <button id="hamburger_toggle_button" onclick="$('#nav_bar').toggleClass('responsive');">
                <span id="hamburger_toggle_icon"></span>
            </button>
        </div>
        <div id="hamburger_menu">
            <ul class="nav_list">
                <li class="nav_link">
                    <a href="/start/">入门</a>
                </li>
                <li class="nav_link">
                    <a href="/guides/">指南</a>
                </li>
                <li class="nav_link">
                    <a href="/docs/">文档</a>
                </li>
                <li class="nav_link">
                    <a href="/support/">支持</a>
                </li>
                <li class="nav_link">
                    <a href="/blog/">博客</a>
                </li>
            </ul>
            <div id="header_round_links_container"> 
                <a id="header_twitter_link" class="header_round_button" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="header_stackoverflow_link" class="header_round_button" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="header_groupsio_link" class="header_round_button" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="header_gitter_link" class="header_round_button" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>

    </nav>
</header>


    <main aria-label="Content">

      <!-- Build a list of all the documents in the guides code base -->
  
 

<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->
<!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
 

<!-- Sort list of guides by date with most recent first -->


<div id="background_container">
  <div id="toc_hotspot"></div>
  <!-- Guide's table of contents section -->
  <div id="toc_column" class="collapse inline open">
    <div id="toc_inner">
       
      <div id="close_container">
        <img id="toc_close_white" src="/img/toc_close_white.svg" alt="Close the table of contents" tabindex="0">
      </div>
      <h3 id="toc_title">Contents</h3>
      <div id="toc_container"><ul class="sectlevel1">
<li><a href="#what-youll-learn">What you’ll learn</a></li>
<li><a href="#additional-prerequisites">Additional prerequisites</a></li>
<li><a href="#getting-started">Getting started</a></li>
<li>
<a href="#managing-an-azure-container-registry">Managing an Azure Container Registry</a>
<ul class="sectlevel2">
<li><a href="#creating-a-resource-group">Creating a resource group</a></li>
<li><a href="#creating-a-container-registry">Creating a container registry</a></li>
<li><a href="#logging-into-the-container-registry">Logging into the container registry</a></li>
</ul>
</li>
<li>
<a href="#uploading-images-to-a-container-registry">Uploading images to a container registry</a>
<ul class="sectlevel2">
<li><a href="#building-your-docker-images">Building your Docker images</a></li>
<li><a href="#pushing-the-images-to-a-container-registry">Pushing the images to a container registry</a></li>
</ul>
</li>
<li>
<a href="#creating-a-kubernetes-cluster-on-aks">Creating a Kubernetes cluster on AKS</a>
<ul class="sectlevel2">
<li><a href="#provisioning-a-cluster">Provisioning a cluster</a></li>
<li><a href="#storing-registry-credentials-in-a-secret">Storing registry credentials in a secret</a></li>
</ul>
</li>
<li>
<a href="#deploying-microservices-to-aks">Deploying microservices to AKS</a>
<ul class="sectlevel2">
<li><a href="#creating-a-deployment-definition">Creating a deployment definition</a></li>
<li><a href="#deploying-your-application">Deploying your application</a></li>
<li><a href="#making-requests-to-the-microservices">Making requests to the microservices</a></li>
</ul>
</li>
<li>
<a href="#testing-the-microservices">Testing the microservices</a>
<ul class="sectlevel2">
<li><a href="#running-the-tests">Running the tests</a></li>
</ul>
</li>
<li><a href="#tearing-down-the-environment">Tearing down the environment</a></li>
<li><a href="#great-work-youre-done">Great work! You’re done!</a></li>
<li><a href="#guide-attribution">Guide Attribution</a></li>
</ul></div>
      <div id="toc_separator"></div>
      
      <h3 id="tag_title">标签</h3>
      <div id="tags_container"></div>
    </div>
  </div>
  <div id="toc_indicator" tabindex="0" aria-label="Open the table of contents" class="hidden">
    <img src="/img/arrow_white.svg" alt="arrow">
  </div>
  <div id="toc_line" class="open"></div>
  <!-- Entire guide section -->
  <div id="guide_column" class="position_relative open">
    <div id="guide_content">
      <!-- Guide header section -->
      <div id="guide_meta" class="sect1" tabindex="0">
        <h1 id="guide_title">Deploying microservices to Azure Kubernetes Service</h1>
        <div id="duration_container">
          <img src="/img/guide_duration_clock_icon_large.svg" alt="duration">
          <span id="guide_duration">1 hour</span>

          <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
          <!-- If new posts count is less than 4, use 4 most recent posts -->
           
          <!-- If new posts count is >= 4, use posts from last 30 days-->
          
          <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
          <!-- Count number of guides from past last 12 weeks that is 84 days-->
          <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
          
        </div>
        <div id="mobile_prereqs_section">
          <p id="mobile_prereqs_title">Prerequisites:</p>
          <div class="prereqs_list"></div>
          <div class="skills_network_container">
            <div class="skills_network_description"></div>
          </div>
        </div>
      </div>

      <div class="scroller_anchor"></div>
      <div id="mobile_toc_accordion_container" data-toggle="collapse" data-target="#toc_column" aria-expanded="false" aria-controls="toc_column" role="button">
        <div role="menuitem" id="mobile_toc_accordion">
          <button class="breadcrumb_hamburger toc-toggle collapsed" type="button" tabindex="0">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <img src="/img/toc_close_green.svg" class="TOC_Close_SVG hidden img-responsive" alt="Table of contents close button">
          </button>
          <span>Table of contents</span>
        </div>
      </div>

      <!-- Guide content section -->
      <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note hidden">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This repository contains the guide documentation source. To view the guide in published form,
view it on the <a href="https://openliberty.io/guides/cloud-azure.html">Open Liberty website</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explore how to deploy microservices to Azure Kubernetes Service (AKS) on Microsoft Azure.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-youll-learn">What you’ll learn</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will learn how to deploy two microservices in Open Liberty containers to a Kubernetes cluster on
Azure Kubernetes Service (AKS).</p>
</div>
<div class="paragraph">
<p>Kubernetes is an open source container orchestrator that automates many tasks involved in
deploying, managing, and scaling containerized applications. If you would like to learn
more about Kubernetes, check out the <a href="https://openliberty.io/guides/kubernetes-intro.html" target="_blank" rel="noopener">Deploying microservices to Kubernetes</a>
guide.</p>
</div>
<div class="paragraph">
<p>There are different cloud-based solutions for running your Kubernetes workloads.
A cloud-based infrastructure enables you to focus on developing your microservices
without worrying about low-level infrastructure details for deployment. Using a cloud helps
you to easily scale and manage your microservices in a high-availability setup.</p>
</div>
<div class="paragraph">
<p>Azure offers a managed Kubernetes service called Azure Kubernetes Service (AKS). Using AKS simplifies the process of running Kubernetes on Azure without
needing to install or maintain your own Kubernetes control plane. It provides a hosted Kubernetes
cluster that you can deploy your microservices to. You will use AKS with an Azure
Container Registry (ACR). ACR is a private registry that is used to store
and distribute your container images. Note, because AKS is not free a small
cost is associated with running this guide. See the official
<a href="https://azure.microsoft.com/en-us/pricing/details/kubernetes-service/" target="_blank" rel="noopener noreferrer">AKS pricing</a> documentation for more details.</p>
</div>
<div class="paragraph">
<p>The two microservices you will deploy are called <code>system</code> and <code>inventory</code>.
The <code>system</code> microservice returns the JVM system properties of the running container.
It also returns the name of the pod in the HTTP header, making replicas easy to distinguish from each other.
The <code>inventory</code> microservice adds the properties from the <code>system</code> microservice to the inventory.
This demonstrates how communication can be established between pods inside a cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-prerequisites">Additional prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you begin, the following additional tools need to be installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Docker:</strong> You need a containerization software for building containers. Kubernetes
supports various container types, but you will use Docker in this guide. For installation
instructions, refer to the official <a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer">Docker</a> documentation.
If you already have Docker installed, make sure to have it running.</p>
</li>
<li>
<p><strong>Azure Subscription:</strong> To run this guide, you will need an Azure subscription. Navigate to the
<a href="https://azure.microsoft.com/en-us/pricing/purchase-options/pay-as-you-go/" target="_blank" rel="noopener noreferrer">Microsoft Azure Purchase Options</a>
to create an account with your email and start a Pay-As-You-Go subscription.</p>
</li>
<li>
<p><strong>Azure CLI:</strong> You will need to use the Azure Command Line Interface (CLI). See the official
<a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" target="_blank" rel="noopener noreferrer">Install the Azure CLI</a>
documentation for information about setting up the Azure CLI for your platform.
To verify that the Azure CLI is installed correctly, run the following command:</p>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az --version</code></pre>
</div>
</div>
</li>
<li>
<p><strong>kubectl:</strong> You need the Kubernetes command-line tool <code>kubectl</code> to interact with your Kubernetes cluster.
If you do not have <code>kubectl</code> installed already, use the Azure CLI to download and install <code>kubectl</code> with the following command:</p>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az aks install-cli</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To begin this guide, make sure that you are logged in to Azure to get access to your subscription:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az login</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1 command">
<h2 id="getting-started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fastest way to work through this guide is to clone the <a href="https://github.com/openliberty/guide-cloud-azure.git" target="_blank" rel="noopener noreferrer">Git repository</a> and use the projects that are provided inside:</p>
</div>
<div id="git_clone" class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>git clone https://github.com/openliberty/guide-cloud-azure.git
cd guide-cloud-azure</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>start</code> directory contains the starting project that you will build upon.</p>
</div>
<div class="paragraph">
<p>The <code>finish</code> directory contains the finished project that you will build.</p>
</div>
<div class="paragraph">
<p>Before you begin, make sure you have all the necessary <span class="prerequisites">prerequisites</span>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managing-an-azure-container-registry">Managing an Azure Container Registry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To deploy your microservices, you need to create an Azure Container Registry in the same location
where your services are deployed, and link the registry to a resource group. Your registry will manage container instances
that will be deployed to a Kubernetes cluster.</p>
</div>
<div class="sect2">
<h3 id="creating-a-resource-group">Creating a resource group</h3>
<div class="paragraph">
<p>A resource group is an Azure construct to manage a logical collection of resources for your cloud deployments on Azure.
You must create a new resource group to manage the resources you need for your Kubernetes deployment.</p>
</div>
<div class="paragraph">
<p>To create a resource group, an Azure location must be specified. The metadata for your resources are stored at this specified Azure location.
If resources are created later without specifying a location, these new resources run in the
same region that you specified for creating a resource group.</p>
</div>
<div class="paragraph">
<p>See the list of available Azure regions for your Azure subscription:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az account list-locations -o table</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see an output similar to the following:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>DisplayName          Latitude    Longitude    Name
-------------------  ----------  -----------  ------------------
Central US           41.5908     -93.6208     centralus
East US              37.3719     -79.8164     eastus
East US 2            36.6681     -78.3889     eastus2
West US              37.783      -122.417     westus
North Central US     41.8819     -87.6278     northcentralus
South Central US     29.4167     -98.5        southcentralus
Canada Central       43.653      -79.383      canadacentral
Canada East          46.817      -71.217      canadaeast
UK South             50.941      -0.799       uksouth
UK West              53.427      -3.084       ukwest
West Central US      40.890      -110.234     westcentralus
West US 2            47.233      -119.852     westus2</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>name</code> column specifies the region name that you use to create your resource group.</p>
</div>
<div class="paragraph">
<p>However, AKS is not available in all regions. Make sure that the region you select is
<a href="https://azure.microsoft.com/en-us/global-infrastructure/services/?products=kubernetes-service" target="_blank" rel="noopener noreferrer">compatible with AKS</a>.</p>
</div>
<div class="paragraph">
<p>Create a resource group using the <code>az group create</code> command. Remember to replace <code>[location]</code> with a region
that is available for your subscription and compatible with AKS.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az group create -l [location] -n guideGroup</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see an output similar to the following:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>{
  "id": "/subscriptions/[subscription-id]/resourceGroups/guideGroup",
  "location": "[location]",
  "managedBy": null,
  "name": "guideGroup",
  "properties": {
    "provisioningState": "Succeeded"
  },
  "tags": null,
  "type": null
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-container-registry">Creating a container registry</h3>
<div class="paragraph">
<p>Your private container registry manages Docker images that you build in later steps.
With the Azure <code>az acr</code> command, create an Azure Container Registry.
Replace <code>[registry-name]</code> with a container registry name that is unique within Azure and
contains 5-50 alphanumeric characters. You can check whether a registry name already exists by
using the <code>az acr check-name -n [registry-name]</code> command.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az acr create -g guideGroup -n [registry-name] --sku Basic --admin-enabled</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>az acr create</code> command, the <code>-g</code> option specifies the resource group to designate to the container registry.
You created this resource group before as <code>guideGroup</code>. The <code>-n</code> option specifies the name of the
container registry to be created, which is defined as <code>[registry-name]</code>. The <code>--admin-enabled</code> flag indicates that the admin user is enabled.</p>
</div>
<div class="paragraph">
<p>The possible Stock Keeping Unit (SKU) values that can be passed into the <code>--sku</code> option are <code>Basic</code>, <code>Standard</code>, and <code>Premium</code>.
These different SKU options provide pricing for various levels of capacity and usage. You use a Basic SKU because it is cheaper
and the services you deploy have low storage and throughput requirements.</p>
</div>
<div class="paragraph">
<p>You will see an output similar to the following:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>{
  "adminUserEnabled": true,
  "creationDate": "2019-06-05T20:28:09.637994+00:00",
  "id": "/subscriptions/[subscription-id]/resourceGroups/guideGroup/providers/Microsoft.ContainerRegistry/registries/[registry-name]",
  "location": "[location]",
  "loginServer": "[registry-name].azurecr.io",
  "name": "[registry-name]",
  "networkRuleSet": null,
  "provisioningState": "Succeeded",
  "resourceGroup": "guideGroup",
  "sku": {
    "name": "Basic",
    "tier": "Basic"
  },
  "status": null,
  "storageAccount": null,
  "tags": {},
  "type": "Microsoft.ContainerRegistry/registries"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the output, the value for <code>loginServer</code> is the server name for your container registry,
which is <code>[registry-name].azurecr.io</code>, with all lowercase letters.</p>
</div>
</div>
<div class="sect2">
<h3 id="logging-into-the-container-registry">Logging into the container registry</h3>
<div class="paragraph">
<p>To push Docker images to your registry, you must log in to your Azure Container Registry by using the Azure CLI.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az acr login -n [registry-name]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you log in, you will see the following message:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>Login Succeeded</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="uploading-images-to-a-container-registry">Uploading images to a container registry</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="building-your-docker-images">Building your Docker images</h3>
<div class="paragraph">
<p>The starting Java project, which you can find in the <code>start</code> directory, is a multi-module Maven
project. It is made up of the <code>system</code> and <code>inventory</code> microservices. Each microservice exists in its own directory,
<code>start/system</code> and <code>start/inventory</code>. Both of these directories contain a Dockerfile, which is necessary
for building the Docker images. If you’re unfamiliar with Dockerfiles, check out the
<a href="https://openliberty.io/guides/containerize.html" target="_blank" rel="noopener">Containerizing microservices</a> guide.</p>
</div>
<div class="paragraph">
<p>Navigate to the <code>start</code> directory and run the following command:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn package</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that your microservices are packaged, build your
Docker images using the <code>docker build</code> command. To build your image, you need to have Docker installed
and your Docker daemon started.</p>
</div>
<div class="paragraph">
<p>Run the following commands to build and containerize the application:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>docker build -t system:1.0-SNAPSHOT system/.
docker build -t inventory:1.0-SNAPSHOT inventory/.</code></pre>
</div>
</div>
<div class="paragraph">
<p>To verify that the images are built, run the <code>docker images</code> command to list all local Docker images:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>docker images</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your two images <code>system</code> and <code>inventory</code> should appear in the list of all Docker images:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>REPOSITORY    TAG             IMAGE ID        CREATED          SIZE
inventory     1.0-SNAPSHOT    08fef024e986    4 minutes ago    471MB
system        1.0-SNAPSHOT    1dff6d0b4f31    5 minutes ago    470MB</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pushing-the-images-to-a-container-registry">Pushing the images to a container registry</h3>
<div class="paragraph">
<p>Pushing the images to a registry allows the cluster to create pods using your container images.</p>
</div>
<div class="paragraph">
<p>First, tag your container images with your registry.
Replace <code>[registry-server]</code> with the server name of your container registry.
To get the server for your registry, run the <code>az acr show -n [registry-name] --query loginServer</code> command.
The <code>[registry-server]</code> looks like <code>[registry-name].azurecr.io</code>.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>docker tag system:1.0-SNAPSHOT [registry-server]/system:1.0-SNAPSHOT
docker tag inventory:1.0-SNAPSHOT [registry-server]/inventory:1.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, push your images to the registry:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>docker push [registry-server]/system:1.0-SNAPSHOT
docker push [registry-server]/inventory:1.0-SNAPSHOT</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-kubernetes-cluster-on-aks">Creating a Kubernetes cluster on AKS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="provisioning-a-cluster">Provisioning a cluster</h3>
<div class="paragraph">
<p>To create your AKS cluster, use the <code>az aks create</code> cluster command.
When the cluster is created, the command outputs information about the cluster.
You might need to wait while your cluster is being created.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az aks create -g guideGroup -n guideCluster</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running this command creates an AKS cluster that is called <code>guideCluster</code> with the resource group
<code>guideGroup</code>.</p>
</div>
<div class="paragraph">
<p>The option <code>--node-count -c</code> can also be added to this <code>az aks create</code> command to create a cluster
with a certain number of nodes in the Kubernetes node pool. By default, if this option is excluded,
three nodes are assigned to the node pool.</p>
</div>
<div class="paragraph">
<p>An AKS cluster requires a service principal, which is an identity that is used to represent a resource in Azure that
can be assigned roles and permissions to interact with other resources and the Azure API. The <code>az aks create</code> command automatically generates
a service principal to use with your newly created cluster.
Optionally, you can <a href="https://docs.microsoft.com/en-us/azure/aks/kubernetes-service-principal#manually-create-a-service-principal" target="_blank" rel="noopener noreferrer">manually create a service principal</a> yourself and create a cluster with this new service principal.
However, to run this command, your Azure account must have permission access to create service principals.</p>
</div>
<div class="paragraph">
<p>Merge the credentials of your cluster into your current Kubernetes configuration by using the <code>az aks get-credentials</code> command.
The default Kubernetes configuration file that is updated with your cluster credentials is located within the <code>~/.kube/config</code> filepath.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az aks get-credentials -g guideGroup -n guideCluster</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see an output similar to the following:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>Merged "guideCluster" as current context in /Users/.kube/config</pre>
</div>
</div>
<div class="paragraph">
<p>Run the following command to check the status of the available nodes in your AKS cluster:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl get nodes</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>kubectl get nodes</code> command outputs information about three nodes, as the cluster was created with the default number of nodes in a node pool.
The <code>STATUS</code> of each node is in the <code>Ready</code> state.</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>NAME                       STATUS   ROLES   AGE     VERSION
aks-nodepool1-21407934-0   Ready    agent   2m25s   v1.12.8
aks-nodepool1-21407934-1   Ready    agent   2m48s   v1.12.8
aks-nodepool1-21407934-2   Ready    agent   2m34s   v1.12.8</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="storing-registry-credentials-in-a-secret">Storing registry credentials in a secret</h3>
<div class="paragraph">
<p>To be able to pull the images from your Azure container registry, the credentials of your registry must be added to your service
through a secret.</p>
</div>
<div class="paragraph">
<p>View the password for your Azure container registry:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az acr credential show -n [registry-name] --query "passwords[0].value" -o tsv</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>kubectl create secret docker-registry</code> command to create a secret to hold your registry credentials.
Replace <code>[password]</code> with the registry password that you viewed with the
<code>az acr credential show -n [registry-name]</code> command. The email that is associated with your Docker account replaces <code>[email-address]</code>.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl create secret docker-registry guidesecret \
    --docker-server=[registry-server] \
    --docker-username=[registry-name] \
    --docker-password=[password] \
    --docker-email=[email-address]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The secret is successfully created with the following output:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>secret/guidesecret created</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-microservices-to-aks">Deploying microservices to AKS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="creating-a-deployment-definition">Creating a deployment definition</h3>
<div class="paragraph">
<p>Now that your container images are built and you have created a Kubernetes cluster, you can deploy the images using a Kubernetes resource definition.</p>
</div>
<div class="paragraph">
<p>A Kubernetes resource definition is a <code>yaml</code> file that contains a description of all your
deployments, services, or any other resources that you want to deploy. All resources can
also be deleted from the cluster by using the same <code>yaml</code> file that you used to deploy them.
The <code class="hotspot">kubernetes.yaml</code> resource definition file is provided for you. If you are interested
in learning more about the Kubernetes resource definition, check out the
<a href="https://openliberty.io/guides/kubernetes-intro.html" target="_blank" rel="noopener">Deploying microservices to Kubernetes</a>
guide.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Update the <code>kubernetes.yaml</code> file in the <code>start</code> directory.</mark>
<code>kubernetes.yaml</code></pre>
</div>
</div>
<div class="paragraph edit_command_text">
<p>Replace <code class="hotspot=sysImage hotspot=invImage file=0">[registry-server]</code> with your container registry server.
You can get the login server for your registry by running the <code>az acr show -n [registry-name] --query loginServer</code> command.</p>
</div>
<div class="paragraph">
<p>kubernetes.yaml</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Text"><span class="line-numbers"> 1</span>apiVersion: apps/v1
<span class="line-numbers"> 2</span>kind: Deployment
<span class="line-numbers"> 3</span>metadata:
<span class="line-numbers"> 4</span>  name: system-deployment
<span class="line-numbers"> 5</span>  labels:
<span class="line-numbers"> 6</span>    app: system
<span class="line-numbers"> 7</span>spec:
<span class="line-numbers"> 8</span>  selector:
<span class="line-numbers"> 9</span>    matchLabels:
<span class="line-numbers">10</span>      app: system
<span class="line-numbers">11</span>  template:
<span class="line-numbers">12</span>    metadata:
<span class="line-numbers">13</span>      labels:
<span class="line-numbers">14</span>        app: system
<span class="line-numbers">15</span>    spec:
<span class="line-numbers">16</span>      containers:
<span class="line-numbers">17</span>      - name: system-container
<span class="line-numbers">18</span>        # tag::sysImage[]
<span class="line-numbers">19</span>        image: [registry-server]/system:1.0-SNAPSHOT
<span class="line-numbers">20</span>        # end::sysImage[]
<span class="line-numbers">21</span>        ports:
<span class="line-numbers">22</span>        - containerPort: 9080
<span class="line-numbers">23</span>      # tag::sysSecret[]
<span class="line-numbers">24</span>      imagePullSecrets:
<span class="line-numbers">25</span>      - name: guidesecret
<span class="line-numbers">26</span>      # end::sysSecret[]
<span class="line-numbers">27</span>---
<span class="line-numbers">28</span>apiVersion: apps/v1
<span class="line-numbers">29</span>kind: Deployment
<span class="line-numbers">30</span>metadata:
<span class="line-numbers">31</span>  name: inventory-deployment
<span class="line-numbers">32</span>  labels:
<span class="line-numbers">33</span>    app: inventory
<span class="line-numbers">34</span>spec:
<span class="line-numbers">35</span>  selector:
<span class="line-numbers">36</span>    matchLabels:
<span class="line-numbers">37</span>      app: inventory
<span class="line-numbers">38</span>  template:
<span class="line-numbers">39</span>    metadata:
<span class="line-numbers">40</span>      labels:
<span class="line-numbers">41</span>        app: inventory
<span class="line-numbers">42</span>    spec:
<span class="line-numbers">43</span>      containers:
<span class="line-numbers">44</span>      - name: inventory-container
<span class="line-numbers">45</span>        # tag::invImage[]
<span class="line-numbers">46</span>        image: [registry-server]/inventory:1.0-SNAPSHOT
<span class="line-numbers">47</span>        # end::invImage[]
<span class="line-numbers">48</span>        ports:
<span class="line-numbers">49</span>        - containerPort: 9081
<span class="line-numbers">50</span>      # tag::invSecret[]
<span class="line-numbers">51</span>      imagePullSecrets:
<span class="line-numbers">52</span>      - name: guidesecret
<span class="line-numbers">53</span>      # end::invSecret[]
<span class="line-numbers">54</span>---
<span class="line-numbers">55</span>apiVersion: v1
<span class="line-numbers">56</span>kind: Service
<span class="line-numbers">57</span>metadata:
<span class="line-numbers">58</span>  name: system-service
<span class="line-numbers">59</span>spec:
<span class="line-numbers">60</span>  # tag::sysLoadBalancer[]
<span class="line-numbers">61</span>  type: LoadBalancer
<span class="line-numbers">62</span>  # end::sysLoadBalancer[]
<span class="line-numbers">63</span>  selector:
<span class="line-numbers">64</span>    app: system
<span class="line-numbers">65</span>  ports:
<span class="line-numbers">66</span>  - protocol: TCP
<span class="line-numbers">67</span>    port: 9080
<span class="line-numbers">68</span>    targetPort: 9080
<span class="line-numbers">69</span>---
<span class="line-numbers">70</span>apiVersion: v1
<span class="line-numbers">71</span>kind: Service
<span class="line-numbers">72</span>metadata:
<span class="line-numbers">73</span>  name: inventory-service
<span class="line-numbers">74</span>spec:
<span class="line-numbers">75</span>  # tag::invLoadBalancer[]
<span class="line-numbers">76</span>  type: LoadBalancer
<span class="line-numbers">77</span>  # end::invLoadBalancer[]
<span class="line-numbers">78</span>  selector:
<span class="line-numbers">79</span>    app: inventory
<span class="line-numbers">80</span>  ports:
<span class="line-numbers">81</span>  - protocol: TCP
<span class="line-numbers">82</span>    port: 9081
<span class="line-numbers">83</span>    targetPort: 9081</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=sysImage hotspot=invImage file=0">image</code> is the name and tag of the container image that you want
to use for the container. The <code class="hotspot">kubernetes.yaml</code> file references the images that you pushed to your registry
for the <code class="hotspot=sysImage file=0">system</code> and <code class="hotspot=invImage file=0">inventory</code> repositories. These images can be pulled
with the <code class="hotspot=sysSecret hotspot=invSecret file=0">secret</code> that you defined before.</p>
</div>
<div class="paragraph">
<p>The service that is used to expose your deployments has a type of <code class="hotspot=sysLoadBalancer hotspot=invLoadBalancer file=0">LoadBalancer</code>.
This means you can access these services from IP addresses that forward incoming traffic to your nodepool via a specific port.
You can expose your services in other ways such as using a <code>NodePort</code> service type.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploying-your-application">Deploying your application</h3>
<div class="paragraph">
<p>To deploy your microservices to Azure Kubernetes Service, you need Kubernetes to create
the contents of the <code class="hotspot">kubernetes.yaml</code> file.</p>
</div>
<div class="paragraph">
<p>Run the following command to deploy the resources defined in the <code class="hotspot">kubernetes.yaml</code> file:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl create -f kubernetes.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see an output similar to the following:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>deployment.apps/system-deployment created
deployment.apps/inventory-deployment created
service/system-service created
service/inventory-service created</pre>
</div>
</div>
<div class="paragraph">
<p>Run the following command to check the status of your pods:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl get pods</code></pre>
</div>
</div>
<div class="paragraph">
<p>If all the pods are healthy and running, you see an output similar to the following:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>NAME                                    READY     STATUS    RESTARTS   AGE
system-deployment-6bd97d9bf6-4ccds      1/1       Running   0          15s
inventory-deployment-645767664f-nbtd9   1/1       Running   0          15s</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="making-requests-to-the-microservices">Making requests to the microservices</h3>
<div class="paragraph">
<p>You need the external IP addresses that are associated with the <code>system</code> and <code>inventory</code> services to try out your microservices.</p>
</div>
<div class="paragraph">
<p>Take note of the <code>EXTERNAL-IP</code> in the output of the following commands. It is the
hostname that you will later substitute into <code>[EXTERNAL-IP]</code> to access the <code>system</code> and <code>inventory</code> services.</p>
</div>
<div class="paragraph">
<p>View the information of the <code>system</code> service to see its <code>EXTERNAL-IP</code> address:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl get service/system-service</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to wait a while for the <code>EXTERNAL-IP</code> to change from <code>&lt;pending&gt;</code> to an IP address.</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>NAME                TYPE           CLUSTER-IP     EXTERNAL-IP     PORT(S)           AGE
system-service      LoadBalancer   10.0.27.66     &lt;pending&gt;       9080:32436/TCP    26s</pre>
</div>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>NAME                TYPE           CLUSTER-IP     EXTERNAL-IP     PORT(S)           AGE
system-service      LoadBalancer   10.0.27.66     23.99.223.10    9080:32436/TCP    74s</pre>
</div>
</div>
<div class="paragraph">
<p>View the information of the <code>inventory</code> service to see its <code>EXTERNAL-IP</code> address:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl get service/inventory-service</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will need to wait a while for the <code>EXTERNAL-IP</code> to change from <code>&lt;pending&gt;</code> to an IP address.</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>NAME                TYPE           CLUSTER-IP     EXTERNAL-IP     PORT(S)           AGE
inventory-service   LoadBalancer   10.0.103.223   &lt;pending&gt;       9081:32739/TCP    69s</pre>
</div>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>NAME                TYPE           CLUSTER-IP     EXTERNAL-IP     PORT(S)           AGE
inventory-service   LoadBalancer   10.0.103.223   168.61.174.136  9081:32739/TCP    2m8s</pre>
</div>
</div>
<div class="paragraph">
<p>To access your microservices, point your browser to the following URLs, substituting the appropriate <code>EXTERNAL-IP</code> hostnames
for the <code>system</code> and <code>inventory</code> services:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>http://[system-EXTERNAL-IP]:9080/system/properties</code></p>
</li>
<li>
<p><code>http://[inventory-EXTERNAL-IP]:9081/inventory/systems</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the first URL, you see a result in JSON format with the system properties of the container JVM.
The second URL returns an empty list, which is expected because no system properties are stored in the inventory yet.</p>
</div>
<div class="paragraph">
<p>Point your browser to the <code>http://[inventory-EXTERNAL-IP]:9081/inventory/systems/[system-EXTERNAL-IP]</code> URL. When you visit this URL, these system
properties are automatically stored in the inventory. Go back to <code>http://[inventory-EXTERNAL-IP]:9081/inventory/systems</code> and
you see a new entry for <code>[system-EXTERNAL-IP]</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-the-microservices">Testing the microservices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A few tests are included for you to test the basic functionality of the microservices.
If a test failure occurs, then you might have introduced a bug into the code.
To run the tests, wait for all pods to be in the ready state before you proceed further.</p>
</div>
<div class="paragraph">
<p>pom.xml</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers">  1</span><span class="preprocessor">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="line-numbers">  2</span><span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span> 
<span class="line-numbers">  3</span>    <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span> 
<span class="line-numbers">  4</span>    <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers">  5</span>    
<span class="line-numbers">  6</span>    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
<span class="line-numbers">  7</span>
<span class="line-numbers">  8</span>    <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">  9</span>
<span class="line-numbers"> 10</span>    <span class="tag">&lt;artifactId&gt;</span>guide-cloud-azure-inventory<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 11</span>    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 12</span>    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
<span class="line-numbers"> 13</span>
<span class="line-numbers"> 14</span>    <span class="tag">&lt;properties&gt;</span>
<span class="line-numbers"> 15</span>        <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
<span class="line-numbers"> 16</span>        <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
<span class="line-numbers"> 17</span>        <span class="tag">&lt;maven.compiler.source&gt;</span>11<span class="tag">&lt;/maven.compiler.source&gt;</span>
<span class="line-numbers"> 18</span>        <span class="tag">&lt;maven.compiler.target&gt;</span>11<span class="tag">&lt;/maven.compiler.target&gt;</span>
<span class="line-numbers"> 19</span>        <span class="comment">&lt;!-- Default test properties --&gt;</span>
<span class="line-numbers"> 20</span>        <span class="comment">&lt;!-- tag::sysHttpPort[] --&gt;</span>
<span class="line-numbers"> 21</span>        <span class="tag">&lt;sys.http.port&gt;</span>9080<span class="tag">&lt;/sys.http.port&gt;</span>
<span class="line-numbers"> 22</span>        <span class="comment">&lt;!-- end::sysHttpPort[] --&gt;</span>
<span class="line-numbers"> 23</span>        <span class="comment">&lt;!-- tag::invHttpPort[] --&gt;</span>
<span class="line-numbers"> 24</span>        <span class="tag">&lt;inv.http.port&gt;</span>9081<span class="tag">&lt;/inv.http.port&gt;</span>
<span class="line-numbers"> 25</span>        <span class="comment">&lt;!-- end::invHttpPort[] --&gt;</span>
<span class="line-numbers"> 26</span>        <span class="tag">&lt;inv.https.port&gt;</span>9444<span class="tag">&lt;/inv.https.port&gt;</span>
<span class="line-numbers"> 27</span>        <span class="comment">&lt;!-- tag::sysKubeService[] --&gt;</span>
<span class="line-numbers"> 28</span>        <span class="tag">&lt;system.ip&gt;</span>system-service<span class="tag">&lt;/system.ip&gt;</span>
<span class="line-numbers"> 29</span>        <span class="comment">&lt;!-- end::sysKubeService[] --&gt;</span>
<span class="line-numbers"> 30</span>        <span class="comment">&lt;!-- tag::invKubeService[] --&gt;</span>
<span class="line-numbers"> 31</span>        <span class="tag">&lt;inventory.ip&gt;</span>inventory-service<span class="tag">&lt;/inventory.ip&gt;</span>
<span class="line-numbers"> 32</span>        <span class="comment">&lt;!-- end::invKubeService[] --&gt;</span>
<span class="line-numbers"> 33</span>        <span class="comment">&lt;!-- Liberty configuration --&gt;</span>
<span class="line-numbers"> 34</span>        <span class="tag">&lt;liberty.var.system.http.port&gt;</span>${sys.http.port}<span class="tag">&lt;/liberty.var.system.http.port&gt;</span>
<span class="line-numbers"> 35</span>        <span class="tag">&lt;liberty.var.default.http.port&gt;</span>${inv.http.port}<span class="tag">&lt;/liberty.var.default.http.port&gt;</span>
<span class="line-numbers"> 36</span>        <span class="tag">&lt;liberty.var.default.https.port&gt;</span>${inv.https.port}<span class="tag">&lt;/liberty.var.default.https.port&gt;</span>
<span class="line-numbers"> 37</span>    <span class="tag">&lt;/properties&gt;</span>
<span class="line-numbers"> 38</span>
<span class="line-numbers"> 39</span>    <span class="tag">&lt;dependencies&gt;</span>
<span class="line-numbers"> 40</span>        <span class="comment">&lt;!-- Provided dependencies --&gt;</span>
<span class="line-numbers"> 41</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 42</span>            <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 43</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 44</span>            <span class="tag">&lt;version&gt;</span>10.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 45</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 46</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 47</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 48</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 49</span>            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 50</span>            <span class="tag">&lt;version&gt;</span>6.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 51</span>            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
<span class="line-numbers"> 52</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 53</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 54</span>        <span class="comment">&lt;!-- For tests --&gt;</span>
<span class="line-numbers"> 55</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 56</span>            <span class="tag">&lt;groupId&gt;</span>org.junit.jupiter<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 57</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 58</span>            <span class="tag">&lt;version&gt;</span>5.9.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 59</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 60</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 61</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 62</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 63</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 64</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 65</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 66</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 67</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 68</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 69</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-json-binding-provider<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 70</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 71</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 72</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 73</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 74</span>            <span class="tag">&lt;groupId&gt;</span>org.glassfish<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 75</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.json<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 76</span>            <span class="tag">&lt;version&gt;</span>2.0.1<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 77</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 78</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 79</span>    <span class="tag">&lt;/dependencies&gt;</span>
<span class="line-numbers"> 80</span>
<span class="line-numbers"> 81</span>    <span class="tag">&lt;build&gt;</span>
<span class="line-numbers"> 82</span>        <span class="tag">&lt;finalName&gt;</span>${project.artifactId}<span class="tag">&lt;/finalName&gt;</span>
<span class="line-numbers"> 83</span>        <span class="tag">&lt;plugins&gt;</span>
<span class="line-numbers"> 84</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 85</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 86</span>                <span class="tag">&lt;artifactId&gt;</span>maven-war-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 87</span>                <span class="tag">&lt;version&gt;</span>3.3.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 88</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 89</span>            <span class="comment">&lt;!-- Enable Liberty Maven plugin --&gt;</span>
<span class="line-numbers"> 90</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 91</span>                <span class="tag">&lt;groupId&gt;</span>io.openliberty.tools<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 92</span>                <span class="tag">&lt;artifactId&gt;</span>liberty-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 93</span>                <span class="tag">&lt;version&gt;</span>3.8.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 94</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 95</span>            <span class="comment">&lt;!-- Plugin to run unit tests --&gt;</span>
<span class="line-numbers"> 96</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 97</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 98</span>                <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 99</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">100</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">101</span>            <span class="comment">&lt;!-- Plugin to run functional tests --&gt;</span>
<span class="line-numbers">102</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">103</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">104</span>                <span class="tag">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">105</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">106</span>                <span class="tag">&lt;configuration&gt;</span>
<span class="line-numbers">107</span>                    <span class="tag">&lt;systemPropertyVariables&gt;</span>
<span class="line-numbers">108</span>                        <span class="tag">&lt;system.ip&gt;</span>${system.ip}<span class="tag">&lt;/system.ip&gt;</span>
<span class="line-numbers">109</span>                        <span class="tag">&lt;inventory.ip&gt;</span>${inventory.ip}<span class="tag">&lt;/inventory.ip&gt;</span>
<span class="line-numbers">110</span>                        <span class="tag">&lt;system.http.port&gt;</span>${sys.http.port}<span class="tag">&lt;/system.http.port&gt;</span>
<span class="line-numbers">111</span>                        <span class="tag">&lt;inventory.http.port&gt;</span>${inv.http.port}<span class="tag">&lt;/inventory.http.port&gt;</span>
<span class="line-numbers">112</span>                    <span class="tag">&lt;/systemPropertyVariables&gt;</span>
<span class="line-numbers">113</span>                <span class="tag">&lt;/configuration&gt;</span>
<span class="line-numbers">114</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">115</span>        <span class="tag">&lt;/plugins&gt;</span>
<span class="line-numbers">116</span>    <span class="tag">&lt;/build&gt;</span>
<span class="line-numbers">117</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The default properties that are defined in the <code class="hotspot file=0">pom.xml</code> file are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13.0434%;">
<col style="width: 86.9566%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=sysKubeService file=0">system.ip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Kubernetes Service wrapping the <code>system</code> pods, <code>system-service</code> by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=invKubeService file=0">inventory.ip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Kubernetes Service wrapping the <code>inventory</code> pods, <code>inventory-service</code> by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=sysHttpPort file=0">sys.http.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP port for the Kubernetes Service <code>system-service</code>, 9080 by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=invHttpPort file=0">inv.http.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP port of the Kubernetes Service <code>inventory-service</code>, 9081 by default.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="running-the-tests">Running the tests</h3>
<div class="paragraph">
<p>Run the Maven <code>failsafe:integration-test</code> goal to test your microservices by replacing <code>[system-EXTERNAL-IP]</code> and <code>[inventory-EXTERNAL-IP]</code>
with the values that were determined in the previous section.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn failsafe:integration-test -Dsystem.ip=[system-EXTERNAL-IP] -Dinventory.ip=[inventory-EXTERNAL-IP]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the tests pass, you will see an output similar to the following for each service:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running it.io.openliberty.guides.system.SystemEndpointIT
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.673 sec - in it.io.openliberty.guides.system.SystemEndpointIT

Results:

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</pre>
</div>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running it.io.openliberty.guides.inventory.InventoryEndpointIT
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.222 sec - in it.io.openliberty.guides.inventory.InventoryEndpointIT

Results:

Tests run: 4, Failures: 0, Errors: 0, Skipped: 0</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tearing-down-the-environment">Tearing down the environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is important to clean up your resources when you are finished with the guide so that you do not incur extra charges for ongoing usage.</p>
</div>
<div class="paragraph">
<p>When you no longer need your deployed microservices, you can delete all Kubernetes resources
by running the <code>kubectl delete</code> command:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl delete -f kubernetes.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because you are done testing your cluster, clean up all of its related sources using the <code>az group delete</code> command.
This command removes the resource group, container service, and all related resources:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>az group delete -g guideGroup --yes --no-wait</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="great-work-youre-done">Great work! You’re done!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have just deployed two microservices running in Open Liberty to Azure Kubernetes Service (AKS). You also
learned how to use <code>kubectl</code> to deploy your microservices on a Kubernetes cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guide-attribution">Guide Attribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deploying microservices to Azure Kubernetes Service <span class="licensedClass">by</span> Open Liberty <span class="licensedClass">is licensed under</span> CC BY-ND 4.0</p>
</div>
</div>
</div>
    </div>
  </div>

  <!-- Code section -->
  <div id="code_column" class="position_relative" tabindex="0">
    <div id="code_column_title_container">
      <div id="code_column_tabs_container" class="dimmed">
        <ul id="code_column_tabs" class="nav" role="tablist"></ul>
      </div>
      <div class="copyFileButton" tabindex="0">
        <img src="/img/guides_copy_button.svg" alt="Copy file contents" title="Copy file contents">
        <div id="code_section_copied_confirmation">Copied to clipboard </div>
      </div>
    </div>
    <div id="code_column_content"></div>

    <div id="prereqs_container">
      <p id="prereqs_title">Prerequisites:</p>
      <div class="prereqs_list"></div>
      <div class="skills_network_container">
        <div class="skills_network_description"></div>
      </div>
    </div>

    <button id="dismiss_button" aria-label="Back to text" tabindex="0">
      Back to text
    </button>
  </div>
</div>

<!-- Build a list of all the documents in the guides code base -->






<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->


    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    


<!-- Sort list of guides by date with most recent first -->





<div id="end_of_guide">
        <h2 tabindex="0">Nice work! Where to next?</h2>
        <div id="end_of_guide_left_section">
            <p id="guide_attribution"></p>
            
            <h3 id="feedback_rating_question">What did you think of this guide?</h3>
            <div id="feedback_ratings">
                <img class="guide_rating" id="extreme_dislike" src="/img/1_Extreme_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Extreme Dislike" data-guide-rating="1" tabindex="0" aria-label="Rate this guide as extreme dislike">
                <img class="guide_rating" id="dislike" src="/img/2_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Dislike" data-guide-rating="2" tabindex="0" aria-label="Rate this guide as dislike">
                <img class="guide_rating" id="like" src="/img/3_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Like" data-guide-rating="3" tabindex="0" aria-label="Rate this guide as like">
                <img class="guide_rating" id="extreme_like" src="/img/4_Extreme_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Extreme Like" data-guide-rating="4" tabindex="0" aria-label="Rate this guide as extreme like">
            </div>

            <div id="like_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <button id="close_button" class="popup_button" onclick="$('#like_popup').hide();">Close</button>
                </div>
            </div>

            <div id="dislike_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <p id="open_issue">Would you like to open an issue in GitHub?</p>
                    
                        <a href="https://github.com/OpenLiberty/guide-cloud-azure/issues/new" target="_blank" id="yes_button" class="popup_button" onclick="$('#dislike_popup').hide();" rel="noopener noreferrer">Yes</a>
                    
                    <button id="no_button" class="popup_button" onclick="$('#dislike_popup').hide();">No, thank you</button>
                </div>
            </div>

            <h3 id="improve_guide_feedback">What could make this guide better?</h3>
            
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-cloud-azure/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-cloud-azure/pulls">Create a pull request</a> to contribute to this guide</p>
            

            <h3 id="need_help">Need help?</h3>
            <p><a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/open-liberty">Ask a question on Stack Overflow</a></p>

            <h3>Like Open Liberty? Star our repo on GitHub.</h3>
            <a class="github-button" href="https://github.com/OpenLiberty/open-liberty" data-icon="octicon-star" aria-label="Star OpenLiberty/open-liberty on GitHub" target="_blank" rel="noopener noreferrer">Star</a>
        </div>
        <div id="end_of_guide_right_section">
            <h3 id="where_to_next">Where to next?</h3>

            
            

            <!-- Related guides section -->
            
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/kubernetes-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Deploying microservices to Kubernetes</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">25 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/kubernetes-microprofile-config.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Configuring microservices running in Kubernetes</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">15 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/kubernetes-microprofile-health.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Checking the health of microservices on Kubernetes</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">20 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                </div>
            </div>
            
        </div>
    </div>



    </main>

    



<footer>
    <div id="footer_gray_background">
        <div id="footer_top_container" class="footer_container container-fluid">
            <div id="footer_project_container">
                <span id="footer_open_liberty"></span>
                <p id="footer_project">IBM 开放式源代码项目</p>
            </div>
            <div id="footer_round_links_container">
                <a id="footer_github_link" class="footer_round_btn" href="https://github.com/OpenLiberty/" target="_blank" rel="noopener noreferrer" aria-label="Github"></a>
                <a id="footer_twitter_link" class="footer_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="footer_stackoverflow_link" class="footer_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="footer_groupsio_link" class="footer_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="footer_gitter_link" class="footer_round_btn" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>         
    </div>

    <div id="footer_bottom_container" class="footer_container container-fluid">
        <div id="footer_bottom_left_section">
            <p id="footer_copyright">© Copyright IBM Corp. 2017, 2023</p>
            <p class="vertical_bar">|</p>
            <a id="footer_privacy_policy_link" href="https://www.ibm.com/privacy/" target="_blank" rel="noopener noreferrer" class="left_footer_link">隐私策略</a>
            <p class="vertical_bar">|</p>
            <a id="footer_license_link" href="https://github.com/OpenLiberty/open-liberty/blob/release/LICENSE" target="_blank" rel="noopener noreferrer" class="left_footer_link">许可证</a>
            <p class="vertical_bar">|</p>
            <a id="footer_logos_link" href="https://github.com/OpenLiberty/logos" target="_blank" rel="noopener noreferrer" class="left_footer_link">洛戈斯</a>
        </div>
        <div id="footer_bottom_right_section">
            <a id="footer_docs_link" href="/docs" aria-label="Open Liberty Docs" class="right_footer_link blue_link_light_background">文档</a>
            <a id="footer_blog_link" href="/blog" aria-label="Open Liberty Blog" class="right_footer_link blue_link_light_background">博客</a>
            <a id="footer_support_link" href="/support" aria-label="Open Liberty Support" class="right_footer_link blue_link_light_background">支持</a>
        </div>
    </div>
</footer>

<!-- PRE-LOADED IMAGES FOR ON HOVER BEHAVIOR -->
<div class="d-none hidden">
    <img src="/img/Footer_GitCat_Hover.svg" alt="OpenLiberty Github link">
    <img src="/img/Footer_TwitterBird_Hover.svg" alt="OpenLibertyIO Twitter link">
    <img src="/img/Footer_StackO_Hover.svg" alt="Open-liberty Stack Overflow link">
    <img src="/img/Footer_GroupsIO_Hover.svg" alt="Openliberty Groups IO link">
    <img src="/img/footer_gitter_hover.svg" alt="Openliberty Gitter link">
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha512-lzilC+JFd6YV8+vQRNRtU7DOqv5Sa9Ek53lXt/k91HZTJpytHS1L6l1mMKR9K6VVoDt4LiEXaa6XBrYk1YhGTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>


<script type="text/javascript" src="/zh-Hans/assets/devEnvironment.js"></script>




  <script type="text/javascript" src="/zh-Hans/assets/guide-common.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/toc.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/tabs.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-static.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-multipane-static.js"></script>


<script type="text/javascript" src="/zh-Hans/assets/openliberty.js"></script>

  </body>

</html>
