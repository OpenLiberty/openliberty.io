<!DOCTYPE html>
<html lang="zh-Hans">

  





<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Caching in microservices with Hazelcast Tutorial
    
  </title>
  <meta name="description" content="How to use Hazelcast with microservices">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/openliberty.css">
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/coderay-custom.css">

  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header-dark.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/toc.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/toc-singlepane.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/end-of-guide.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-card.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/tabs.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-common.css">
  

  

  

  <link rel="canonical" href="https://openliberty.io/zh-Hans/guides/caching-microservices-hazelcast">
  <link rel="alternate" type="application/rss+xml" title="Open Liberty" href="/zh-Hans/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Asap:400,500" rel="stylesheet">
    
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@OpenLibertyIO" />
  <meta name="twitter:title" content="Caching in microservices with Hazelcast Tutorial" />
  <meta name="twitter:description" content="How to use Hazelcast with microservices" />

  <meta property='og:title' content="Caching in microservices with Hazelcast Tutorial" />
  <meta property='og:image' content="https://openliberty.io/img/twitter_card.jpg" />
  <meta property='og:image:alt' content="Open Liberty Logo" />
  <meta property='og:description' content="How to use Hazelcast with microservices" />
  <meta property='og:url' content="https://openliberty.io/zh-Hans/guides/caching-microservices-hazelcast" />
  <meta property='og:type' content="website" />
  
  <meta name="google-site-verification" content="h2P030H9b66CyL1nEmWfrZB8Fr14h9LmVMG7Ur0caBs" />

  
      <meta name="robots" content="noindex" />
  

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>


  <body>
    
    

    


<!--  -->

<header>
    <nav id="nav_bar">
        <div id="nav_header">
            <a id="home_link" href="/" aria-label="Open Liberty Home">
                <img id="ol_logo" src="/img/docs_openliberty_logo.png" alt="Open Liberty Logo">
            </a>
            <button id="hamburger_toggle_button" onclick="$('#nav_bar').toggleClass('responsive');">
                <span id="hamburger_toggle_icon"></span>
            </button>
        </div>
        <div id="hamburger_menu">
            <ul class="nav_list">
                <li class="nav_link">
                    <a href="/start/">入门</a>
                </li>
                <li class="nav_link">
                    <a href="/guides/">指南</a>
                </li>
                <li class="nav_link">
                    <a href="/docs/">文档</a>
                </li>
                <li class="nav_link">
                    <a href="/support/">支持</a>
                </li>
                <li class="nav_link">
                    <a href="/blog/">博客</a>
                </li>
            </ul>
            <div id="header_round_links_container"> 
                <a id="header_twitter_link" class="header_round_button" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="header_stackoverflow_link" class="header_round_button" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="header_groupsio_link" class="header_round_button" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="header_gitter_link" class="header_round_button" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>

    </nav>
</header>


    <main aria-label="Content">

      <!-- Build a list of all the documents in the guides code base -->
  
 

<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->
<!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
 

<!-- Sort list of guides by date with most recent first -->


<div id="background_container">
  <div class="toc_hotspot">
    <!-- Guide's table of contents section -->
    <div id="toc_column" class="collapse inline open">
      <div id="toc_inner">
         
        <div id="close_container">
          <img id="toc_close_white" src="/img/toc_close_white.svg" alt="Close the table of contents" tabindex="0">
        </div>
        <h3 id="toc_title">Contents</h3>
        <div id="toc_container"><ul class="sectlevel1">
<li><a href="#what-youll-learn">What you’ll learn</a></li>
<li><a href="#what-is-hazelcast">What is Hazelcast?</a></li>
<li><a href="#why-spring-boot">Why Spring Boot?</a></li>
<li><a href="#additional-prerequisites">Additional prerequisites</a></li>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#starting-and-preparing-your-cluster-for-deployment">Starting and preparing your cluster for deployment</a></li>
<li><a href="#use-hazelcast-caching-in-spring-boot-application">Use Hazelcast Caching in Spring Boot Application</a></li>
<li><a href="#building-and-containerizing-microservice">Building and containerizing microservice</a></li>
<li><a href="#deploying-the-microservices">Deploying the microservices</a></li>
<li><a href="#scaling-with-hazelcast">Scaling with Hazelcast</a></li>
<li><a href="#testing-microservices-that-are-running-on-kubernetes">Testing microservices that are running on Kubernetes</a></li>
</ul></div>
        <div id="toc_separator"></div>
        
        <h3 id="tag_title">标签</h3>
        <div id="tags_container"></div>
      </div>
    </div>
    <div id="toc_indicator" tabindex="0" aria-label="Open the table of contents" class="hidden">
      <img src="/img/arrow_white.svg" alt="arrow">
    </div>
    <div id="toc_line" class="open"></div>
    <!-- Entire guide section -->
    <div id="guide_column" class="position_relative open">
      <div id="guide_content">
        <!-- Guide header section -->
        <div id="guide_meta" class="sect1" tabindex="0">
          <h1 id="guide_title">Caching Microservices with Hazelcast in Kubernetes</h1>
          <div id="duration_container">
            <img src="/img/guide_duration_clock_icon_large.svg" alt="duration">
            <span id="guide_duration">25 minutes</span>

            <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
            <!-- If new posts count is less than 4, use 4 most recent posts -->
             
            <!-- If new posts count is >= 4, use posts from last 30 days-->
            
            <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
            <!-- Count number of guides from past last 12 weeks that is 84 days-->
            <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
            
          </div>
          <div id="mobile_prereqs_section">
            <p id="mobile_prereqs_title">Prerequisites:</p>
            <div class="prereqs_list"></div>
          </div>
        </div>

        <div class="scroller_anchor"></div>
        <div id="mobile_toc_accordion_container" data-toggle="collapse" data-target="#toc_column" aria-expanded="false" aria-controls="toc_column" role="button">
          <div role="menuitem" id="mobile_toc_accordion">
            <button class="breadcrumb_hamburger toc-toggle collapsed" type="button" tabindex="0">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <img src="/img/toc_close_green.svg" class="hidden img-responsive" alt="Table of contents close button">
            </button>
            <span>Table of contents</span>
          </div>
        </div>

        <!-- Guide content section -->
        <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note hidden">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This repository contains the guide documentation source. To view the guide in published form, view it on the <a href="https://openliberty.io/guides/caching-microservices-hazelcast.html">Open Liberty website</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Use Hazelcast Caching in Open Liberty and Spring Boot based Microservices and deploy to Kubernetes</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-youll-learn">What you’ll learn</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will learn how to use Hazelcast distributed caching with Spring Boot, bundle with openliberty and
deploy to a local Kubernetes cluster.
You will then create a Kubernetes Service which load balance between containers and
verify that you can share data between Microservices.</p>
</div>
<div class="paragraph">
<p>The microservice you will deploy is called <code>hazelcast-caching</code>. The <code>hazelcast-caching</code> microservice simply
helps you put a data and read it back. As Kubernetes Service will send the request to different pod each time
you initiate the request, the data will be served by shared hazelcast cluster between <code>hazelcast-caching</code> pods.</p>
</div>
<div class="paragraph">
<p>You will use a local single-node Kubernetes cluster. However, you can deploy this application on any kubernetes distributions
such as IBM Cloud Private.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-hazelcast">What is Hazelcast?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hazelcast is an open source In-Memory Data Grid (IMDG). It provides elastically scalable distributed In-Memory computing,
widely recognized as the fastest and most scalable approach to application performance.</p>
</div>
<div class="paragraph">
<p>Hazelcast is designed to scale up to hundreds and thousands of members.
Simply add new members and they will automatically discover the cluster
and will linearly increase both memory and processing capacity</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="why-spring-boot">Why Spring Boot?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can "just run".
To learn more about Spring Boot.
<a href="http://spring.io/projects/spring-boot" class="bare" target="_blank" rel="noopener noreferrer">http://spring.io/projects/spring-boot</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-prerequisites">Additional prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you begin, you need a containerization software for building containers. Kubernetes supports various container runtimes. You will use <code>Docker</code> in this guide. For Docker installation instructions, refer to the official <a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer">Docker documentation</a>.</p>
</div>
<div class="paragraph tab_link windows_link">
<p><code><strong>WINDOWS</strong></code></p>
</div>
<div class="paragraph tab_link mac_link">
<p><code><strong>MAC</strong></code></p>
</div>
<div class="paragraph tab_link linux_link">
<p><code><strong>LINUX</strong></code></p>
</div>
<div class="openblock tab_content windows_section">
<div class="content">
<div class="paragraph">
<p>Use Docker Desktop, where a local Kubernetes environment is pre-installed and enabled. If you do not see the <em>Kubernetes</em> tab, then upgrade to the latest version of Docker Desktop.</p>
</div>
<div class="paragraph">
<p>Complete the setup for your operating system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set up  <a href="https://docs.docker.com/docker-for-windows/#kubernetes" target="_blank" rel="noopener noreferrer">Docker for Windows</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After you complete the Docker setup instructions for your operating system, ensure that Kubernetes (not Swarm) is selected as the orchestrator in Docker Preferences.</p>
</div>
</div>
</div>
<div class="openblock tab_content mac_section">
<div class="content">
<div class="paragraph">
<p>Use Docker Desktop, where a local Kubernetes environment is pre-installed and enabled. If you do not see the <em>Kubernetes</em> tab, then upgrade to the latest version of Docker Desktop.</p>
</div>
<div class="paragraph">
<p>Complete the setup for your operating system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set up <a href="https://docs.docker.com/docker-for-mac/#kubernetes" target="_blank" rel="noopener noreferrer">Docker for Mac</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After you complete the Docker setup instructions for your operating system, ensure that Kubernetes (not Swarm) is selected as the orchestrator in Docker Preferences.</p>
</div>
</div>
</div>
<div class="openblock tab_content linux_section">
<div class="content">
<div class="paragraph">
<p>You will use <code>Minikube</code> as a single-node Kubernetes cluster that runs locally in a virtual machine.
Make sure you have <code>kubectl</code> installed. If you need to install <code>kubectl</code>, see the <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl-on-linux" target="_blank" rel="noopener noreferrer">kubectl installation instructions</a>.
For Minikube installation instructions, see the <a href="https://github.com/kubernetes/minikube#installation" target="_blank" rel="noopener noreferrer">Minikube documentation</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fastest way to work through this guide is to clone the <a href="https://github.com/openliberty/guide-caching-microservices-hazelcast.git" target="_blank" rel="noopener noreferrer">Git repository</a> and use the projects that are provided inside:</p>
</div>
<div id="git_clone" class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>git clone https://github.com/openliberty/guide-caching-microservices-hazelcast.git
cd guide-caching-microservices-hazelcast</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>start</code> directory contains the starting project that you will build upon.</p>
</div>
<div class="paragraph">
<p>The <code>finish</code> directory contains the finished project that you will build.</p>
</div>
<div class="paragraph">
<p>Before you begin, make sure you have all the necessary <span class="prerequisites">prerequisites</span>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-and-preparing-your-cluster-for-deployment">Starting and preparing your cluster for deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start your Kubernetes cluster.</p>
</div>
<div class="paragraph tab_link windows_link">
<p><code><strong>WINDOWS</strong></code></p>
</div>
<div class="paragraph tab_link mac_link">
<p><code><strong>MAC</strong></code></p>
</div>
<div class="paragraph tab_link linux_link">
<p><code><strong>LINUX</strong></code></p>
</div>
<div class="openblock tab_content windows_section mac_section">
<div class="content">
<div class="paragraph">
<p>Start your Docker Desktop environment.</p>
</div>
<div class="paragraph">
<p>Ensure that Kubernetes is running on Docker Desktop and that the context is set to <code>docker-desktop</code>.</p>
</div>
</div>
</div>
<div class="openblock tab_content linux_section">
<div class="content">
<div class="paragraph">
<p>Run the following command from a command-line session:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>minikube start</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock tab_content linux_section">
<div class="content">

</div>
</div>
<div class="paragraph">
<p>Next, validate that you have a healthy Kubernetes environment by running the following command from the active command-line session.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl get nodes</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command should return a <code>Ready</code> status for the master node.</p>
</div>
<div class="paragraph tab_link windows_link">
<p><code><strong>WINDOWS</strong></code></p>
</div>
<div class="paragraph tab_link mac_link">
<p><code><strong>MAC</strong></code></p>
</div>
<div class="paragraph tab_link linux_link">
<p><code><strong>LINUX</strong></code></p>
</div>
<div class="openblock tab_content windows_section mac_section">
<div class="content">
<div class="paragraph">
<p>You do not need to do any other step.</p>
</div>
</div>
</div>
<div class="openblock tab_content linux_section">
<div class="content">
<div class="paragraph">
<p>Run the following command to configure the Docker CLI to use Minikube’s Docker daemon.
After you run this command, you will be able to interact with Minikube’s Docker daemon and build new
images directly to it from your host machine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>eval $(minikube docker-env)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-hazelcast-caching-in-spring-boot-application">Use Hazelcast Caching in Spring Boot Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The microservice in the <code>start</code> directory has in-process cache which is not accessible between microservices.</p>
</div>
<div class="paragraph">
<p>Firstly, you need to configure Hazelcast to be used in Spring Boot Application.
replace <code>Application.java</code> with the following java class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.hazelcast</span>;

<span class="keyword">import</span> <span class="include">com.hazelcast.config.Config</span>;
<span class="keyword">import</span> <span class="include">com.hazelcast.config.JoinConfig</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.context.annotation.Bean</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Application</span> {

    <span class="directive">private</span> <span class="directive">static</span> Config config;

    <span class="annotation">@Bean</span>
    <span class="directive">public</span> Config hazelcastConfig() {
        Config config = <span class="keyword">new</span> Config();
        config.setProperty( <span class="string"><span class="delimiter">"</span><span class="content">hazelcast.logging.type</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">slf4j</span><span class="delimiter">"</span></span> );
        JoinConfig joinConfig = config.getNetworkConfig().getJoin();
        joinConfig.getMulticastConfig().setEnabled(<span class="predefined-constant">false</span>);
        joinConfig.getKubernetesConfig().setEnabled(<span class="predefined-constant">true</span>);
        <span class="keyword">return</span> config;
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Application.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration will tell Spring Boot what kind of configuration is needed when each hazelcast member is started.</p>
</div>
<div class="paragraph">
<p>Now it is time to use Hazelcast in the hazelcast-caching microservice.
if you check the source code of <code>CommandController.java</code>, you would notice that <code>ConcurrentHashMap</code> is used
for backing key value store. In order to make this cache distributed, replace <code>CommandController.java</code>
with Hazelcast version.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.hazelcast</span>;

<span class="keyword">import</span> <span class="include">com.hazelcast.core.HazelcastInstance</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Value</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestParam</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RestController</span>;

<span class="keyword">import</span> <span class="include">java.util.concurrent.ConcurrentMap</span>;

<span class="annotation">@RestController</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CommandController</span> {

    <span class="annotation">@Value</span>(<span class="string"><span class="delimiter">"</span><span class="content">#{environment.MY_POD_NAME}</span><span class="delimiter">"</span></span>)
    <span class="directive">private</span> <span class="predefined-type">String</span> podName;

    <span class="annotation">@Autowired</span>
    HazelcastInstance hazelcastInstance;

    <span class="directive">private</span> <span class="predefined-type">ConcurrentMap</span>&lt;<span class="predefined-type">String</span>,<span class="predefined-type">String</span>&gt; retrieveMap() {
        <span class="keyword">return</span> hazelcastInstance.getMap(<span class="string"><span class="delimiter">"</span><span class="content">map</span><span class="delimiter">"</span></span>);
    }

    <span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">"</span><span class="content">/put</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> CommandResponse put(<span class="annotation">@RequestParam</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">key</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> key, <span class="annotation">@RequestParam</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">value</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> value) {
        retrieveMap().put(key, value);
        <span class="keyword">return</span> <span class="keyword">new</span> CommandResponse(value,podName);
    }

    <span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">"</span><span class="content">/get</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> CommandResponse get(<span class="annotation">@RequestParam</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">key</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> key) {
        <span class="predefined-type">String</span> value = retrieveMap().get(key);
        <span class="keyword">return</span> <span class="keyword">new</span> CommandResponse(value,podName);
    }


}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You would notice that getting hazelcast member is <code>Autowired</code> by Spring Boot and made available to the <code>CommandController</code>
and there is no change in <code>/put</code> and <code>/get</code> endpoints.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-and-containerizing-microservice">Building and containerizing microservice</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first step of deploying to Kubernetes is to build your microservices and containerize them with Docker.</p>
</div>
<div class="paragraph">
<p>The starting Java project, which you can find in the <code>start</code> directory, is a spring boot based microservice.
It is called hazelcast-caching which has two simple endpoints, <code>/put</code> and <code>/get</code>. This guide uses <code>boost-maven-plugin</code>
to bundle spring boot app and openliberty together and build docker image for the deployment.
Boost plugin does not require you to create your own Dockerfile but instead opionated docker image.</p>
</div>
<div class="paragraph">
<p>If you wanna learn more about <code>boost maven plugin</code>, you can visit the project website.
<a href="https://github.com/OpenLiberty/boost/tree/master/boost-maven" class="bare" target="_blank" rel="noopener noreferrer">https://github.com/OpenLiberty/boost/tree/master/boost-maven</a></p>
</div>
<div class="paragraph">
<p>If you want to create your own Dockerfile then you can always use dockerfile-maven plugin.
please refer to <a href="https://openliberty.io/guides/kubernetes-intro.html#starting-and-preparing-your-cluster-for-deployment" class="bare">https://openliberty.io/guides/kubernetes-intro.html#starting-and-preparing-your-cluster-for-deployment</a></p>
</div>
<div class="paragraph">
<p>To build <code>hazelcast-caching</code> microservice, run the following command in the <code>start</code> folder.
This will build the docker image and push it to docker registry provided by minikube</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn package</code></pre>
</div>
</div>
<div class="paragraph">
<p>Execute following command to see available docker images</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>docker images</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify that the <code>hazelcast-caching:latest</code> is listed among them, for example:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><span class="system"><strong>WINDOWS | MAC</strong></span></p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>REPOSITORY                                 TAG                 IMAGE ID            CREATED             SIZE
hazelcast-caching                          latest              ee0fb6a53f68        11 seconds ago      595MB
&lt;none&gt;                                     &lt;none&gt;              991f5e8961a5        13 seconds ago      595MB
open-liberty                               springBoot2         1da856d69fac        3 weeks ago         546MB
k8s.gcr.io/kube-proxy-amd64                v1.10.0             bfc21aadc7d3        11 months ago       97MB
k8s.gcr.io/kube-apiserver-amd64            v1.10.0             af20925d51a3        11 months ago       225MB
k8s.gcr.io/kube-scheduler-amd64            v1.10.0             704ba848e69a        11 months ago       50.4MB
k8s.gcr.io/kube-controller-manager-amd64   v1.10.0             ad86dbed1555        11 months ago       148MB
k8s.gcr.io/etcd-amd64                      3.1.12              52920ad46f5b        11 months ago       193MB
k8s.gcr.io/kube-addon-manager              v8.6                9c16409588eb        12 months ago       78.4MB
k8s.gcr.io/k8s-dns-dnsmasq-nanny-amd64     1.14.8              c2ce1ffb51ed        13 months ago       41MB
k8s.gcr.io/k8s-dns-sidecar-amd64           1.14.8              6f7f2dc7fab5        13 months ago       42.2MB
k8s.gcr.io/k8s-dns-kube-dns-amd64          1.14.8              80cc5ea4b547        13 months ago       50.5MB
k8s.gcr.io/pause-amd64                     3.1                 da86e6ba6ca1        14 months ago       742kB
k8s.gcr.io/kubernetes-dashboard-amd64      v1.8.1              e94d2f21bc0c        14 months ago       121MB
gcr.io/k8s-minikube/storage-provisioner    v1.8.0              4689081edb10        15 months ago       80.8MB
gcr.io/k8s-minikube/storage-provisioner    v1.8.1              4689081edb10        15 months ago       80.8MB
k8s.gcr.io/pause-amd64                     3.0                 99e59f495ffa        2 years ago         747kB</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="system"><strong>LINUX</strong></span></p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>REPOSITORY                                 TAG                 IMAGE ID            CREATED             SIZE
hazelcast-caching                          latest              ee0fb6a53f68        11 seconds ago      595MB
&lt;none&gt;                                     &lt;none&gt;              991f5e8961a5        13 seconds ago      595MB
open-liberty                               springBoot2         1da856d69fac        3 weeks ago         546MB
k8s.gcr.io/kube-proxy-amd64                v1.10.0             bfc21aadc7d3        11 months ago       97MB
k8s.gcr.io/kube-apiserver-amd64            v1.10.0             af20925d51a3        11 months ago       225MB
k8s.gcr.io/kube-scheduler-amd64            v1.10.0             704ba848e69a        11 months ago       50.4MB
k8s.gcr.io/kube-controller-manager-amd64   v1.10.0             ad86dbed1555        11 months ago       148MB
k8s.gcr.io/etcd-amd64                      3.1.12              52920ad46f5b        11 months ago       193MB
k8s.gcr.io/kube-addon-manager              v8.6                9c16409588eb        12 months ago       78.4MB
k8s.gcr.io/k8s-dns-dnsmasq-nanny-amd64     1.14.8              c2ce1ffb51ed        13 months ago       41MB
k8s.gcr.io/k8s-dns-sidecar-amd64           1.14.8              6f7f2dc7fab5        13 months ago       42.2MB
k8s.gcr.io/k8s-dns-kube-dns-amd64          1.14.8              80cc5ea4b547        13 months ago       50.5MB
k8s.gcr.io/pause-amd64                     3.1                 da86e6ba6ca1        14 months ago       742kB
k8s.gcr.io/kubernetes-dashboard-amd64      v1.8.1              e94d2f21bc0c        14 months ago       121MB
gcr.io/k8s-minikube/storage-provisioner    v1.8.0              4689081edb10        15 months ago       80.8MB
gcr.io/k8s-minikube/storage-provisioner    v1.8.1              4689081edb10        15 months ago       80.8MB
k8s.gcr.io/pause-amd64                     3.0                 99e59f495ffa        2 years ago         747kB</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you don’t see the <code>hazelcast-caching:latest</code> image, then check the Maven build log for any potential errors.
In addition, if you are using Minikube, make sure your Docker CLI is configured to use Minikube’s Docker daemon and not your host’s as described in the previous section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-the-microservices">Deploying the microservices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that your Docker images are built, deploy them using a Kubernetes resource definition.
To deploy the <code>hazelcast-caching</code> microservice, first create the <code>kubernetes.yaml</code> file in the <code>start</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">apiVersion</span>: <span class="string"><span class="content">apps/v1</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">StatefulSet</span></span>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">hazelcast-caching-statefulset</span></span>
  <span class="key">labels</span>:
    <span class="key">app</span>: <span class="string"><span class="content">hazelcast-caching</span></span>
<span class="key">spec</span>:
  <span class="key">replicas</span>: <span class="string"><span class="content">2</span></span>
  <span class="key">serviceName</span>: <span class="string"><span class="content">hazelcast-caching-service</span></span>
  <span class="key">selector</span>:
    <span class="key">matchLabels</span>:
      <span class="key">app</span>: <span class="string"><span class="content">hazelcast-caching</span></span>
  <span class="key">template</span>:
    <span class="key">metadata</span>:
      <span class="key">labels</span>:
        <span class="key">app</span>: <span class="string"><span class="content">hazelcast-caching</span></span>
    <span class="key">spec</span>:
      <span class="key">containers</span>:
        - <span class="string"><span class="content">name: hazelcast-caching-container</span></span>
          <span class="key">image</span>: <span class="string"><span class="content">hazelcast-caching:latest</span></span>
          <span class="key">imagePullPolicy</span>: <span class="string"><span class="content">IfNotPresent</span></span>
          <span class="key">ports</span>:
            - <span class="string"><span class="content">name: openliberty</span></span>
              <span class="key">containerPort</span>: <span class="string"><span class="content">9080</span></span>
          <span class="key">env</span>:
            - <span class="string"><span class="content">name: MY_POD_NAME</span></span>
              <span class="key">valueFrom</span>:
                <span class="key">fieldRef</span>:
                  <span class="key">fieldPath</span>: <span class="string"><span class="content">metadata.name</span></span>

<span class="head"><span class="head">---</span></span>
<span class="key">apiVersion</span>: <span class="string"><span class="content">v1</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">Service</span></span>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">hazelcast-caching-service</span></span>
<span class="key">spec</span>:
  <span class="key">type</span>: <span class="string"><span class="content">NodePort</span></span>
  <span class="key">selector</span>:
    <span class="key">app</span>: <span class="string"><span class="content">hazelcast-caching</span></span>
  <span class="key">ports</span>:
    - <span class="string"><span class="content">protocol: TCP</span></span>
      <span class="key">port</span>: <span class="string"><span class="content">9080</span></span>
      <span class="key">targetPort</span>: <span class="string"><span class="content">9080</span></span>
      <span class="key">nodePort</span>: <span class="string"><span class="content">31000</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This file defines two Kubernetes resources: one statefulset and one service.
StatefulSet is preferred solution for Hazelcast because it enables controlled scale out/in of your microservices
for easy data distribution. To learn more about StatefulSet, you can visit Kubernetes documentation
<a href="https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/" class="bare" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/</a></p>
</div>
<div class="paragraph">
<p>By default, we create 2 replicas of <code>hazelcast-caching</code> microservice behind the <code>hazelcast-caching-service</code> which forwards
requests to one of the pods available in the kubernetes cluster.</p>
</div>
<div class="paragraph">
<p><code>MY_POD_NAME</code> is an environment variable made available to the pods so that each microservice knows which pod they are in.
This is going to be used in this guide in order to show which pod is responding to the http request.</p>
</div>
<div class="paragraph">
<p>As a second step, we will create rbac.yaml</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">apiVersion</span>: <span class="string"><span class="content">rbac.authorization.k8s.io/v1</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">ClusterRoleBinding</span></span>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">default-cluster</span></span>
<span class="key">roleRef</span>:
  <span class="key">apiGroup</span>: <span class="string"><span class="content">rbac.authorization.k8s.io</span></span>
  <span class="key">kind</span>: <span class="string"><span class="content">ClusterRole</span></span>
  <span class="key">name</span>: <span class="string"><span class="content">view</span></span>
<span class="key">subjects</span>:
  - <span class="string"><span class="content">kind: ServiceAccount</span></span>
    <span class="key">name</span>: <span class="string"><span class="content">default</span></span>
    <span class="key">namespace</span>: <span class="string"><span class="content">default</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Role Based Access Controller(RBAC) configuration is used to give access to Kubernetes Master API from pods which runs
microservices. Hazelcast requires a read access to autodiscover other hazelcast members and form hazelcast cluster.</p>
</div>
<div class="paragraph">
<p>Run the following commands to deploy the resources as defined in kubernetes.yaml and rbac.yaml in the specified order:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl apply -f rbac.yaml</code></pre>
</div>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl apply -f kubernetes.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>run the following command to check the status of your pods:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl get pods</code></pre>
</div>
</div>
<div class="paragraph">
<p>You’ll see an output similar to the following if all the pods are healthy and running:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>NAME                              READY     STATUS    RESTARTS   AGE
hazelcast-caching-statefulset-0   1/1       Running   0          20m
hazelcast-caching-statefulset-1   1/1       Running   0          20m</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should also check if hazelcast cluster is formed by checking one of the pod’s log file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl logs hazelcast-caching-statefulset-1</code></pre>
</div>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>Members {size:2, ver:2} [
        Member [172.17.0.4]:5701 - 71009ef7-ee18-45f0-8a8f-e9321931e9ce this
        Member [172.17.0.5]:5701 - 99222e16-93e5-4453-ac9e-cdf3e80069c6
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next you will make requests to your services.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><span class="system"><strong>WINDOWS | MAC</strong></span></p>
</div>
<div class="paragraph">
<p>The default hostname for Docker Desktop is <code>localhost</code>.</p>
</div>
<div class="paragraph">
<p><span class="system"><strong>LINUX</strong></span></p>
</div>
<div class="paragraph">
<p>The default hostname for minikube is 192.168.99.100. Otherwise it can be found using the <code>minikube ip</code> command.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Open your favorite terminal and send http get requests in a loop via <code>curl</code> command.
This request asks for the value of <code>key=1</code> and prints value and which pod has replied to the request.
You might need to wait up to 30 sec before microservices accepts traffic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>while true; do curl 192.168.99.100:31000/get?key=1;echo; sleep 2; done</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see an output like below. The <code>value</code> is null because we have not put any data yet.
<code>podname</code> shows that which kubernetes pod replied to the request.</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>{"value":null,"podName":"hazelcast-caching-statefulset-1"}
{"value":null,"podName":"hazelcast-caching-statefulset-1"}
{"value":null,"podName":"hazelcast-caching-statefulset-0"}
{"value":null,"podName":"hazelcast-caching-statefulset-1"}
{"value":null,"podName":"hazelcast-caching-statefulset-0"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Break the current loop and put some data into hazelcast-caching microservice.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>curl "http://192.168.99.100:31000/put?key=1&amp;value=hazelcast_springboot_openliberty"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although request has been executed by one specific kubernetes pod, by querying the data in a loop will show data the data
is actually shared by multiple pods. To see this, execute following command again.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>while true; do curl 192.168.99.100:31000/get?key=1;echo; sleep 2; done</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see both pods are returning the same data.</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>{"value":"hazelcast_springboot_openliberty","podName":"hazelcast-caching-statefulset-1"}
{"value":"hazelcast_springboot_openliberty","podName":"hazelcast-caching-statefulset-0"}
{"value":"hazelcast_springboot_openliberty","podName":"hazelcast-caching-statefulset-1"}
{"value":"hazelcast_springboot_openliberty","podName":"hazelcast-caching-statefulset-0"}
{"value":"hazelcast_springboot_openliberty","podName":"hazelcast-caching-statefulset-1"}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scaling-with-hazelcast">Scaling with Hazelcast</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Scale the cluster with one more pod and see that you still retrieve the shared data.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl scale statefulset hazelcast-caching-statefulset --replicas=3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run following command to see the latest status of the pods</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl get pods</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, a new pod <code>hazelcast-caching-statefulset-2</code> has joined to the cluster.</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>NAME                              READY     STATUS    RESTARTS   AGE
hazelcast-caching-statefulset-0   1/1       Running   0          8m
hazelcast-caching-statefulset-1   1/1       Running   0          8m
hazelcast-caching-statefulset-2   1/1       Running   0          31s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the following command again to see the output</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>while true; do curl 192.168.99.100:31000/get?key=1;echo; sleep 2; done</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, <code>hazelcast-caching-statefulset-2</code> is returning correct data.</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>{"value":"hazelcast_springboot_openliberty","podName":"hazelcast-caching-statefulset-1"}
{"value":"hazelcast_springboot_openliberty","podName":"hazelcast-caching-statefulset-2"}
{"value":"hazelcast_springboot_openliberty","podName":"hazelcast-caching-statefulset-0"}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-microservices-that-are-running-on-kubernetes">Testing microservices that are running on Kubernetes</h2>
<div class="sectionbody">
<div class="listingblock code_command hotspot">
<div class="content">
<pre><mark>Create a <code>HazelcastCachingIT</code> class.</mark>
<code>src/test/java/it/io/openliberty/guides/hazelcast/HazelcastCachingIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>HazelcastCachingIT.java</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Java"><span class="line-numbers"> 1</span><span class="comment">/*</span>
<span class="line-numbers"> 2</span><span class="comment"> * Copyright 2014-2016 the original author or authors.</span>
<span class="line-numbers"> 3</span><span class="comment"> *</span>
<span class="line-numbers"> 4</span><span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span>
<span class="line-numbers"> 5</span><span class="comment"> * you may not use this file except in compliance with the License.</span>
<span class="line-numbers"> 6</span><span class="comment"> * You may obtain a copy of the License at</span>
<span class="line-numbers"> 7</span><span class="comment"> *</span>
<span class="line-numbers"> 8</span><span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="line-numbers"> 9</span><span class="comment"> *</span>
<span class="line-numbers">10</span><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span>
<span class="line-numbers">11</span><span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span>
<span class="line-numbers">12</span><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="line-numbers">13</span><span class="comment"> * See the License for the specific language governing permissions and</span>
<span class="line-numbers">14</span><span class="comment"> * limitations under the License.</span>
<span class="line-numbers">15</span><span class="comment"> */</span>
<span class="line-numbers">16</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.hazelcast</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.hazelcast.CommandResponse</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">org.junit.Assert</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">org.junit.BeforeClass</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">org.junit.Test</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">org.springframework.http.HttpStatus</span>;
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">org.springframework.http.ResponseEntity</span>;
<span class="line-numbers">24</span><span class="keyword">import</span> <span class="include">org.springframework.web.client.RestTemplate</span>;
<span class="line-numbers">25</span>
<span class="line-numbers">26</span>
<span class="line-numbers">27</span><span class="directive">public</span> <span class="type">class</span> <span class="class">HazelcastCachingIT</span> {
<span class="line-numbers">28</span>
<span class="line-numbers">29</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> clusterUrl;
<span class="line-numbers">30</span>
<span class="line-numbers">31</span>
<span class="line-numbers">32</span>    <span class="annotation">@BeforeClass</span>
<span class="line-numbers">33</span>    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> oneTimeSetup() {
<span class="line-numbers">34</span>        <span class="predefined-type">String</span> clusterIp = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">cluster.ip</span><span class="delimiter">"</span></span>);
<span class="line-numbers">35</span>        <span class="predefined-type">String</span> nodePort = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">cluster.port</span><span class="delimiter">"</span></span>);
<span class="line-numbers">36</span>        clusterUrl = <span class="string"><span class="delimiter">"</span><span class="content">http://</span><span class="delimiter">"</span></span> + clusterIp + <span class="string"><span class="delimiter">"</span><span class="content">:</span><span class="delimiter">"</span></span> + nodePort ;
<span class="line-numbers">37</span>    }
<span class="line-numbers">38</span>
<span class="line-numbers">39</span>
<span class="line-numbers">40</span>    <span class="annotation">@Test</span>(timeout = <span class="integer">60000</span>)
<span class="line-numbers">41</span>    <span class="directive">public</span> <span class="type">void</span> testHazelcastCache()
<span class="line-numbers">42</span>            <span class="directive">throws</span> <span class="exception">Exception</span> {
<span class="line-numbers">43</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>        <span class="predefined-type">String</span> key = <span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span>;
<span class="line-numbers">46</span>        <span class="predefined-type">String</span> value = <span class="string"><span class="delimiter">"</span><span class="content">hazelcast-springboot-openliberty</span><span class="delimiter">"</span></span>;
<span class="line-numbers">47</span>
<span class="line-numbers">48</span>        <span class="predefined-type">String</span> put_url = <span class="predefined-type">String</span>.format(clusterUrl +<span class="string"><span class="delimiter">"</span><span class="content">/put?key=%s&amp;value=%s</span><span class="delimiter">"</span></span>, key, value);
<span class="line-numbers">49</span>        RestTemplate rest = <span class="keyword">new</span> RestTemplate();
<span class="line-numbers">50</span>
<span class="line-numbers">51</span>        ResponseEntity&lt;CommandResponse&gt; putResponse = rest.getForEntity(put_url, CommandResponse.class);
<span class="line-numbers">52</span>        Assert.assertTrue(putResponse.getStatusCode() == HttpStatus.OK);
<span class="line-numbers">53</span>
<span class="line-numbers">54</span>        <span class="predefined-type">String</span> firstPod = putResponse.getBody().getPodName();
<span class="line-numbers">55</span>
<span class="line-numbers">56</span>        <span class="comment">//GET call to see data is coming from another pod</span>
<span class="line-numbers">57</span>        <span class="predefined-type">String</span> get_url = <span class="predefined-type">String</span>.format(clusterUrl+<span class="string"><span class="delimiter">"</span><span class="content">/get?key=%s</span><span class="delimiter">"</span></span>, key);
<span class="line-numbers">58</span>
<span class="line-numbers">59</span>        <span class="keyword">while</span> (<span class="predefined-constant">true</span>) { <span class="comment">// it will try every second until it timeouts in 60 seconds</span>
<span class="line-numbers">60</span>            ResponseEntity&lt;CommandResponse&gt; getResponse = rest.getForEntity(get_url, CommandResponse.class);
<span class="line-numbers">61</span>            <span class="predefined-type">String</span> secondPod = getResponse.getBody().getPodName();
<span class="line-numbers">62</span>            <span class="keyword">if</span> (!secondPod.equals(firstPod)) <span class="keyword">break</span>; <span class="comment">// we get the response from different pod so SUCCESS!!</span>
<span class="line-numbers">63</span>            <span class="predefined-type">Thread</span>.sleep(<span class="integer">1000</span>);
<span class="line-numbers">64</span>        }
<span class="line-numbers">65</span>    }
<span class="line-numbers">66</span>
<span class="line-numbers">67</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>testHazelcastCache</code> test makes sure that the <code>/put</code> endpoint is handled by one pod
and <code>/get</code> methods returns the same data from the other kubernetes pod.</p>
</div>
<div class="paragraph">
<p>It first puts a key/value pair to <code>hazelcast-caching</code> microservice and keeps podname in the <code>firstpod</code>
variable. In the second part, tests submits multiple <code>/get</code> requests until to see that podname is different then the pod
which initially handled <code>/put</code> request.</p>
</div>
<div class="paragraph">
<p>In order to run integration tests, you must have a running <code>hazelcast-caching</code> microservices
in minikube environment. As you have gone through all previous steps, you already have it.</p>
</div>
<div class="paragraph">
<p>The default properties defined in the pom.xml are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13.0434%;">
<col style="width: 86.9566%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=35">cluster.ip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP or hostname for your cluster, <code>192.168.99.100</code> by default, which is appropriate when using Minikube.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=36">cluster.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port of the Kubernetes Service wrapping the <code>hazelcast-caching</code> pods, <code>hazelcast-caching-service</code> by default.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Navigate back to the <code>start</code> directory.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><span class="system"><strong>LINUX | MAC</strong></span></p>
</div>
<div class="paragraph">
<p>Run the integration tests against a cluster running at the default Minikube IP address:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn verify</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="system"><strong>WINDOWS</strong></span></p>
</div>
<div class="paragraph">
<p>Run the integration tests against a cluster running with a hostname of <code>localhost</code>:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn verify -Dcluster.ip=localhost</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the integration tests against an external IP address and port,
you can use <code>cluster.ip</code> and <code>cluster.port</code> based kubernetes service on your kubernetes cluster.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn verify -Dcluster.ip=192.168.99.100 -Dcluster.port=31000</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the tests pass, you’ll see a similar output to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running it.io.openliberty.guides.hazelcast.HazelcastCachingIT
14:52:17.881 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Created GET request for "http://192.168.99.100:31000/put?key=1&amp;value=hazelcast-springboot-openliberty"
14:52:17.916 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Setting request Accept header to [application/json, application/*+json]
14:52:17.989 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - GET request for "http://192.168.99.100:31000/put?key=1&amp;value=hazelcast-springboot-openliberty" resulted in 200 (OK)
14:52:17.991 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Reading [class io.openliberty.guides.hazelcast.CommandResponse] as "application/json;charset=UTF-8" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@48e08f49]
14:52:18.007 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Created GET request for "http://192.168.99.100:31000/get?key=1"
14:52:18.007 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Setting request Accept header to [application/json, application/*+json]
14:52:18.048 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - GET request for "http://192.168.99.100:31000/get?key=1" resulted in 200 (OK)
14:52:18.048 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Reading [class io.openliberty.guides.hazelcast.CommandResponse] as "application/json;charset=UTF-8" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@48e08f49]
14:52:19.051 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Created GET request for "http://192.168.99.100:31000/get?key=1"
14:52:19.052 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Setting request Accept header to [application/json, application/*+json]
14:52:19.060 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - GET request for "http://192.168.99.100:31000/get?key=1" resulted in 200 (OK)
14:52:19.060 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Reading [class io.openliberty.guides.hazelcast.CommandResponse] as "application/json;charset=UTF-8" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@48e08f49]
14:52:20.069 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Created GET request for "http://192.168.99.100:31000/get?key=1"
14:52:20.069 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Setting request Accept header to [application/json, application/*+json]
14:52:20.122 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - GET request for "http://192.168.99.100:31000/get?key=1" resulted in 200 (OK)
14:52:20.122 [Time-limited test] DEBUG org.springframework.web.client.RestTemplate - Reading [class io.openliberty.guides.hazelcast.CommandResponse] as "application/json;charset=UTF-8" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@48e08f49]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.714 s - in it.io.openliberty.guides.hazelcast.HazelcastCachingIT
[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO]
[INFO] --- spring-boot-maven-plugin:2.1.3.RELEASE:stop (post-integration-test) @ hazelcast-caching ---
[INFO]
[INFO] --- maven-failsafe-plugin:2.21.0:verify (default) @ hazelcast-caching ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12.470 s
[INFO] Finished at: 2019-03-04T14:52:20-05:00
[INFO] ------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>== Tearing down the environment</p>
</div>
<div class="paragraph">
<p>When you no longer need your deployed microservices, you can delete all Kubernetes resources by running the <code>kubectl delete</code> command:
You might need to wait up to 30 seconds as stateful sets kills pods one at a time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl delete -f kubernetes.yaml</code></pre>
</div>
</div>
<div class="paragraph tab_link windows_link">
<p><code><strong>WINDOWS</strong></code></p>
</div>
<div class="paragraph tab_link mac_link">
<p><code><strong>MAC</strong></code></p>
</div>
<div class="paragraph tab_link linux_link">
<p><code><strong>LINUX</strong></code></p>
</div>
<div class="openblock tab_content windows_section mac_section">
<div class="content">
<div class="paragraph">
<p>Nothing more needs to be done for Docker Desktop.</p>
</div>
</div>
</div>
<div class="openblock tab_content linux_section">
<div class="content">
<div class="paragraph">
<p>Perform the following steps to return your environment to a clean state.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Point the Docker daemon back to your local machine:</p>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>eval $(minikube docker-env -u)</code></pre>
</div>
</div>
</li>
<li>
<p>Stop your Minikube cluster:</p>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>minikube stop</code></pre>
</div>
</div>
</li>
<li>
<p>Delete your cluster:</p>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>minikube delete</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>== Great work! You’re done!</p>
</div>
<div class="paragraph">
<p>You have just created a Spring Boot application, bundled it with openliberty and deployed to Kubernetes.
You then added Hazelcast caching to the <code>hazelcast-caching</code>,tested with a simple curl command.
You also scaled out the microservices and saw that data is shared between microservices
As a last step, you ran integration tests against <code>hazelcast-caching</code> that was deployed in a Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>== Contribute to this guide</p>
</div>
<div class="paragraph">
<p>Is something missing or broken? Raise an <a href="https://github.com/OpenLiberty/guide-caching-microservices-hazelcast/issues" target="_blank" rel="noopener noreferrer">issue</a>,
or send us a <a href="https://github.com/OpenLiberty/guide-caching-microservices-hazelcast/pulls" target="_blank" rel="noopener noreferrer">pull request</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenLiberty/guide-caching-microservices-hazelcast" target="_blank" rel="noopener noreferrer">View this guide on GitHub</a>.</p>
</div>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
</div>

<div id="end_of_guide_background">
  <div class="centered_content">
<!-- Build a list of all the documents in the guides code base -->






<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->


    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    


<!-- Sort list of guides by date with most recent first -->





<div id="end_of_guide">
        <h2 tabindex="0">Nice work! Where to next?</h2>
        <div id="end_of_guide_left_section">
            <p id="guide_attribution"></p>
            
            <h3 id="feedback_rating_question">What did you think of this guide?</h3>
            <div id="feedback_ratings">
                <img class="guide_rating" id="extreme_dislike" src="/img/1_Extreme_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Extreme Dislike" data-guide-rating="1" tabindex="0" aria-label="Rate this guide as extreme dislike">
                <img class="guide_rating" id="dislike" src="/img/2_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Dislike" data-guide-rating="2" tabindex="0" aria-label="Rate this guide as dislike">
                <img class="guide_rating" id="like" src="/img/3_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Like" data-guide-rating="3" tabindex="0" aria-label="Rate this guide as like">
                <img class="guide_rating" id="extreme_like" src="/img/4_Extreme_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Extreme Like" data-guide-rating="4" tabindex="0" aria-label="Rate this guide as extreme like">
            </div>

            <div id="like_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <button id="close_button" class="popup_button" onclick="$('#like_popup').hide();">Close</button>
                </div>
            </div>

            <div id="dislike_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <p id="open_issue">Would you like to open an issue in GitHub?</p>
                    
                        <a href="https://github.com/OpenLiberty/guide-caching-microservices-hazelcast/issues/new" target="_blank" id="yes_button" class="popup_button" onclick="$('#dislike_popup').hide();" rel="noopener noreferrer">Yes</a>
                    
                    <button id="no_button" class="popup_button" onclick="$('#dislike_popup').hide();">No, thank you</button>
                </div>
            </div>

            <h3 id="improve_guide_feedback">What could make this guide better?</h3>
            
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-caching-microservices-hazelcast/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-caching-microservices-hazelcast/pulls">Create a pull request</a> to contribute to this guide</p>
            

            <h3 id="need_help">Need help?</h3>
            <p><a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/open-liberty">Ask a question on Stack Overflow</a></p>

            <h3>Like Open Liberty? Star our repo on GitHub.</h3>
            <a class="github-button" href="https://github.com/OpenLiberty/open-liberty" data-icon="octicon-star" aria-label="Star OpenLiberty/open-liberty on GitHub" target="_blank" rel="noopener noreferrer">Star</a>
        </div>
        <div id="end_of_guide_right_section">
            <h3 id="where_to_next">Where to next?</h3>

            
            

            <!-- Related guides section -->
            
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/docker.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Using Docker containers to develop microservices</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">20 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/kubernetes-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Deploying microservices to Kubernetes</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">25 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                </div>
            </div>
            
        </div>
    </div>
</div>
</div>


    </main>

    



<footer>
    <div id="footer_gray_background">
        <div id="footer_top_container" class="footer_container container-fluid">
            <div id="footer_project_container">
                <span id="footer_open_liberty"></span>
                <p id="footer_project">IBM 开放式源代码项目</p>
            </div>
            <div id="footer_round_links_container">
                <a id="footer_github_link" class="footer_round_btn" href="https://github.com/OpenLiberty/" target="_blank" rel="noopener noreferrer" aria-label="Github"></a>
                <a id="footer_twitter_link" class="footer_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="footer_stackoverflow_link" class="footer_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="footer_groupsio_link" class="footer_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="footer_gitter_link" class="footer_round_btn" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>         
    </div>

    <div id="footer_bottom_container" class="footer_container container-fluid">
        <div id="footer_bottom_left_section">
            <p id="footer_copyright">© Copyright IBM Corp. 2017, 2023</p>
            <p class="vertical_bar">|</p>
            <a id="footer_privacy_policy_link" href="https://www.ibm.com/privacy/" target="_blank" rel="noopener noreferrer" class="left_footer_link">隐私策略</a>
            <p class="vertical_bar">|</p>
            <a id="footer_license_link" href="https://github.com/OpenLiberty/open-liberty/blob/release/LICENSE" target="_blank" rel="noopener noreferrer" class="left_footer_link">许可证</a>
            <p class="vertical_bar">|</p>
            <a id="footer_logos_link" href="https://github.com/OpenLiberty/logos" target="_blank" rel="noopener noreferrer" class="left_footer_link">洛戈斯</a>
        </div>
        <div id="footer_bottom_right_section">
            <a id="footer_docs_link" href="/docs" aria-label="Open Liberty Docs" class="right_footer_link blue_link_light_background">文档</a>
            <a id="footer_blog_link" href="/blog" aria-label="Open Liberty Blog" class="right_footer_link blue_link_light_background">博客</a>
            <a id="footer_support_link" href="/support" aria-label="Open Liberty Support" class="right_footer_link blue_link_light_background">支持</a>
        </div>
    </div>
</footer>

<!-- PRE-LOADED IMAGES FOR ON HOVER BEHAVIOR -->
<div class="d-none hidden">
    <img src="/img/Footer_GitCat_Hover.svg" alt="OpenLiberty Github link">
    <img src="/img/Footer_TwitterBird_Hover.svg" alt="OpenLibertyIO Twitter link">
    <img src="/img/Footer_StackO_Hover.svg" alt="Open-liberty Stack Overflow link">
    <img src="/img/Footer_GroupsIO_Hover.svg" alt="Openliberty Groups IO link">
    <img src="/img/footer_gitter_hover.svg" alt="Openliberty Gitter link">
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha512-lzilC+JFd6YV8+vQRNRtU7DOqv5Sa9Ek53lXt/k91HZTJpytHS1L6l1mMKR9K6VVoDt4LiEXaa6XBrYk1YhGTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>


<script type="text/javascript" src="/zh-Hans/assets/devEnvironment.js"></script>




  <script type="text/javascript" src="/zh-Hans/assets/guide-common.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/toc.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/tabs.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-static.js"></script>


<script type="text/javascript" src="/zh-Hans/assets/openliberty.js"></script>

  </body>

</html>
