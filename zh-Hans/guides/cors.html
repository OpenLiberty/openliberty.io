<!DOCTYPE html>
<html lang="zh-Hans">

  





<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Enabling Cross-Origin Resource Sharing (CORS) in a RESTful Java microservice
    
  </title>
  <meta name="description" content="A tutorial with examples on how to add server configurations to enable Cross-Origin Resource Sharing (CORS) in a Java microservice. Learn how to send simple and preflight CORS requests and inspect the HTTP request and response headers.">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/openliberty.css">
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/coderay-custom.css">

  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header-dark.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/toc-multipane-static.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/end-of-guide.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-card.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/tabs.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-common.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane-static.css">
  

  

  

  <link rel="canonical" href="https://openliberty.io/zh-Hans/guides/cors">
  <link rel="alternate" type="application/rss+xml" title="Open Liberty" href="/zh-Hans/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Asap:400,500" rel="stylesheet">
    
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@OpenLibertyIO" />
  <meta name="twitter:title" content="Enabling Cross-Origin Resource Sharing (CORS) in a RESTful Java microservice" />
  <meta name="twitter:description" content="A tutorial with examples on how to add server configurations to enable Cross-Origin Resource Sharing (CORS) in a Java microservice. Learn how to send simple and preflight CORS requests and inspect the HTTP request and response headers." />

  <meta property='og:title' content="Enabling Cross-Origin Resource Sharing (CORS) in a RESTful Java microservice" />
  <meta property='og:image' content="https://openliberty.io/img/twitter_card.jpg" />
  <meta property='og:image:alt' content="Open Liberty Logo" />
  <meta property='og:description' content="A tutorial with examples on how to add server configurations to enable Cross-Origin Resource Sharing (CORS) in a Java microservice. Learn how to send simple and preflight CORS requests and inspect the HTTP request and response headers." />
  <meta property='og:url' content="https://openliberty.io/zh-Hans/guides/cors" />
  <meta property='og:type' content="website" />
  
  <meta name="google-site-verification" content="h2P030H9b66CyL1nEmWfrZB8Fr14h9LmVMG7Ur0caBs" />

  
      <meta name="robots" content="noindex" />
  

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>


  <body>
    
    

    


<!--  -->

<header>
    <nav id="nav_bar">
        <div id="nav_header">
            <a id="home_link" href="/" aria-label="Open Liberty Home">
                <img id="ol_logo" src="/img/docs_openliberty_logo.png" alt="Open Liberty Logo">
            </a>
            <button id="hamburger_toggle_button" onclick="$('#nav_bar').toggleClass('responsive');">
                <span id="hamburger_toggle_icon"></span>
            </button>
        </div>
        <div id="hamburger_menu">
            <ul class="nav_list">
                <li class="nav_link">
                    <a href="/start/">入门</a>
                </li>
                <li class="nav_link">
                    <a href="/guides/">指南</a>
                </li>
                <li class="nav_link">
                    <a href="/docs/">文档</a>
                </li>
                <li class="nav_link">
                    <a href="/support/">支持</a>
                </li>
                <li class="nav_link">
                    <a href="/blog/">博客</a>
                </li>
            </ul>
            <div id="header_round_links_container"> 
                <a id="header_twitter_link" class="header_round_button" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="header_stackoverflow_link" class="header_round_button" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="header_groupsio_link" class="header_round_button" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="header_gitter_link" class="header_round_button" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>

    </nav>
</header>


    <main aria-label="Content">

      <!-- Build a list of all the documents in the guides code base -->
  
 

<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->
<!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
 

<!-- Sort list of guides by date with most recent first -->


<div id="background_container">
  <div id="toc_hotspot"></div>
  <!-- Guide's table of contents section -->
  <div id="toc_column" class="collapse inline open">
    <div id="toc_inner">
       
      <div id="close_container">
        <img id="toc_close_white" src="/img/toc_close_white.svg" alt="Close the table of contents" tabindex="0">
      </div>
      <h3 id="toc_title">Contents</h3>
      <div id="toc_container"><ul class="sectlevel1">
<li>
<a href="#what-youll-learn">What you’ll learn</a>
<ul class="sectlevel2">
<li><a href="#cors-and-its-purpose">CORS and its purpose</a></li>
<li><a href="#types-of-cors-requests">Types of CORS requests</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting started</a></li>
<li>
<a href="#enabling-cors">Enabling CORS</a>
<ul class="sectlevel2">
<li><a href="#enabling-a-simple-cors-configuration">Enabling a simple CORS configuration</a></li>
<li><a href="#enabling-a-preflight-cors-configuration">Enabling a preflight CORS configuration</a></li>
</ul>
</li>
<li><a href="#great-work-youre-done">Great work! You’re done!</a></li>
<li><a href="#guide-attribution">Guide Attribution</a></li>
</ul></div>
      <div id="toc_separator"></div>
      
      <h3 id="tag_title">标签</h3>
      <div id="tags_container"></div>
    </div>
  </div>
  <div id="toc_indicator" tabindex="0" aria-label="Open the table of contents" class="hidden">
    <img src="/img/arrow_white.svg" alt="arrow">
  </div>
  <div id="toc_line" class="open"></div>
  <!-- Entire guide section -->
  <div id="guide_column" class="position_relative open">
    <div id="guide_content">
      <!-- Guide header section -->
      <div id="guide_meta" class="sect1" tabindex="0">
        <h1 id="guide_title">Enabling Cross-Origin Resource Sharing (CORS)</h1>
        <div id="duration_container">
          <img src="/img/guide_duration_clock_icon_large.svg" alt="duration">
          <span id="guide_duration">15 minutes</span>

          <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
          <!-- If new posts count is less than 4, use 4 most recent posts -->
           
          <!-- If new posts count is >= 4, use posts from last 30 days-->
          
          <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
          <!-- Count number of guides from past last 12 weeks that is 84 days-->
          <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
          
        </div>
        <div id="mobile_prereqs_section">
          <p id="mobile_prereqs_title">Prerequisites:</p>
          <div class="prereqs_list"></div>
          <div class="skills_network_container">
            <div class="skills_network_description"></div>
          </div>
        </div>
      </div>

      <div class="scroller_anchor"></div>
      <div id="mobile_toc_accordion_container" data-toggle="collapse" data-target="#toc_column" aria-expanded="false" aria-controls="toc_column" role="button">
        <div role="menuitem" id="mobile_toc_accordion">
          <button class="breadcrumb_hamburger toc-toggle collapsed" type="button" tabindex="0">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <img src="/img/toc_close_green.svg" class="TOC_Close_SVG hidden img-responsive" alt="Table of contents close button">
          </button>
          <span>Table of contents</span>
        </div>
      </div>

      <!-- Guide content section -->
      <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note hidden">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This repository contains the guide documentation source. To view the guide in published form, view it on the <a href="https://openliberty.io/guides/cors.html">Open Liberty website</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Learn how to enable Cross-Origin Resource Sharing (CORS) in Open Liberty without writing Java code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-youll-learn">What you’ll learn</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will learn how to add two Liberty configurations to enable CORS. Next, you will write and run tests to validate that the CORS configurations work. These tests send two different CORS requests to a REST service that has two different endpoints.</p>
</div>
<div class="sect2">
<h3 id="cors-and-its-purpose">CORS and its purpose</h3>
<div class="paragraph">
<p>Cross-Origin Resource Sharing (CORS) is a W3C specification and mechanism that you can use to request restricted resources from a domain outside the current domain. In other words, CORS is a technique for consuming an API served from an origin different than yours.</p>
</div>
<div class="paragraph">
<p>CORS is useful for requesting different kinds of data from websites that aren’t your own. These types of data might include images, videos, scripts, stylesheets, iFrames, or web fonts.</p>
</div>
<div class="paragraph">
<p>However, you cannot request resources from another website domain without proper permission. In JavaScript, cross-origin requests with an <code>XMLHttpRequest</code> API and Ajax cannot happen unless CORS is enabled on the server that receives the request. Otherwise, same-origin security policy prevents the requests. For example, a web page that is served from the <code>http://aboutcors.com</code> server sends a request to get data to the <code>http://openliberty.io</code> server. Because of security concerns, browsers block the server response unless the server adds HTTP response headers to allow the web page to consume the data.</p>
</div>
<div class="paragraph">
<p>Different ports and different protocols also trigger CORS. For example, the <code>http://abc.xyz:1234</code> domain is considered to be different from the <code>https://abc.xyz:4321</code> domain.</p>
</div>
<div class="paragraph">
<p>Open Liberty has built-in support for CORS that gives you an easy and powerful way to configure the runtime to handle CORS requests without the need to write Java code.</p>
</div>
</div>
<div class="sect2">
<h3 id="types-of-cors-requests">Types of CORS requests</h3>
<div class="paragraph">
<p>Familiarize yourself with two kinds of CORS requests to understand the attributes that you will add in the two CORS configurations.</p>
</div>
<div class="sect3">
<h4 id="simple-cors-request">Simple CORS request</h4>
<div class="paragraph">
<p>According to the CORS specification, an HTTP request is a simple CORS request if the request method is <code>GET</code>, <code>HEAD</code>, or <code>POST</code>. The header fields are any one of the <code>Accept</code>, <code>Accept-Language</code>, <code>Content-Language</code>, or <code>Content-Type</code> headers. The <code>Content-Type</code> header has a value of <code>application/x-www-form-urlencoded</code>, <code>multipart/form-data</code>, or <code>text/plain</code>.</p>
</div>
<div class="paragraph">
<p>When clients, such as browsers, send simple CORS requests to servers on different domains, the clients include an <code>Origin</code> header with the original (referring)  host name as the value. If the server allows the origin, the server includes an <code>Access-Control-Allow-Origin</code> header with a list of allowed origins or an asterisk (*) in the response back to the client. The asterisk indicates that all origins are allowed to access the endpoint on the server.</p>
</div>
</div>
<div class="sect3">
<h4 id="preflight-cors-request">Preflight CORS request</h4>
<div class="paragraph">
<p>A CORS request is not a simple CORS request if a client first sends a preflight CORS request before it sends the actual request. For example, the client sends a preflight request before it sends a <code>DELETE</code> HTTP request. To determine whether the request is safe to send, the client sends a preflight request, which is an <code>OPTIONS</code> HTTP request, to gather more information about the server. This preflight request has the <code>Origin</code> header and other headers to indicate the HTTP method and headers of the actual request to be sent after the preflight request.</p>
</div>
<div class="paragraph">
<p>Once the server receives the preflight request, if the origin is allowed, the server responds with headers that indicate the HTTP methods and headers that are allowed in the actual requests. The response might include more CORS-related headers.</p>
</div>
<div class="paragraph">
<p>Next, the client sends the actual request, and the server responds.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 command">
<h2 id="getting-started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fastest way to work through this guide is to clone the <a href="https://github.com/openliberty/guide-cors.git" target="_blank" rel="noopener noreferrer">Git repository</a> and use the projects that are provided inside:</p>
</div>
<div id="git_clone" class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>git clone https://github.com/openliberty/guide-cors.git
cd guide-cors</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>start</code> directory contains the starting project that you will build upon.</p>
</div>
<div class="paragraph">
<p>The <code>finish</code> directory contains the finished project that you will build.</p>
</div>
<div class="paragraph">
<p>Before you begin, make sure you have all the necessary <span class="prerequisites">prerequisites</span>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-cors">Enabling CORS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to the <code>start</code> directory to begin.</p>
</div>
<div class="paragraph command">
<p>When you run Open Liberty in <a href="https://openliberty.io/docs/latest/development-mode.html" target="_blank" rel="noopener">dev mode</a>, dev mode listens for file changes and automatically recompiles and deploys your updates whenever you save a new change. Run the following goal to start Open Liberty in dev mode:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn liberty:dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you see the following message, your Liberty instance is ready in dev mode:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>**************************************************************
*    Liberty is running in dev mode.</pre>
</div>
</div>
<div class="paragraph">
<p>Dev mode holds your command-line session to listen for file changes. Open another command-line session to continue, or open the project in your editor.</p>
</div>
<div class="paragraph">
<p>You will use a REST service that is already provided for you to test your CORS configurations. You can find this service in the <code>src/main/java/io/openliberty/guides/cors/</code> directory.</p>
</div>
<div class="paragraph">
<p>You will send a simple request to the <code>/configurations/simple</code> endpoint and the preflight request to the <code>/configurations/preflight</code> endpoint.</p>
</div>
<div class="sect2">
<h3 id="enabling-a-simple-cors-configuration">Enabling a simple CORS configuration</h3>
<div class="paragraph">
<p>Configure the Liberty to allow the <code>/configurations/simple</code> endpoint to accept a <code class="hotspot=simple-config file=0">simple</code> CORS request. Add a simple CORS configuration to the Liberty <code class="hotspot file=0">server.xml</code> configuration file:</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Replace the Liberty <code>server.xml</code> configuration file.</mark>
<code>src/main/liberty/config/server.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>server.xml</p>
</div>
<div class="listingblock code_column hide_tags=preflight-config">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers"> 1</span><span class="tag">&lt;server</span> <span class="attribute-name">description</span>=<span class="string"><span class="delimiter">"</span><span class="content">Sample Liberty server</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 2</span>
<span class="line-numbers"> 3</span><span class="tag">&lt;featureManager&gt;</span>
<span class="line-numbers"> 4</span>    <span class="tag">&lt;feature&gt;</span>restfulWS-3.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 5</span>    <span class="tag">&lt;feature&gt;</span>jsonb-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 6</span><span class="tag">&lt;/featureManager&gt;</span>
<span class="line-numbers"> 7</span>
<span class="line-numbers"> 8</span><span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.http.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9080</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"> 9</span><span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.https.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9443</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">10</span>
<span class="line-numbers">11</span><span class="tag">&lt;httpEndpoint</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span> <span class="attribute-name">httpPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.http.port}</span><span class="delimiter">"</span></span> <span class="attribute-name">httpsPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.https.port}</span><span class="delimiter">"</span></span>
<span class="line-numbers">12</span>    <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">defaultHttpEndpoint</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="tag">&lt;webApplication</span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">"</span><span class="content">guide-cors.war</span><span class="delimiter">"</span></span> <span class="attribute-name">contextRoot</span>=<span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">15</span>
<span class="line-numbers">16</span><span class="comment">&lt;!-- tag::simple-config[] --&gt;</span>
<span class="line-numbers">17</span><span class="tag">&lt;cors</span> <span class="attribute-name">domain</span>=<span class="string"><span class="delimiter">"</span><span class="content">/configurations/simple</span><span class="delimiter">"</span></span>
<span class="line-numbers">18</span>    <span class="attribute-name">allowedOrigins</span>=<span class="string"><span class="delimiter">"</span><span class="content">openliberty.io</span><span class="delimiter">"</span></span>
<span class="line-numbers">19</span>    <span class="attribute-name">allowedMethods</span>=<span class="string"><span class="delimiter">"</span><span class="content">GET</span><span class="delimiter">"</span></span>
<span class="line-numbers">20</span>    <span class="attribute-name">allowCredentials</span>=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>
<span class="line-numbers">21</span>    <span class="attribute-name">exposeHeaders</span>=<span class="string"><span class="delimiter">"</span><span class="content">MyHeader</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">22</span><span class="comment">&lt;!-- end::simple-config[] --&gt;</span>
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="comment">&lt;!-- tag::preflight-config[] --&gt;</span>
<span class="line-numbers">25</span><span class="tag">&lt;cors</span> <span class="attribute-name">domain</span>=<span class="string"><span class="delimiter">"</span><span class="content">/configurations/preflight</span><span class="delimiter">"</span></span>
<span class="line-numbers">26</span>    <span class="attribute-name">allowedOrigins</span>=<span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span>
<span class="line-numbers">27</span>    <span class="attribute-name">allowedMethods</span>=<span class="string"><span class="delimiter">"</span><span class="content">OPTIONS, DELETE</span><span class="delimiter">"</span></span>
<span class="line-numbers">28</span>    <span class="attribute-name">allowCredentials</span>=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>
<span class="line-numbers">29</span>    <span class="attribute-name">allowedHeaders</span>=<span class="string"><span class="delimiter">"</span><span class="content">MyOwnHeader1, MyOwnHeader2</span><span class="delimiter">"</span></span>
<span class="line-numbers">30</span>    <span class="attribute-name">maxAge</span>=<span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">31</span><span class="comment">&lt;!-- end::preflight-config[] --&gt;</span>
<span class="line-numbers">32</span><span class="tag">&lt;/server&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The CORS configuration contains the following attributes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Configuration Attribute</strong></th>
<th class="tableblock halign-left valign-top"><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=16 file=0">domain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The endpoint to be configured for CORS requests. The value is set to <code>/configurations/simple</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=17 file=0">allowedOrigins</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origins that are allowed to access the endpoint. The value is set to <code>openliberty.io</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=18 file=0">allowedMethods</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP methods that a client is allowed to use when it makes requests to the endpoint. The value is set to <code>GET</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=19 file=0">allowCredentials</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean that indicates whether the user credentials can be included in the request. The value is set to <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=20 file=0">exposeHeaders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Headers that are safe to expose to clients. The value is set to <code>MyHeader</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information about these and other CORS attributes, see the <a href="https://www.openliberty.io/docs/latest/reference/config/cors.html" target="_blank" rel="noopener noreferrer">cors element documentation</a>.</p>
</div>
<div class="paragraph">
<p>Save the changes to the <code class="hotspot file=0">server.xml</code> configuration file. The <code>/configurations/simple</code> endpoint is now ready to be tested with a simple CORS request.</p>
</div>
<div class="paragraph">
<p>The Open Liberty instance was started in dev mode at the beginning of the guide and all the changes were automatically picked up.</p>
</div>
<div class="paragraph">
<p>Now, test the simple CORS configuration that you added. Add the <code class="hotspot=testSimpleCorsRequest file=1">testSimpleCorsRequest</code> method to the <code>CorsIT</code> class.</p>
</div>
<div class="listingblock code_command hotspot file=1">
<div class="content">
<pre><mark>Replace the <code>CorsIT</code> class.</mark>
<code>src/test/java/it/io/openliberty/guides/cors/CorsIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>CorsIT.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,testPreflightCorsRequest">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2019 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.cors</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertEquals</span>;
<span class="line-numbers">15</span>
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">java.net.HttpURLConnection</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">java.util.Map</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">java.util.Map.Entry</span>;
<span class="line-numbers">20</span>
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeEach</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="directive">public</span> <span class="type">class</span> <span class="class">CorsIT</span> {
<span class="line-numbers">25</span>
<span class="line-numbers">26</span>    <span class="predefined-type">String</span> port = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">default.http.port</span><span class="delimiter">"</span></span>);
<span class="line-numbers">27</span>    <span class="predefined-type">String</span> pathToHost = <span class="string"><span class="delimiter">"</span><span class="content">http://localhost:</span><span class="delimiter">"</span></span> + port + <span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span>;
<span class="line-numbers">28</span>
<span class="line-numbers">29</span>    <span class="annotation">@BeforeEach</span>
<span class="line-numbers">30</span>    <span class="directive">public</span> <span class="type">void</span> setUp() {
<span class="line-numbers">31</span>        <span class="comment">// JVM does not allow restricted headers by default</span>
<span class="line-numbers">32</span>        <span class="comment">// Set to true for CORS testing</span>
<span class="line-numbers">33</span>        <span class="predefined-type">System</span>.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">sun.net.http.allowRestrictedHeaders</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>);
<span class="line-numbers">34</span>    }
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="comment">// tag::testSimpleCorsRequest[]</span>
<span class="line-numbers">37</span>    <span class="annotation">@Test</span>
<span class="line-numbers">38</span>    <span class="directive">public</span> <span class="type">void</span> testSimpleCorsRequest() <span class="directive">throws</span> <span class="exception">IOException</span> {
<span class="line-numbers">39</span>        <span class="predefined-type">HttpURLConnection</span> connection = HttpUtils.sendRequest(
<span class="line-numbers">40</span>                        <span class="comment">// tag::get[]</span>
<span class="line-numbers">41</span>                        pathToHost + <span class="string"><span class="delimiter">"</span><span class="content">configurations/simple</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">GET</span><span class="delimiter">"</span></span>,
<span class="line-numbers">42</span>                        <span class="comment">// end::get[]</span>
<span class="line-numbers">43</span>                        TestData.simpleRequestHeaders);
<span class="line-numbers">44</span>        checkCorsResponse(connection, TestData.simpleResponseHeaders);
<span class="line-numbers">45</span>
<span class="line-numbers">46</span>        printResponseHeaders(connection, <span class="string"><span class="delimiter">"</span><span class="content">Simple CORS Request</span><span class="delimiter">"</span></span>);
<span class="line-numbers">47</span>    }
<span class="line-numbers">48</span>    <span class="comment">// end::testSimpleCorsRequest[]</span>
<span class="line-numbers">49</span>
<span class="line-numbers">50</span>    <span class="comment">// tag::testPreflightCorsRequest[]</span>
<span class="line-numbers">51</span>    <span class="annotation">@Test</span>
<span class="line-numbers">52</span>    <span class="directive">public</span> <span class="type">void</span> testPreflightCorsRequest() <span class="directive">throws</span> <span class="exception">IOException</span> {
<span class="line-numbers">53</span>        <span class="predefined-type">HttpURLConnection</span> connection = HttpUtils.sendRequest(
<span class="line-numbers">54</span>                        <span class="comment">// tag::options[]</span>
<span class="line-numbers">55</span>                        pathToHost + <span class="string"><span class="delimiter">"</span><span class="content">configurations/preflight</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">OPTIONS</span><span class="delimiter">"</span></span>,
<span class="line-numbers">56</span>                        <span class="comment">// end::options[]</span>
<span class="line-numbers">57</span>                        TestData.preflightRequestHeaders);
<span class="line-numbers">58</span>        checkCorsResponse(connection, TestData.preflightResponseHeaders);
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>        printResponseHeaders(connection, <span class="string"><span class="delimiter">"</span><span class="content">Preflight CORS Request</span><span class="delimiter">"</span></span>);
<span class="line-numbers">61</span>    }
<span class="line-numbers">62</span>    <span class="comment">// end::testPreflightCorsRequest[]</span>
<span class="line-numbers">63</span>
<span class="line-numbers">64</span>    <span class="directive">public</span> <span class="type">void</span> checkCorsResponse(<span class="predefined-type">HttpURLConnection</span> connection,
<span class="line-numbers">65</span>                    <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; expectedHeaders) <span class="directive">throws</span> <span class="exception">IOException</span> {
<span class="line-numbers">66</span>        assertEquals(<span class="integer">200</span>, connection.getResponseCode(), <span class="string"><span class="delimiter">"</span><span class="content">Invalid HTTP response code</span><span class="delimiter">"</span></span>);
<span class="line-numbers">67</span>        expectedHeaders.forEach((responseHeader, value) -&gt; {
<span class="line-numbers">68</span>            assertEquals(value, connection.getHeaderField(responseHeader),
<span class="line-numbers">69</span>                            <span class="string"><span class="delimiter">"</span><span class="content">Unexpected value for </span><span class="delimiter">"</span></span> + responseHeader + <span class="string"><span class="delimiter">"</span><span class="content"> header</span><span class="delimiter">"</span></span>);
<span class="line-numbers">70</span>        });
<span class="line-numbers">71</span>    }
<span class="line-numbers">72</span>
<span class="line-numbers">73</span>    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> printResponseHeaders(<span class="predefined-type">HttpURLConnection</span> connection,
<span class="line-numbers">74</span>                    <span class="predefined-type">String</span> label) {
<span class="line-numbers">75</span>        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">--- </span><span class="delimiter">"</span></span> + label + <span class="string"><span class="delimiter">"</span><span class="content"> ---</span><span class="delimiter">"</span></span>);
<span class="line-numbers">76</span>        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, java.util.List&lt;<span class="predefined-type">String</span>&gt;&gt; map = connection.getHeaderFields();
<span class="line-numbers">77</span>        <span class="keyword">for</span> (Entry&lt;<span class="predefined-type">String</span>, java.util.List&lt;<span class="predefined-type">String</span>&gt;&gt; entry : map.entrySet()) {
<span class="line-numbers">78</span>            <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">Header </span><span class="delimiter">"</span></span> + entry.getKey() + <span class="string"><span class="delimiter">"</span><span class="content"> = </span><span class="delimiter">"</span></span> + entry.getValue());
<span class="line-numbers">79</span>        }
<span class="line-numbers">80</span>        <span class="predefined-type">System</span>.out.println();
<span class="line-numbers">81</span>    }
<span class="line-numbers">82</span>
<span class="line-numbers">83</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testSimpleCorsRequest file=1">testSimpleCorsRequest</code> test simulates a client. It first sends a simple CORS request to the <code>/configurations/simple</code> endpoint, and then it checks for a valid response and expected headers. Lastly, it prints the response headers for you to inspect.</p>
</div>
<div class="paragraph">
<p>The request is a <code class="hotspot=get file=1">GET</code> HTTP request with the following header:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Request Header</strong></th>
<th class="tableblock halign-left valign-top"><strong>Request Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value is set to <code>openliberty.io</code>. Indicates that the request originates from <code>openliberty.io</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Expect the following response headers and values if the simple CORS request is successful, and the Liberty instance is correctly configured:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Response Header</strong></th>
<th class="tableblock halign-left valign-top"><strong>Response Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Allow-Origin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected value is <code>openliberty.io</code>. Indicates whether a resource can be shared based on the returning value of the Origin request header <code>openliberty.io</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Allow-Credentials</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected value is <code>true</code>. Indicates that the user credentials can be included in the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Expose-Headers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected value is <code>MyHeader</code>. Indicates that the header <code>MyHeader</code> is safe to expose.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Because you started Open Liberty in dev mode, you can run the tests by pressing the <code>enter/return</code> key from the command-line session where you started dev mode.</p>
</div>
<div class="paragraph">
<p>If the <code class="hotspot=testSimpleCorsRequest file=1">testSimpleCorsRequest</code> test passes, the response headers with their values from the endpoint are printed. The <code>/configurations/simple</code> endpoint now accepts simple CORS requests.</p>
</div>
<div class="paragraph">
<p>Response headers with their values from the endpoint:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>--- Simple CORS Request ---
Header null = [HTTP/1.1 200 OK]
Header Access-Control-Expose-Headers = [MyHeader]
Header Access-Control-Allow-Origin = [openliberty.io]
Header Access-Control-Allow-Credentials = [true]
Header Content-Length = [22]
Header Content-Language = [en-CA]
Header Date = [Thu, 21 Mar 2019 17:50:09 GMT]
Header Content-Type = [text/plain]
Header X-Powered-By = [Servlet/4.0]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enabling-a-preflight-cors-configuration">Enabling a preflight CORS configuration</h3>
<div class="paragraph">
<p>Configure the Liberty to allow the <code>/configurations/preflight</code> endpoint to accept a <code class="hotspot=preflight-config file=0">preflight</code> CORS request. Add another CORS configuration in the Liberty <code>server.xml</code> configuration file:</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Replace the Liberty <code>server.xml</code> configuration file.</mark>
<code>src/main/liberty/config/server.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>server.xml</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers"> 1</span><span class="tag">&lt;server</span> <span class="attribute-name">description</span>=<span class="string"><span class="delimiter">"</span><span class="content">Sample Liberty server</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 2</span>
<span class="line-numbers"> 3</span><span class="tag">&lt;featureManager&gt;</span>
<span class="line-numbers"> 4</span>    <span class="tag">&lt;feature&gt;</span>restfulWS-3.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 5</span>    <span class="tag">&lt;feature&gt;</span>jsonb-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 6</span><span class="tag">&lt;/featureManager&gt;</span>
<span class="line-numbers"> 7</span>
<span class="line-numbers"> 8</span><span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.http.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9080</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers"> 9</span><span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.https.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9443</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">10</span>
<span class="line-numbers">11</span><span class="tag">&lt;httpEndpoint</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span> <span class="attribute-name">httpPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.http.port}</span><span class="delimiter">"</span></span> <span class="attribute-name">httpsPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.https.port}</span><span class="delimiter">"</span></span>
<span class="line-numbers">12</span>    <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">defaultHttpEndpoint</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="tag">&lt;webApplication</span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">"</span><span class="content">guide-cors.war</span><span class="delimiter">"</span></span> <span class="attribute-name">contextRoot</span>=<span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">15</span>
<span class="line-numbers">16</span><span class="comment">&lt;!-- tag::simple-config[] --&gt;</span>
<span class="line-numbers">17</span><span class="tag">&lt;cors</span> <span class="attribute-name">domain</span>=<span class="string"><span class="delimiter">"</span><span class="content">/configurations/simple</span><span class="delimiter">"</span></span>
<span class="line-numbers">18</span>    <span class="attribute-name">allowedOrigins</span>=<span class="string"><span class="delimiter">"</span><span class="content">openliberty.io</span><span class="delimiter">"</span></span>
<span class="line-numbers">19</span>    <span class="attribute-name">allowedMethods</span>=<span class="string"><span class="delimiter">"</span><span class="content">GET</span><span class="delimiter">"</span></span>
<span class="line-numbers">20</span>    <span class="attribute-name">allowCredentials</span>=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>
<span class="line-numbers">21</span>    <span class="attribute-name">exposeHeaders</span>=<span class="string"><span class="delimiter">"</span><span class="content">MyHeader</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">22</span><span class="comment">&lt;!-- end::simple-config[] --&gt;</span>
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="comment">&lt;!-- tag::preflight-config[] --&gt;</span>
<span class="line-numbers">25</span><span class="tag">&lt;cors</span> <span class="attribute-name">domain</span>=<span class="string"><span class="delimiter">"</span><span class="content">/configurations/preflight</span><span class="delimiter">"</span></span>
<span class="line-numbers">26</span>    <span class="attribute-name">allowedOrigins</span>=<span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span>
<span class="line-numbers">27</span>    <span class="attribute-name">allowedMethods</span>=<span class="string"><span class="delimiter">"</span><span class="content">OPTIONS, DELETE</span><span class="delimiter">"</span></span>
<span class="line-numbers">28</span>    <span class="attribute-name">allowCredentials</span>=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>
<span class="line-numbers">29</span>    <span class="attribute-name">allowedHeaders</span>=<span class="string"><span class="delimiter">"</span><span class="content">MyOwnHeader1, MyOwnHeader2</span><span class="delimiter">"</span></span>
<span class="line-numbers">30</span>    <span class="attribute-name">maxAge</span>=<span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">31</span><span class="comment">&lt;!-- end::preflight-config[] --&gt;</span>
<span class="line-numbers">32</span><span class="tag">&lt;/server&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The preflight CORS configuration has different values than the simple CORS configuration.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Configuration Attribute</strong></th>
<th class="tableblock halign-left valign-top"><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=24 file=0">domain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value is set to <code>/configurations/preflight</code> because the <code>domain</code> is a different endpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=25 file=0">allowedOrigins</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origins that are allowed to access the endpoint. The value is set to an asterisk (*) to allow requests from all origins.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=26 file=0">allowedMethods</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP methods that a client is allowed to use when it makes requests to the endpoint. The value is set to <code>OPTIONS, DELETE</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="hotspot=27 file=0">allowCredentials</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean that indicates whether the user credentials can be included in the request. The value is set to <code>true</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following attributes were added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="hotspot=28 file=0">allowedHeaders</code>: Headers that a client can use in requests. Set the value to <code>MyOwnHeader1, MyOwnHeader2</code>.</p>
</li>
<li>
<p><code class="hotspot=29 file=0">maxAge</code>: The number of seconds that a client can cache a response to a preflight request. Set the value to <code>10</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Save the changes to the <code class="hotspot file=0">server.xml</code> configuration file. The <code>/configurations/preflight</code> endpoint is now ready to be tested with a preflight CORS request.</p>
</div>
<div class="paragraph">
<p>Add another test to the <code class="hotspot file=1">CorsIT.java</code> file to test the preflight CORS configuration that you just added:</p>
</div>
<div class="listingblock code_command hotspot file=1">
<div class="content">
<pre><mark>Replace the <code>CorsIT</code> class.</mark>
<code>src/test/java/it/io/openliberty/guides/cors/CorsIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>CorsIT.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2019 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.cors</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertEquals</span>;
<span class="line-numbers">15</span>
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">java.net.HttpURLConnection</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">java.util.Map</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">java.util.Map.Entry</span>;
<span class="line-numbers">20</span>
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeEach</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="directive">public</span> <span class="type">class</span> <span class="class">CorsIT</span> {
<span class="line-numbers">25</span>
<span class="line-numbers">26</span>    <span class="predefined-type">String</span> port = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">default.http.port</span><span class="delimiter">"</span></span>);
<span class="line-numbers">27</span>    <span class="predefined-type">String</span> pathToHost = <span class="string"><span class="delimiter">"</span><span class="content">http://localhost:</span><span class="delimiter">"</span></span> + port + <span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span>;
<span class="line-numbers">28</span>
<span class="line-numbers">29</span>    <span class="annotation">@BeforeEach</span>
<span class="line-numbers">30</span>    <span class="directive">public</span> <span class="type">void</span> setUp() {
<span class="line-numbers">31</span>        <span class="comment">// JVM does not allow restricted headers by default</span>
<span class="line-numbers">32</span>        <span class="comment">// Set to true for CORS testing</span>
<span class="line-numbers">33</span>        <span class="predefined-type">System</span>.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">sun.net.http.allowRestrictedHeaders</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>);
<span class="line-numbers">34</span>    }
<span class="line-numbers">35</span>
<span class="line-numbers">36</span>    <span class="comment">// tag::testSimpleCorsRequest[]</span>
<span class="line-numbers">37</span>    <span class="annotation">@Test</span>
<span class="line-numbers">38</span>    <span class="directive">public</span> <span class="type">void</span> testSimpleCorsRequest() <span class="directive">throws</span> <span class="exception">IOException</span> {
<span class="line-numbers">39</span>        <span class="predefined-type">HttpURLConnection</span> connection = HttpUtils.sendRequest(
<span class="line-numbers">40</span>                        <span class="comment">// tag::get[]</span>
<span class="line-numbers">41</span>                        pathToHost + <span class="string"><span class="delimiter">"</span><span class="content">configurations/simple</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">GET</span><span class="delimiter">"</span></span>,
<span class="line-numbers">42</span>                        <span class="comment">// end::get[]</span>
<span class="line-numbers">43</span>                        TestData.simpleRequestHeaders);
<span class="line-numbers">44</span>        checkCorsResponse(connection, TestData.simpleResponseHeaders);
<span class="line-numbers">45</span>
<span class="line-numbers">46</span>        printResponseHeaders(connection, <span class="string"><span class="delimiter">"</span><span class="content">Simple CORS Request</span><span class="delimiter">"</span></span>);
<span class="line-numbers">47</span>    }
<span class="line-numbers">48</span>    <span class="comment">// end::testSimpleCorsRequest[]</span>
<span class="line-numbers">49</span>
<span class="line-numbers">50</span>    <span class="comment">// tag::testPreflightCorsRequest[]</span>
<span class="line-numbers">51</span>    <span class="annotation">@Test</span>
<span class="line-numbers">52</span>    <span class="directive">public</span> <span class="type">void</span> testPreflightCorsRequest() <span class="directive">throws</span> <span class="exception">IOException</span> {
<span class="line-numbers">53</span>        <span class="predefined-type">HttpURLConnection</span> connection = HttpUtils.sendRequest(
<span class="line-numbers">54</span>                        <span class="comment">// tag::options[]</span>
<span class="line-numbers">55</span>                        pathToHost + <span class="string"><span class="delimiter">"</span><span class="content">configurations/preflight</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">OPTIONS</span><span class="delimiter">"</span></span>,
<span class="line-numbers">56</span>                        <span class="comment">// end::options[]</span>
<span class="line-numbers">57</span>                        TestData.preflightRequestHeaders);
<span class="line-numbers">58</span>        checkCorsResponse(connection, TestData.preflightResponseHeaders);
<span class="line-numbers">59</span>
<span class="line-numbers">60</span>        printResponseHeaders(connection, <span class="string"><span class="delimiter">"</span><span class="content">Preflight CORS Request</span><span class="delimiter">"</span></span>);
<span class="line-numbers">61</span>    }
<span class="line-numbers">62</span>    <span class="comment">// end::testPreflightCorsRequest[]</span>
<span class="line-numbers">63</span>
<span class="line-numbers">64</span>    <span class="directive">public</span> <span class="type">void</span> checkCorsResponse(<span class="predefined-type">HttpURLConnection</span> connection,
<span class="line-numbers">65</span>                    <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; expectedHeaders) <span class="directive">throws</span> <span class="exception">IOException</span> {
<span class="line-numbers">66</span>        assertEquals(<span class="integer">200</span>, connection.getResponseCode(), <span class="string"><span class="delimiter">"</span><span class="content">Invalid HTTP response code</span><span class="delimiter">"</span></span>);
<span class="line-numbers">67</span>        expectedHeaders.forEach((responseHeader, value) -&gt; {
<span class="line-numbers">68</span>            assertEquals(value, connection.getHeaderField(responseHeader),
<span class="line-numbers">69</span>                            <span class="string"><span class="delimiter">"</span><span class="content">Unexpected value for </span><span class="delimiter">"</span></span> + responseHeader + <span class="string"><span class="delimiter">"</span><span class="content"> header</span><span class="delimiter">"</span></span>);
<span class="line-numbers">70</span>        });
<span class="line-numbers">71</span>    }
<span class="line-numbers">72</span>
<span class="line-numbers">73</span>    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> printResponseHeaders(<span class="predefined-type">HttpURLConnection</span> connection,
<span class="line-numbers">74</span>                    <span class="predefined-type">String</span> label) {
<span class="line-numbers">75</span>        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">--- </span><span class="delimiter">"</span></span> + label + <span class="string"><span class="delimiter">"</span><span class="content"> ---</span><span class="delimiter">"</span></span>);
<span class="line-numbers">76</span>        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, java.util.List&lt;<span class="predefined-type">String</span>&gt;&gt; map = connection.getHeaderFields();
<span class="line-numbers">77</span>        <span class="keyword">for</span> (Entry&lt;<span class="predefined-type">String</span>, java.util.List&lt;<span class="predefined-type">String</span>&gt;&gt; entry : map.entrySet()) {
<span class="line-numbers">78</span>            <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">Header </span><span class="delimiter">"</span></span> + entry.getKey() + <span class="string"><span class="delimiter">"</span><span class="content"> = </span><span class="delimiter">"</span></span> + entry.getValue());
<span class="line-numbers">79</span>        }
<span class="line-numbers">80</span>        <span class="predefined-type">System</span>.out.println();
<span class="line-numbers">81</span>    }
<span class="line-numbers">82</span>
<span class="line-numbers">83</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testPreflightCorsRequest file=1">testPreflightCorsRequest</code> test simulates a client sending a preflight CORS request. It first sends the request to the <code>/configurations/preflight</code> endpoint, and then it checks for a valid response and expected headers. Lastly, it prints the response headers for you to inspect.</p>
</div>
<div class="paragraph">
<p>The request is an <code class="hotspot=options file=1">OPTIONS</code> HTTP request with the following headers:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Request Header</strong></th>
<th class="tableblock halign-left valign-top"><strong>Request Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value is set to <code>anywebsiteyoulike.com</code>. Indicates that the request originates from <code>anywebsiteyoulike.com</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Request-Method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value is set to <code>DELETE</code>. Indicates that the HTTP DELETE method will be used in the actual request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Request-Headers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value is set to <code>MyOwnHeader2</code>. Indicates the header <code>MyOwnHeader2</code> will be used in the actual request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Expect the following response headers and values if the preflight CORS request is successful, and the Liberty instance is correctly configured:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Response Header</strong></th>
<th class="tableblock halign-left valign-top"><strong>Response Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Max-Age</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected value is <code>10</code>. Indicates that the preflight request can be cached within <code>10</code> seconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Allow-Origin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected value is <code>anywebsiteyoulike.com</code>. Indicates whether a resource can be shared based on the returning value of the Origin request header <code>anywebsiteyoulike.com</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Allow-Methods</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected value is <code>OPTIONS, DELETE</code>. Indicates that HTTP OPTIONS and DELETE methods can be used in the actual request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Allow-Credentials</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected value is <code>true</code>. Indicates that the user credentials can be included in the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access-Control-Allow-Headers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expected value is <code>MyOwnHeader1, MyOwnHeader2</code>. Indicates that the header <code>MyOwnHeader1</code> and <code>MyOwnHeader2</code> are safe to expose.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>Access-Control-Allow-Origin</code> header has a value of <code>anywebsiteyoulike.com</code> because the Liberty is configured to allow all origins, and the request came with an origin of <code>anywebsiteyoulike.com</code>.</p>
</div>
<div class="paragraph">
<p>Because you started Open Liberty in dev mode, you can run the tests by pressing the <code>enter/return</code> key from the command-line session where you started dev mode.</p>
</div>
<div class="paragraph">
<p>If the <code class="hotspot=testPreflightCorsRequest file=1">testPreflightCorsRequest</code> test passes, the response headers with their values from the endpoint are printed. The <code>/configurations/preflight</code> endpoint now allows preflight CORS requests.</p>
</div>
<div class="paragraph">
<p>Response headers with their values from the endpoint:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>--- Preflight CORS Request ---
Header null = [HTTP/1.1 200 OK]
Header Access-Control-Allow-Origin = [anywebsiteyoulike.com]
Header Access-Control-Allow-Methods = [OPTIONS, DELETE]
Header Access-Control-Allow-Credentials = [true]
Header Content-Length = [0]
Header Access-Control-Max-Age = [10]
Header Date = [Thu, 21 Mar 2019 18:21:13 GMT]
Header Content-Language = [en-CA]
Header Access-Control-Allow-Headers = [MyOwnHeader1, MyOwnHeader2]
Header X-Powered-By = [Servlet/4.0]</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can modify the Liberty configuration and the test code to experiment with the various CORS configuration attributes.</p>
</div>
<div class="paragraph command">
<p>When you are done checking out the service, exit dev mode by pressing <code>CTRL+C</code> in the command-line session where you ran Liberty, or by typing <code>q</code> and then pressing the <code>enter/return</code> key.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="great-work-youre-done">Great work! You’re done!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You enabled CORS support in Open Liberty. You added two different CORS configurations to allow two kinds of CORS requests in the Liberty <code>server.xml</code> configuration file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guide-attribution">Guide Attribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enabling Cross-Origin Resource Sharing (CORS) <span class="licensedClass">by</span> Open Liberty <span class="licensedClass">is licensed under</span> CC BY-ND 4.0</p>
</div>
</div>
</div>
    </div>
  </div>

  <!-- Code section -->
  <div id="code_column" class="position_relative" tabindex="0">
    <div id="code_column_title_container">
      <div id="code_column_tabs_container" class="dimmed">
        <ul id="code_column_tabs" class="nav" role="tablist"></ul>
      </div>
      <div class="copyFileButton" tabindex="0">
        <img src="/img/guides_copy_button.svg" alt="Copy file contents" title="Copy file contents">
        <div id="code_section_copied_confirmation">Copied to clipboard </div>
      </div>
    </div>
    <div id="code_column_content"></div>

    <div id="prereqs_container">
      <p id="prereqs_title">Prerequisites:</p>
      <div class="prereqs_list"></div>
      <div class="skills_network_container">
        <div class="skills_network_description"></div>
      </div>
    </div>

    <button id="dismiss_button" aria-label="Back to text" tabindex="0">
      Back to text
    </button>
  </div>
</div>

<!-- Build a list of all the documents in the guides code base -->






<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->


    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    


<!-- Sort list of guides by date with most recent first -->





<div id="end_of_guide">
        <h2 tabindex="0">Nice work! Where to next?</h2>
        <div id="end_of_guide_left_section">
            <p id="guide_attribution"></p>
            
            <h3 id="feedback_rating_question">What did you think of this guide?</h3>
            <div id="feedback_ratings">
                <img class="guide_rating" id="extreme_dislike" src="/img/1_Extreme_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Extreme Dislike" data-guide-rating="1" tabindex="0" aria-label="Rate this guide as extreme dislike">
                <img class="guide_rating" id="dislike" src="/img/2_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Dislike" data-guide-rating="2" tabindex="0" aria-label="Rate this guide as dislike">
                <img class="guide_rating" id="like" src="/img/3_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Like" data-guide-rating="3" tabindex="0" aria-label="Rate this guide as like">
                <img class="guide_rating" id="extreme_like" src="/img/4_Extreme_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Extreme Like" data-guide-rating="4" tabindex="0" aria-label="Rate this guide as extreme like">
            </div>

            <div id="like_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <button id="close_button" class="popup_button" onclick="$('#like_popup').hide();">Close</button>
                </div>
            </div>

            <div id="dislike_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <p id="open_issue">Would you like to open an issue in GitHub?</p>
                    
                        <a href="https://github.com/OpenLiberty/guide-cors/issues/new" target="_blank" id="yes_button" class="popup_button" onclick="$('#dislike_popup').hide();" rel="noopener noreferrer">Yes</a>
                    
                    <button id="no_button" class="popup_button" onclick="$('#dislike_popup').hide();">No, thank you</button>
                </div>
            </div>

            <h3 id="improve_guide_feedback">What could make this guide better?</h3>
            
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-cors/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-cors/pulls">Create a pull request</a> to contribute to this guide</p>
            

            <h3 id="need_help">Need help?</h3>
            <p><a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/open-liberty">Ask a question on Stack Overflow</a></p>

            <h3>Like Open Liberty? Star our repo on GitHub.</h3>
            <a class="github-button" href="https://github.com/OpenLiberty/open-liberty" data-icon="octicon-star" aria-label="Star OpenLiberty/open-liberty on GitHub" target="_blank" rel="noopener noreferrer">Star</a>
        </div>
        <div id="end_of_guide_right_section">
            <h3 id="where_to_next">Where to next?</h3>

            
            

            <!-- Related guides section -->
            
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/rest-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Creating a RESTful web service</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">30 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/rest-client-java.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Consuming a RESTful web service</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">25 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                </div>
            </div>
            
        </div>
    </div>



    </main>

    



<footer>
    <div id="footer_gray_background">
        <div id="footer_top_container" class="footer_container container-fluid">
            <div id="footer_project_container">
                <span id="footer_open_liberty"></span>
                <p id="footer_project">IBM 开放式源代码项目</p>
            </div>
            <div id="footer_round_links_container">
                <a id="footer_github_link" class="footer_round_btn" href="https://github.com/OpenLiberty/" target="_blank" rel="noopener noreferrer" aria-label="Github"></a>
                <a id="footer_twitter_link" class="footer_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="footer_stackoverflow_link" class="footer_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="footer_groupsio_link" class="footer_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="footer_gitter_link" class="footer_round_btn" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>         
    </div>

    <div id="footer_bottom_container" class="footer_container container-fluid">
        <div id="footer_bottom_left_section">
            <p id="footer_copyright">© Copyright IBM Corp. 2017, 2023</p>
            <p class="vertical_bar">|</p>
            <a id="footer_privacy_policy_link" href="https://www.ibm.com/privacy/" target="_blank" rel="noopener noreferrer" class="left_footer_link">隐私策略</a>
            <p class="vertical_bar">|</p>
            <a id="footer_license_link" href="https://github.com/OpenLiberty/open-liberty/blob/release/LICENSE" target="_blank" rel="noopener noreferrer" class="left_footer_link">许可证</a>
            <p class="vertical_bar">|</p>
            <a id="footer_logos_link" href="https://github.com/OpenLiberty/logos" target="_blank" rel="noopener noreferrer" class="left_footer_link">洛戈斯</a>
        </div>
        <div id="footer_bottom_right_section">
            <a id="footer_docs_link" href="/docs" aria-label="Open Liberty Docs" class="right_footer_link blue_link_light_background">文档</a>
            <a id="footer_blog_link" href="/blog" aria-label="Open Liberty Blog" class="right_footer_link blue_link_light_background">博客</a>
            <a id="footer_support_link" href="/support" aria-label="Open Liberty Support" class="right_footer_link blue_link_light_background">支持</a>
        </div>
    </div>
</footer>

<!-- PRE-LOADED IMAGES FOR ON HOVER BEHAVIOR -->
<div class="d-none hidden">
    <img src="/img/Footer_GitCat_Hover.svg" alt="OpenLiberty Github link">
    <img src="/img/Footer_TwitterBird_Hover.svg" alt="OpenLibertyIO Twitter link">
    <img src="/img/Footer_StackO_Hover.svg" alt="Open-liberty Stack Overflow link">
    <img src="/img/Footer_GroupsIO_Hover.svg" alt="Openliberty Groups IO link">
    <img src="/img/footer_gitter_hover.svg" alt="Openliberty Gitter link">
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha512-lzilC+JFd6YV8+vQRNRtU7DOqv5Sa9Ek53lXt/k91HZTJpytHS1L6l1mMKR9K6VVoDt4LiEXaa6XBrYk1YhGTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>


<script type="text/javascript" src="/zh-Hans/assets/devEnvironment.js"></script>




  <script type="text/javascript" src="/zh-Hans/assets/guide-common.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/toc.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/tabs.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-static.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-multipane-static.js"></script>


<script type="text/javascript" src="/zh-Hans/assets/openliberty.js"></script>

  </body>

</html>
