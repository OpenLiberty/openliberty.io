<!DOCTYPE html>
<html lang="zh-Hans">

  





<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Implementing a GraphQL client microservice in Java to run GraphQL queries and mutations
    
  </title>
  <meta name="description" content="A tutorial with examples on how to use the third-party Smallrye GraphQL client API to develop a Java microservice to run GraphQL queries and mutations">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/openliberty.css">
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/coderay-custom.css">

  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header-dark.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/toc-multipane-static.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/end-of-guide.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-card.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/tabs.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-common.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane-static.css">
  

  

  

  <link rel="canonical" href="https://openliberty.io/zh-Hans/guides/graphql-client">
  <link rel="alternate" type="application/rss+xml" title="Open Liberty" href="/zh-Hans/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Asap:400,500" rel="stylesheet">
    
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@OpenLibertyIO" />
  <meta name="twitter:title" content="Implementing a GraphQL client microservice in Java to run GraphQL queries and mutations" />
  <meta name="twitter:description" content="A tutorial with examples on how to use the third-party Smallrye GraphQL client API to develop a Java microservice to run GraphQL queries and mutations" />

  <meta property='og:title' content="Implementing a GraphQL client microservice in Java to run GraphQL queries and mutations" />
  <meta property='og:image' content="https://openliberty.io/img/twitter_card.jpg" />
  <meta property='og:image:alt' content="Open Liberty Logo" />
  <meta property='og:description' content="A tutorial with examples on how to use the third-party Smallrye GraphQL client API to develop a Java microservice to run GraphQL queries and mutations" />
  <meta property='og:url' content="https://openliberty.io/zh-Hans/guides/graphql-client" />
  <meta property='og:type' content="website" />
  
  <meta name="google-site-verification" content="h2P030H9b66CyL1nEmWfrZB8Fr14h9LmVMG7Ur0caBs" />

  
      <meta name="robots" content="noindex" />
  

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>


  <body>
    
    

    


<!--  -->

<header>
    <nav id="nav_bar">
        <div id="nav_header">
            <a id="home_link" href="/" aria-label="Open Liberty Home">
                <img id="ol_logo" src="/img/docs_openliberty_logo.png" alt="Open Liberty Logo">
            </a>
            <button id="hamburger_toggle_button" onclick="$('#nav_bar').toggleClass('responsive');">
                <span id="hamburger_toggle_icon"></span>
            </button>
        </div>
        <div id="hamburger_menu">
            <ul class="nav_list">
                <li class="nav_link">
                    <a href="/start/">入门</a>
                </li>
                <li class="nav_link">
                    <a href="/guides/">指南</a>
                </li>
                <li class="nav_link">
                    <a href="/docs/">文档</a>
                </li>
                <li class="nav_link">
                    <a href="/support/">支持</a>
                </li>
                <li class="nav_link">
                    <a href="/blog/">博客</a>
                </li>
            </ul>
            <div id="header_round_links_container"> 
                <a id="header_twitter_link" class="header_round_button" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="header_stackoverflow_link" class="header_round_button" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="header_groupsio_link" class="header_round_button" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="header_gitter_link" class="header_round_button" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>

    </nav>
</header>


    <main aria-label="Content">

      <!-- Build a list of all the documents in the guides code base -->
  
 

<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->
<!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
 

<!-- Sort list of guides by date with most recent first -->


<div id="background_container">
  <div id="toc_hotspot"></div>
  <!-- Guide's table of contents section -->
  <div id="toc_column" class="collapse inline open">
    <div id="toc_inner">
       
      <div id="close_container">
        <img id="toc_close_white" src="/img/toc_close_white.svg" alt="Close the table of contents" tabindex="0">
      </div>
      <h3 id="toc_title">Contents</h3>
      <div id="toc_container"><ul class="sectlevel1">
<li><a href="#what-youll-learn">What you’ll learn</a></li>
<li><a href="#additional-prerequisites">Additional prerequisites</a></li>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#implementing-a-graphql-client">Implementing a GraphQL client</a></li>
<li><a href="#building-and-running-the-application">Building and running the application</a></li>
<li>
<a href="#accessing-the-application">Accessing the application</a>
<ul class="sectlevel2">
<li><a href="#try-the-query-operations">Try the query operations</a></li>
<li><a href="#try-the-mutation-operation">Try the mutation operation</a></li>
</ul>
</li>
<li><a href="#tearing-down-the-environment">Tearing down the environment</a></li>
<li>
<a href="#testing-the-application">Testing the application</a>
<ul class="sectlevel2">
<li><a href="#running-the-tests">Running the tests</a></li>
</ul>
</li>
<li><a href="#great-work-youre-done">Great work! You’re done!</a></li>
<li><a href="#guide-attribution">Guide Attribution</a></li>
</ul></div>
      <div id="toc_separator"></div>
      
      <h3 id="tag_title">标签</h3>
      <div id="tags_container"></div>
    </div>
  </div>
  <div id="toc_indicator" tabindex="0" aria-label="Open the table of contents" class="hidden">
    <img src="/img/arrow_white.svg" alt="arrow">
  </div>
  <div id="toc_line" class="open"></div>
  <!-- Entire guide section -->
  <div id="guide_column" class="position_relative open">
    <div id="guide_content">
      <!-- Guide header section -->
      <div id="guide_meta" class="sect1" tabindex="0">
        <h1 id="guide_title">Running GraphQL queries and mutations using a GraphQL client</h1>
        <div id="duration_container">
          <img src="/img/guide_duration_clock_icon_large.svg" alt="duration">
          <span id="guide_duration">20 minutes</span>

          <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
          <!-- If new posts count is less than 4, use 4 most recent posts -->
           
          <!-- If new posts count is >= 4, use posts from last 30 days-->
          
          <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
          <!-- Count number of guides from past last 12 weeks that is 84 days-->
          <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
          
        </div>
        <div id="mobile_prereqs_section">
          <p id="mobile_prereqs_title">Prerequisites:</p>
          <div class="prereqs_list"></div>
          <div class="skills_network_container">
            <div class="skills_network_description"></div>
          </div>
        </div>
      </div>

      <div class="scroller_anchor"></div>
      <div id="mobile_toc_accordion_container" data-toggle="collapse" data-target="#toc_column" aria-expanded="false" aria-controls="toc_column" role="button">
        <div role="menuitem" id="mobile_toc_accordion">
          <button class="breadcrumb_hamburger toc-toggle collapsed" type="button" tabindex="0">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <img src="/img/toc_close_green.svg" class="TOC_Close_SVG hidden img-responsive" alt="Table of contents close button">
          </button>
          <span>Table of contents</span>
        </div>
      </div>

      <!-- Guide content section -->
      <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note hidden">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This repository contains the guide documentation source. To view the guide in published form,
view it on the <a href="https://openliberty.io/guides/graphql-client.html">Open Liberty website</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Learn how to use the SmallRye GraphQL client’s typesafe interface to query and mutate data from multiple microservices.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-youll-learn">What you’ll learn</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GraphQL is an open source data query language. You can use a GraphQL service to obtain data from multiple sources, such as APIs, databases, and other services, by sending a single request to a GraphQL service. GraphQL services require less data fetching than REST services, which results in faster application load times and lower data transfer costs. This guide assumes you have a basic understanding of <a href="https://openliberty.io/docs/latest/microprofile-graphql.html" target="_blank" rel="noopener">GraphQL concepts</a>. If you’re new to GraphQL, you might want to start with the <a href="https://openliberty.io/guides/microprofile-graphql.html" target="_blank" rel="noopener">Optimizing REST queries for microservices with GraphQL</a> guide first.</p>
</div>
<div class="paragraph">
<p>You’ll use the <a href="https://github.com/smallrye/smallrye-graphql#client" target="_blank" rel="noopener noreferrer">SmallRye GraphQL client</a> to create a <code>query</code> microservice that will make requests to the <code>graphql</code> microservice. The <code>graphql</code> microservice retrieves data from multiple <code>system</code> microservices and is identical to the one created as part of the <a href="https://openliberty.io/guides/microprofile-graphql.html" target="_blank" rel="noopener">Optimizing REST queries for microservices with GraphQL</a> guide.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/guide/graphql-client/architecture.png" alt="GraphQL client application architecture where multiple system microservices are integrated behind the graphql service" width="and the query service uses GraphQL client APIs to access the graphql service. align=" center>
</div>
</div>
<div class="paragraph">
<p>The results of the requests will be displayed at REST endpoints. OpenAPI will be used to help make the requests and display the data. To learn more about OpenAPI, check out the <a href="https://openliberty.io/guides/microprofile-openapi.html" target="_blank" rel="noopener">Documenting RESTful APIs</a> guide.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-prerequisites">Additional prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you begin, Docker needs to be installed. For installation instructions, refer to the <a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">official Docker documentation</a>. You will build and run the application in Docker containers.</p>
</div>
<div class="paragraph">
<p>Make sure to start your Docker daemon before you proceed.</p>
</div>
</div>
</div>
<div class="sect1 command">
<h2 id="getting-started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fastest way to work through this guide is to clone the <a href="https://github.com/openliberty/guide-graphql-client.git" target="_blank" rel="noopener noreferrer">Git repository</a> and use the projects that are provided inside:</p>
</div>
<div id="git_clone" class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>git clone https://github.com/openliberty/guide-graphql-client.git
cd guide-graphql-client</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>start</code> directory contains the starting project that you will build upon.</p>
</div>
<div class="paragraph">
<p>The <code>finish</code> directory contains the finished project that you will build.</p>
</div>
<div class="paragraph">
<p>Before you begin, make sure you have all the necessary <span class="prerequisites">prerequisites</span>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementing-a-graphql-client">Implementing a GraphQL client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to the <code>start</code> directory to begin.</p>
</div>
<div class="paragraph">
<p>The <a href="https://github.com/smallrye/smallrye-graphql#client" target="_blank" rel="noopener noreferrer">SmallRye GraphQL client</a> is used to implement the GraphQL client service. The SmallRye GraphQL client supports two types of clients: typesafe and dynamic. A typesafe client is easy to use and provides a high-level approach, while a dynamic client provides a more customizable and low-level approach to handle operations and responses. You will implement a typesafe client microservice.</p>
</div>
<div class="paragraph">
<p>The typesafe client interface contains a method for each resolver available in the <code>graphql</code> microservice. The JSON objects returned by the <code>graphql</code> microservice are converted to Java objects.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Create the <code>GraphQlClient</code> interface.</mark>
<code>query/src/main/java/io/openliberty/guides/query/client/GraphQlClient.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>GraphQlClient.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.query.client</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Query</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Mutation</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.graphql.Name</span>;
<span class="line-numbers">17</span>
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemInfo</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemLoad</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">io.smallrye.graphql.client.typesafe.api.GraphQLClientApi</span>;
<span class="line-numbers">21</span>
<span class="line-numbers">22</span><span class="comment">// tag::clientApi[]</span>
<span class="line-numbers">23</span><span class="annotation">@GraphQLClientApi</span>
<span class="line-numbers">24</span><span class="comment">// end::clientApi[]</span>
<span class="line-numbers">25</span><span class="directive">public</span> <span class="type">interface</span> <span class="class">GraphQlClient</span> {
<span class="line-numbers">26</span>    <span class="comment">// tag::querySystemTag[]</span>
<span class="line-numbers">27</span>    <span class="annotation">@Query</span>
<span class="line-numbers">28</span>    <span class="comment">// end::querySystemTag[]</span>
<span class="line-numbers">29</span>    <span class="comment">// tag::systemInfo[]</span>
<span class="line-numbers">30</span>    SystemInfo system(<span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostname</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> hostname);
<span class="line-numbers">31</span>    <span class="comment">// end::systemInfo[]</span>
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="comment">// tag::querySystemLoadTag[]</span>
<span class="line-numbers">34</span>    <span class="annotation">@Query</span>(<span class="string"><span class="delimiter">"</span><span class="content">systemLoad</span><span class="delimiter">"</span></span>)
<span class="line-numbers">35</span>    <span class="comment">// end::querySystemLoadTag[]</span>
<span class="line-numbers">36</span>    <span class="comment">// tag::systemLoad[]</span>
<span class="line-numbers">37</span>    SystemLoad<span class="type">[]</span> getSystemLoad(<span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostnames</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span><span class="type">[]</span> hostnames);
<span class="line-numbers">38</span>    <span class="comment">// end::systemLoad[]</span>
<span class="line-numbers">39</span>
<span class="line-numbers">40</span>    <span class="comment">// tag::mutationTag[]</span>
<span class="line-numbers">41</span>    <span class="annotation">@Mutation</span>
<span class="line-numbers">42</span>    <span class="comment">// end::mutationTag[]</span>
<span class="line-numbers">43</span>    <span class="comment">// tag::editNote[]</span>
<span class="line-numbers">44</span>    <span class="type">boolean</span> editNote(<span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostname</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> host, <span class="annotation">@Name</span>(<span class="string"><span class="delimiter">"</span><span class="content">note</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> note);
<span class="line-numbers">45</span>    <span class="comment">// end::editNote[]</span>
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot file=0">GraphQlClient</code> interface is annotated with the <code class="hotspot=clientApi file=0">@GraphQlClientApi</code> annotation. This annotation denotes that this interface is used to create a typesafe GraphQL client.</p>
</div>
<div class="paragraph">
<p>Inside the interface, a method header is written for each resolver available in the <code>graphql</code> microservice. The names of the methods match the names of the resolvers in the GraphQL schema. Resolvers that require input variables have the input variables passed in using the <code class="hotspot=systemInfo hotspot=systemLoad hotspot=editNote file=0">@Name</code> annotation on the method inputs. The return types of the methods should match those of the GraphQL resolvers.</p>
</div>
<div class="paragraph">
<p>For example, the <code class="hotspot=systemInfo file=0">system()</code> method maps to the <code>system</code> resolver. The resolver returns a <code>SystemInfo</code> object, which is described by the <code>SystemInfo</code> class. Thus, the <code class="hotspot=systemInfo file=0">system()</code> method returns the type <code>SystemInfo</code>.</p>
</div>
<div class="paragraph">
<p>The name of each resolver is the method name, but it can be overridden with the <code class="hotspot=querySystemTag hotspot=querySystemLoadTag file=0">@Query</code> or <code class="hotspot=mutationTag file=0">@Mutation</code> annotations. For example, the name of the method <code class="hotspot=systemLoad file=0">getSystemLoad</code> is overridden as <code class="hotspot=querySystemLoadTag file=0">systemLoad</code>. The GraphQL request that goes over the wire will use the name overridden by the <code>@Query</code> and <code>@Mutation</code> annotation. Similarly, the name of the method inputs can be overridden by the <code class="hotspot=systemInfo hotspot=systemLoad hotspot=editNote file=0">@Name</code> annotation. For example, input <code class="hotspot=editNote file=0">host</code> is overridden as <code class="hotspot=editNote file=0">hostname</code> in the <code class="hotspot=editNote file=0">editNote()</code> method.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=editNote file=0">editNote</code> <code>mutation</code> operation has the <code class="hotspot=mutationTag file=0">@Mutation</code> annotation on it. A <code>mutation</code> operation allows you to modify data, in this case, it allows you to add and edit a note to the system service. If the <code class="hotspot=mutationTag file=0">@Mutation</code> annotation were not placed on the method, it would be treated as if it mapped to a <code>query</code> operation.</p>
</div>
<div class="listingblock code_command hotspot file=1">
<div class="content">
<pre><mark>Create the <code>QueryResource</code> class.</mark>
<code>query/src/main/java/io/openliberty/guides/query/QueryResource.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>QueryResource.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.query</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.NoteInfo</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemInfo</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemLoad</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.query.client.GraphQlClient</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">io.smallrye.graphql.client.typesafe.api.TypesafeGraphQLClientBuilder</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.enterprise.context.ApplicationScoped</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Consumes</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.GET</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.POST</span>;
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;
<span class="line-numbers">24</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.PathParam</span>;
<span class="line-numbers">25</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Produces</span>;
<span class="line-numbers">26</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.MediaType</span>;
<span class="line-numbers">27</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers">28</span>
<span class="line-numbers">29</span><span class="annotation">@ApplicationScoped</span>
<span class="line-numbers">30</span><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">query</span><span class="delimiter">"</span></span>)
<span class="line-numbers">31</span><span class="directive">public</span> <span class="type">class</span> <span class="class">QueryResource</span> {
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="comment">// tag::clientBuilder[]</span>
<span class="line-numbers">34</span>    <span class="directive">private</span> GraphQlClient gc = TypesafeGraphQLClientBuilder.newBuilder()
<span class="line-numbers">35</span>                                                   .build(GraphQlClient.class);
<span class="line-numbers">36</span>    <span class="comment">// end::clientBuilder[]</span>
<span class="line-numbers">37</span>
<span class="line-numbers">38</span>    <span class="annotation">@GET</span>
<span class="line-numbers">39</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">system/{hostname}</span><span class="delimiter">"</span></span>)
<span class="line-numbers">40</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">41</span>    <span class="directive">public</span> SystemInfo querySystem(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostname</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> hostname) {
<span class="line-numbers">42</span>        <span class="comment">// tag::clientUsed1[]</span>
<span class="line-numbers">43</span>        <span class="keyword">return</span> gc.system(hostname);
<span class="line-numbers">44</span>        <span class="comment">// end::clientUsed1[]</span>
<span class="line-numbers">45</span>    }
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>    <span class="annotation">@GET</span>
<span class="line-numbers">48</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">systemLoad/{hostnames}</span><span class="delimiter">"</span></span>)
<span class="line-numbers">49</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">50</span>    <span class="directive">public</span> SystemLoad<span class="type">[]</span> querySystemLoad(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostnames</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> hostnames) {
<span class="line-numbers">51</span>        <span class="predefined-type">String</span><span class="type">[]</span> hostnameArray = hostnames.split(<span class="string"><span class="delimiter">"</span><span class="content">,</span><span class="delimiter">"</span></span>);
<span class="line-numbers">52</span>        <span class="comment">// tag::clientUsed2[]</span>
<span class="line-numbers">53</span>        <span class="keyword">return</span> gc.getSystemLoad(hostnameArray);
<span class="line-numbers">54</span>        <span class="comment">// end::clientUsed2[]</span>
<span class="line-numbers">55</span>    }
<span class="line-numbers">56</span>
<span class="line-numbers">57</span>    <span class="annotation">@POST</span>
<span class="line-numbers">58</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">mutation/system/note</span><span class="delimiter">"</span></span>)
<span class="line-numbers">59</span>    <span class="annotation">@Consumes</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">60</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">61</span>    <span class="directive">public</span> Response editNote(NoteInfo text) {
<span class="line-numbers">62</span>        <span class="comment">// tag::clientUsed3[]</span>
<span class="line-numbers">63</span>        <span class="keyword">if</span> (gc.editNote(text.getHostname(), text.getText())) {
<span class="line-numbers">64</span>        <span class="comment">// end::clientUsed3[]</span>
<span class="line-numbers">65</span>            <span class="keyword">return</span> Response.ok().build();
<span class="line-numbers">66</span>        } <span class="keyword">else</span> {
<span class="line-numbers">67</span>            <span class="keyword">return</span> Response.serverError().build();
<span class="line-numbers">68</span>        }
<span class="line-numbers">69</span>    }
<span class="line-numbers">70</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot file=1">QueryResource</code> class uses the <code class="hotspot=clientBuilder file=1">GraphQlClient</code> interface to make requests to the <code>graphql</code> microservice and display the results. In a real application, you would make requests to an external GraphQL service, and you might do further manipulation of the data after retrieval.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=clientBuilder file=1">TypesafeGraphQLClientBuilder</code> class creates a client object that implements the <code>GraphQlClient</code> interface and can interact with the <code>graphql</code> microservice. The <code>GraphQlClient</code> client can make requests to the URL specified by the <code class="hotspot=url file=3">graphql.server</code> variable in the <code>server.xml</code> file. The client is used in the <code class="hotspot=clientUsed1 file=1">querySystem()</code>, <code class="hotspot=clientUsed2 file=1">querySystemLoad()</code>, and <code class="hotspot=clientUsed3 file=1">editNote()</code> methods.</p>
</div>
<div class="paragraph">
<p>Add the SmallRye GraphQL client dependency to the project configuration file.</p>
</div>
<div class="listingblock code_command hotspot file=2">
<div class="content">
<pre><mark>Replace the Maven project file.</mark>
<code>query/pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>pom.xml</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers">  1</span><span class="preprocessor">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="line-numbers">  2</span><span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span>
<span class="line-numbers">  3</span>         <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
<span class="line-numbers">  4</span>         <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers">  5</span>    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
<span class="line-numbers">  6</span>
<span class="line-numbers">  7</span>    <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">  8</span>    <span class="tag">&lt;artifactId&gt;</span>guide-graphql-client-query<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">  9</span>    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 10</span>    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
<span class="line-numbers"> 11</span>
<span class="line-numbers"> 12</span>    <span class="tag">&lt;properties&gt;</span>
<span class="line-numbers"> 13</span>        <span class="tag">&lt;maven.compiler.source&gt;</span>11<span class="tag">&lt;/maven.compiler.source&gt;</span>
<span class="line-numbers"> 14</span>        <span class="tag">&lt;maven.compiler.target&gt;</span>11<span class="tag">&lt;/maven.compiler.target&gt;</span>
<span class="line-numbers"> 15</span>        <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
<span class="line-numbers"> 16</span>        <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
<span class="line-numbers"> 17</span>        <span class="comment">&lt;!-- Liberty configuration --&gt;</span>
<span class="line-numbers"> 18</span>        <span class="tag">&lt;liberty.var.default.http.port&gt;</span>9084<span class="tag">&lt;/liberty.var.default.http.port&gt;</span>
<span class="line-numbers"> 19</span>        <span class="tag">&lt;liberty.var.default.https.port&gt;</span>9447<span class="tag">&lt;/liberty.var.default.https.port&gt;</span>
<span class="line-numbers"> 20</span>    <span class="tag">&lt;/properties&gt;</span>
<span class="line-numbers"> 21</span>
<span class="line-numbers"> 22</span>    <span class="tag">&lt;dependencies&gt;</span>
<span class="line-numbers"> 23</span>        <span class="comment">&lt;!-- Provided dependencies --&gt;</span>
<span class="line-numbers"> 24</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 25</span>            <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 26</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 27</span>            <span class="tag">&lt;version&gt;</span>10.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 28</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 29</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 30</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 31</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 32</span>            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 33</span>            <span class="tag">&lt;version&gt;</span>6.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 34</span>            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
<span class="line-numbers"> 35</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 36</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 37</span>        
<span class="line-numbers"> 38</span>        <span class="comment">&lt;!-- Required dependencies --&gt;</span>
<span class="line-numbers"> 39</span>        <span class="comment">&lt;!-- tag::models[] --&gt;</span>
<span class="line-numbers"> 40</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 41</span>           <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 42</span>           <span class="tag">&lt;artifactId&gt;</span>guide-graphql-client-models<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 43</span>           <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 44</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 45</span>        <span class="comment">&lt;!-- end::models[] --&gt;</span>
<span class="line-numbers"> 46</span>        
<span class="line-numbers"> 47</span>        <span class="comment">&lt;!-- GraphQL API dependencies --&gt;</span>
<span class="line-numbers"> 48</span>        <span class="comment">&lt;!-- tag::clientDependenies[] --&gt;</span>
<span class="line-numbers"> 49</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 50</span>            <span class="tag">&lt;groupId&gt;</span>io.smallrye<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 51</span>            <span class="tag">&lt;artifactId&gt;</span>smallrye-graphql-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 52</span>            <span class="tag">&lt;version&gt;</span>2.1.3<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 53</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 54</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 55</span>            <span class="tag">&lt;groupId&gt;</span>io.smallrye<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 56</span>            <span class="tag">&lt;artifactId&gt;</span>smallrye-graphql-client-implementation-vertx<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 57</span>            <span class="tag">&lt;version&gt;</span>2.1.3<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 58</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 59</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 60</span>            <span class="tag">&lt;groupId&gt;</span>io.smallrye.stork<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 61</span>            <span class="tag">&lt;artifactId&gt;</span>stork-core<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 62</span>            <span class="tag">&lt;version&gt;</span>2.1.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 63</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 64</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 65</span>            <span class="tag">&lt;groupId&gt;</span>org.slf4j<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 66</span>            <span class="tag">&lt;artifactId&gt;</span>slf4j-simple<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 67</span>            <span class="tag">&lt;version&gt;</span>2.0.7<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 68</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 69</span>        <span class="comment">&lt;!-- end::clientDependenies[] --&gt;</span>
<span class="line-numbers"> 70</span>             
<span class="line-numbers"> 71</span>        <span class="comment">&lt;!-- For tests --&gt;</span>
<span class="line-numbers"> 72</span>        <span class="comment">&lt;!-- tag::testDependenies[] --&gt;</span>
<span class="line-numbers"> 73</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 74</span>            <span class="tag">&lt;groupId&gt;</span>org.junit.jupiter<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 75</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 76</span>            <span class="tag">&lt;version&gt;</span>5.9.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 77</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 78</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 79</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 80</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 81</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 82</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 83</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 84</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 85</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 86</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 87</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-json-binding-provider<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 88</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 89</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 90</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 91</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 92</span>            <span class="tag">&lt;groupId&gt;</span>org.glassfish<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 93</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.json<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 94</span>            <span class="tag">&lt;version&gt;</span>2.0.1<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 95</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 96</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 97</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 98</span>            <span class="tag">&lt;groupId&gt;</span>org.testcontainers<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 99</span>            <span class="tag">&lt;artifactId&gt;</span>testcontainers<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">100</span>            <span class="tag">&lt;version&gt;</span>1.18.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">101</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers">102</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers">103</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers">104</span>            <span class="tag">&lt;groupId&gt;</span>org.testcontainers<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">105</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">106</span>            <span class="tag">&lt;version&gt;</span>1.18.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">107</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers">108</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers">109</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers">110</span>            <span class="tag">&lt;groupId&gt;</span>org.slf4j<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">111</span>            <span class="tag">&lt;artifactId&gt;</span>slf4j-log4j12<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">112</span>            <span class="tag">&lt;version&gt;</span>1.7.36<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">113</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers">114</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers">115</span>        <span class="comment">&lt;!-- end::testDependenies[] --&gt;</span>
<span class="line-numbers">116</span>    <span class="tag">&lt;/dependencies&gt;</span>
<span class="line-numbers">117</span>
<span class="line-numbers">118</span>    <span class="tag">&lt;build&gt;</span>
<span class="line-numbers">119</span>        <span class="tag">&lt;finalName&gt;</span>${project.artifactId}<span class="tag">&lt;/finalName&gt;</span>
<span class="line-numbers">120</span>        <span class="tag">&lt;plugins&gt;</span>
<span class="line-numbers">121</span>            <span class="comment">&lt;!-- Enable liberty-maven plugin --&gt;</span>
<span class="line-numbers">122</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">123</span>                <span class="tag">&lt;groupId&gt;</span>io.openliberty.tools<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">124</span>                <span class="tag">&lt;artifactId&gt;</span>liberty-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">125</span>                <span class="tag">&lt;version&gt;</span>3.8.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">126</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">127</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">128</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">129</span>                <span class="tag">&lt;artifactId&gt;</span>maven-war-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">130</span>                <span class="tag">&lt;version&gt;</span>3.3.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">131</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">132</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">133</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">134</span>                <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">135</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">136</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">137</span>            <span class="comment">&lt;!-- tag::failsafe[] --&gt;</span>
<span class="line-numbers">138</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">139</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">140</span>                <span class="tag">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">141</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">142</span>                <span class="tag">&lt;configuration&gt;</span>
<span class="line-numbers">143</span>                    <span class="tag">&lt;systemPropertyVariables&gt;</span>
<span class="line-numbers">144</span>                        <span class="tag">&lt;http.port&gt;</span>${liberty.var.default.http.port}<span class="tag">&lt;/http.port&gt;</span>
<span class="line-numbers">145</span>                    <span class="tag">&lt;/systemPropertyVariables&gt;</span>
<span class="line-numbers">146</span>                <span class="tag">&lt;/configuration&gt;</span>
<span class="line-numbers">147</span>                <span class="tag">&lt;executions&gt;</span>
<span class="line-numbers">148</span>                    <span class="tag">&lt;execution&gt;</span>
<span class="line-numbers">149</span>                        <span class="tag">&lt;goals&gt;</span>
<span class="line-numbers">150</span>                            <span class="tag">&lt;goal&gt;</span>integration-test<span class="tag">&lt;/goal&gt;</span>
<span class="line-numbers">151</span>                            <span class="tag">&lt;goal&gt;</span>verify<span class="tag">&lt;/goal&gt;</span>
<span class="line-numbers">152</span>                        <span class="tag">&lt;/goals&gt;</span>
<span class="line-numbers">153</span>                    <span class="tag">&lt;/execution&gt;</span>
<span class="line-numbers">154</span>                <span class="tag">&lt;/executions&gt;</span>
<span class="line-numbers">155</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">156</span>            <span class="comment">&lt;!-- end::failsafe[] --&gt;</span>
<span class="line-numbers">157</span>        <span class="tag">&lt;/plugins&gt;</span>
<span class="line-numbers">158</span>    <span class="tag">&lt;/build&gt;</span>
<span class="line-numbers">159</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=clientDependenies file=2">smallrye-graphql-client</code> dependencies provide the classes that you use to interact with a <code>graphql</code> microservice.</p>
</div>
<div class="paragraph">
<p>To run the service, you must correctly configure the Liberty.</p>
</div>
<div class="listingblock code_command hotspot file=3">
<div class="content">
<pre><mark>Replace the Liberty server.xml configuration file.</mark>
<code>query/src/main/liberty/config/server.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>server.xml</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers"> 1</span><span class="tag">&lt;server</span> <span class="attribute-name">description</span>=<span class="string"><span class="delimiter">"</span><span class="content">Query Service</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 2</span>
<span class="line-numbers"> 3</span>  <span class="tag">&lt;featureManager&gt;</span>
<span class="line-numbers"> 4</span>    <span class="tag">&lt;feature&gt;</span>restfulWS-3.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 5</span>    <span class="tag">&lt;feature&gt;</span>cdi-4.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 6</span>    <span class="tag">&lt;feature&gt;</span>jsonb-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 7</span>    <span class="tag">&lt;feature&gt;</span>mpConfig-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 8</span>    <span class="tag">&lt;feature&gt;</span>mpOpenAPI-3.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 9</span>  <span class="tag">&lt;/featureManager&gt;</span>
<span class="line-numbers">10</span>
<span class="line-numbers">11</span>  <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.http.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9084</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">12</span>  <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.https.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9447</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">13</span>  <span class="comment">&lt;!-- tag::url[] --&gt;</span>
<span class="line-numbers">14</span>  <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">graphql.server</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://graphql:9082/graphql</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">15</span>  <span class="comment">&lt;!-- end::url[] --&gt;</span>
<span class="line-numbers">16</span>  
<span class="line-numbers">17</span>  <span class="tag">&lt;httpEndpoint</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span> <span class="attribute-name">httpPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.http.port}</span><span class="delimiter">"</span></span>
<span class="line-numbers">18</span>      <span class="attribute-name">httpsPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.https.port}</span><span class="delimiter">"</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">defaultHttpEndpoint</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">19</span>
<span class="line-numbers">20</span>  <span class="tag">&lt;webApplication</span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">"</span><span class="content">guide-graphql-client-query.war</span><span class="delimiter">"</span></span> <span class="attribute-name">contextRoot</span>=<span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">21</span><span class="tag">&lt;/server&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=url file=3">graphql.server</code> variable is defined in the <code class="hotspot file=3">server.xml</code> file. This variable defines where the GraphQL client makes requests to.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-and-running-the-application">Building and running the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From the <code>start</code> directory, run the following commands:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre>mvn -pl models install
mvn package</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>mvn install</code> command compiles and packages the object types you created to a <code>.jar</code> file. This allows them to be used by the <code>system</code> and <code>graphql</code> services. The <code>mvn package</code> command packages the <code>system</code>, <code>graphql</code>, and <code>query</code> services to <code>.war</code> files.</p>
</div>
<div class="paragraph">
<p>Dockerfiles are already set up for you. Build your Docker images with the following commands:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre>docker build -t system:1.0-java11-SNAPSHOT --build-arg JAVA_VERSION=java11 system/.
docker build -t system:1.0-java17-SNAPSHOT --build-arg JAVA_VERSION=java17 system/.
docker build -t graphql:1.0-SNAPSHOT graphql/.
docker build -t query:1.0-SNAPSHOT query/.</pre>
</div>
</div>
<div class="paragraph">
<p>Run these Docker images using the provided <code>startContainers</code> script. The script creates a network for the services to communicate through. It creates the two <code>system</code> microservices, a <code>graphql</code> microservice, and a <code>query</code> microservice that interact with each other.</p>
</div>
<div class="paragraph tab_link windows_link">
<p><code><strong>WINDOWS</strong></code></p>
</div>
<div class="paragraph tab_link mac_link">
<p><code><strong>MAC</strong></code></p>
</div>
<div class="paragraph tab_link linux_link">
<p><code><strong>LINUX</strong></code></p>
</div>
<div class="openblock tab_content windows_section">
<div class="content">
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>.\scripts\startContainers.bat</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock tab_content mac_section linux_section">
<div class="content">
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>./scripts/startContainers.sh</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The containers might take some time to become available.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="accessing-the-application">Accessing the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To access the client service, visit the <a href="http://localhost:9084/openapi/ui/" class="notranslate bare" target="_blank" rel="noopener noreferrer">http://localhost:9084/openapi/ui/</a> URL. This URL displays the available REST endpoints that test the API endpoints that you created.</p>
</div>
<div class="sect2">
<h3 id="try-the-query-operations">Try the query operations</h3>
<div class="paragraph">
<p>From the OpenAPI UI, test the read operation at the <code>GET /query/system/{hostname}</code> endpoint. This request retrieves the system properties for the <code>hostname</code> specified. The following example shows what happens when the <code>hostname</code> is set to <code>system-java11</code>, but you can try out the operations using the hostname <code>system-java17</code> as well:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>{
  "hostname": "system-java11",
  "java": {
    "vendor": "IBM Corporation",
    "version": "11.0.18"
  },
  "osArch": "amd64",
  "osName": "Linux",
  "osVersion": "5.15.0-67-generic",
  "systemMetrics": {
    "heapSize": 536870912,
    "nonHeapSize": -1,
    "processors": 2
  },
  "username": "default"
}</pre>
</div>
</div>
<div class="paragraph">
<p>You can retrieve the information about the resource usage of any number of system services at the <code>GET /query/systemLoad/{hostnames}</code> endpoint. The following example shows what happens when the <code>hostnames</code> are set to <code>system-java11,system-java17</code>:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>[
  {
    "hostname": "system-java11",
    "loadData": {
      "heapUsed": 30090920,
      "loadAverage": 0.08,
      "nonHeapUsed": 87825316
    }
  },
  {
    "hostname": "system-java17",
    "loadData": {
      "heapUsed": 39842888,
      "loadAverage": 0.08,
      "nonHeapUsed": 93098960
    }
  }
]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="try-the-mutation-operation">Try the mutation operation</h3>
<div class="paragraph">
<p>You can also make requests to add a note to a system service at the <code>POST /query/mutation/system/note</code> endpoint. To add a note to the system service running on Java 11, specify the following in the request body:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre>{
  "hostname": "system-java11",
  "text": "I am trying out GraphQL on Open Liberty!"
}</pre>
</div>
</div>
<div class="paragraph">
<p>You will receive a <code>200</code> response code if the request is processed succesfully.</p>
</div>
<div class="paragraph">
<p>You can see the note you added to the system service at the <code>GET /query/system/{hostname}</code> endpoint.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tearing-down-the-environment">Tearing down the environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you’re done checking out the application, run the following script to stop the application:</p>
</div>
<div class="paragraph tab_link windows_link">
<p><code><strong>WINDOWS</strong></code></p>
</div>
<div class="paragraph tab_link mac_link">
<p><code><strong>MAC</strong></code></p>
</div>
<div class="paragraph tab_link linux_link">
<p><code><strong>LINUX</strong></code></p>
</div>
<div class="openblock tab_content windows_section">
<div class="content">
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>.\scripts\stopContainers.bat</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock tab_content mac_section linux_section">
<div class="content">
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>./scripts/stopContainers.sh</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-the-application">Testing the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although you can test your application manually, you should rely on automated tests. In this section, you’ll create integration tests using Testcontainers to verify that the basic operations you implemented function correctly.</p>
</div>
<div class="paragraph">
<p>First, create a RESTful client interface for the <code>query</code> microservice.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Create the <code>QueryResourceClient.java</code> interface.</mark>
<code>query/src/test/java/it/io/openliberty/guides/query/QueryResourceClient.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>QueryResourceClient.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.query</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.enterprise.context.ApplicationScoped</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Consumes</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.GET</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.POST</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.PathParam</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Produces</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.MediaType</span>;
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers">24</span>
<span class="line-numbers">25</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemInfo</span>;
<span class="line-numbers">26</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemLoad</span>;
<span class="line-numbers">27</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.NoteInfo</span>;
<span class="line-numbers">28</span>
<span class="line-numbers">29</span><span class="annotation">@ApplicationScoped</span>
<span class="line-numbers">30</span><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">query</span><span class="delimiter">"</span></span>)
<span class="line-numbers">31</span><span class="directive">public</span> <span class="type">interface</span> <span class="class">QueryResourceClient</span> {
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="comment">// tag::querySystem[]</span>
<span class="line-numbers">34</span>    <span class="annotation">@GET</span>
<span class="line-numbers">35</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">system/{hostname}</span><span class="delimiter">"</span></span>)
<span class="line-numbers">36</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">37</span>    SystemInfo querySystem(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostname</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> hostname);
<span class="line-numbers">38</span>    <span class="comment">// end::querySystem[]</span>
<span class="line-numbers">39</span>
<span class="line-numbers">40</span>    <span class="comment">// tag::querySystemLoad[]</span>
<span class="line-numbers">41</span>    <span class="annotation">@GET</span>
<span class="line-numbers">42</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">systemLoad/{hostnames}</span><span class="delimiter">"</span></span>)
<span class="line-numbers">43</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">44</span>    <span class="predefined-type">List</span>&lt;SystemLoad&gt; querySystemLoad(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">hostnames</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> hostnames);
<span class="line-numbers">45</span>    <span class="comment">// end::querySystemLoad[]</span>
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>    <span class="comment">// tag::editNote[]</span>
<span class="line-numbers">48</span>    <span class="annotation">@POST</span>
<span class="line-numbers">49</span>    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">mutation/system/note</span><span class="delimiter">"</span></span>)
<span class="line-numbers">50</span>    <span class="annotation">@Consumes</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">51</span>    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">52</span>    Response editNote(NoteInfo text);
<span class="line-numbers">53</span>    <span class="comment">// end::editNote[]</span>
<span class="line-numbers">54</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This interface declares <code class="hotspot=querySystem file=0">querySystem()</code>, <code class="hotspot=querySystemLoad file=0">querySystemLoad()</code>, and <code class="hotspot=editNote file=0">editNote()</code> methods for accessing each of the endpoints that are set up to access the <code>query</code> microservice.</p>
</div>
<div class="paragraph">
<p>Create the test container class that accesses the <code>query</code> image that you built in previous section.</p>
</div>
<div class="listingblock code_command hotspot file=1">
<div class="content">
<pre><mark>Create the <code>LibertyContainer.java</code> file.</mark>
<code>query/src/test/java/it/io/openliberty/guides/query/LibertyContainer.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>LibertyContainer.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.query</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="comment">// imports for a JAXRS client to simplify the code</span>
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">org.jboss.resteasy.client.jaxrs.ResteasyClient</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">org.jboss.resteasy.client.jaxrs.ResteasyClientBuilder</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">org.jboss.resteasy.client.jaxrs.ResteasyWebTarget</span>;
<span class="line-numbers">18</span><span class="comment">// logger imports</span>
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">org.slf4j.Logger</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">org.slf4j.LoggerFactory</span>;
<span class="line-numbers">21</span><span class="comment">// testcontainers imports</span>
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">org.testcontainers.containers.GenericContainer</span>;
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">org.testcontainers.containers.wait.strategy.Wait</span>;
<span class="line-numbers">24</span>
<span class="line-numbers">25</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers">26</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.UriBuilder</span>;
<span class="line-numbers">27</span>
<span class="line-numbers">28</span><span class="directive">public</span> <span class="type">class</span> <span class="class">LibertyContainer</span> <span class="directive">extends</span> GenericContainer&lt;LibertyContainer&gt; {
<span class="line-numbers">29</span>
<span class="line-numbers">30</span>    <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">Logger</span> LOGGER = LoggerFactory.getLogger(LibertyContainer.class);
<span class="line-numbers">31</span>    <span class="directive">private</span> <span class="predefined-type">String</span> baseURL;
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    <span class="directive">public</span> LibertyContainer(<span class="directive">final</span> <span class="predefined-type">String</span> dockerImageName) {
<span class="line-numbers">34</span>        <span class="local-variable">super</span>(dockerImageName);
<span class="line-numbers">35</span>        <span class="comment">// wait for smarter planet message by default</span>
<span class="line-numbers">36</span>        waitingFor(Wait.forLogMessage(<span class="string"><span class="delimiter">"</span><span class="content">^.*CWWKF0011I.*$</span><span class="delimiter">"</span></span>, <span class="integer">1</span>));
<span class="line-numbers">37</span>        <span class="local-variable">this</span>.addExposedPorts(<span class="integer">9084</span>);
<span class="line-numbers">38</span>        <span class="keyword">return</span>;
<span class="line-numbers">39</span>    }
<span class="line-numbers">40</span>
<span class="line-numbers">41</span>    <span class="comment">// tag::createRestClient[]</span>
<span class="line-numbers">42</span>    <span class="directive">public</span> &lt;T&gt; T createRestClient(<span class="predefined-type">Class</span>&lt;T&gt; clazz) {
<span class="line-numbers">43</span>        <span class="predefined-type">String</span> urlPath = getBaseURL();
<span class="line-numbers">44</span>        ClientBuilder builder = ResteasyClientBuilder.newBuilder();
<span class="line-numbers">45</span>        ResteasyClient client = (ResteasyClient) builder.build();
<span class="line-numbers">46</span>        ResteasyWebTarget target = client.target(UriBuilder.fromPath(urlPath));
<span class="line-numbers">47</span>        <span class="keyword">return</span> target.proxy(clazz);
<span class="line-numbers">48</span>    }
<span class="line-numbers">49</span>    <span class="comment">// end::createRestClient[]</span>
<span class="line-numbers">50</span>
<span class="line-numbers">51</span>    <span class="comment">// tag::getBaseURL[]</span>
<span class="line-numbers">52</span>    <span class="directive">public</span> <span class="predefined-type">String</span> getBaseURL() <span class="directive">throws</span> <span class="exception">IllegalStateException</span> {
<span class="line-numbers">53</span>        <span class="keyword">if</span> (baseURL != <span class="predefined-constant">null</span>) {
<span class="line-numbers">54</span>            <span class="keyword">return</span> baseURL;
<span class="line-numbers">55</span>        }
<span class="line-numbers">56</span>        <span class="keyword">if</span> (!<span class="local-variable">this</span>.isRunning()) {
<span class="line-numbers">57</span>            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalStateException</span>(
<span class="line-numbers">58</span>                <span class="string"><span class="delimiter">"</span><span class="content">Container must be running to determine hostname and port</span><span class="delimiter">"</span></span>);
<span class="line-numbers">59</span>        }
<span class="line-numbers">60</span>        baseURL =  <span class="string"><span class="delimiter">"</span><span class="content">http://</span><span class="delimiter">"</span></span> + <span class="local-variable">this</span>.getContainerIpAddress()
<span class="line-numbers">61</span>            + <span class="string"><span class="delimiter">"</span><span class="content">:</span><span class="delimiter">"</span></span> + <span class="local-variable">this</span>.getFirstMappedPort();
<span class="line-numbers">62</span>        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">TEST: </span><span class="delimiter">"</span></span> + baseURL);
<span class="line-numbers">63</span>        <span class="keyword">return</span> baseURL;
<span class="line-numbers">64</span>    }
<span class="line-numbers">65</span>    <span class="comment">// end::getBaseURL[]</span>
<span class="line-numbers">66</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=createRestClient file=1">createRestClient()</code> method creates a REST client instance with the <code>QueryResourceClient</code> interface. The <code class="hotspot=getBaseURL file=1">getBaseURL()</code> method constructs the URL that can access the <code>query</code> image.</p>
</div>
<div class="paragraph">
<p>Now, create your integration test cases.</p>
</div>
<div class="listingblock code_command hotspot file=2">
<div class="content">
<pre><mark>Create the <code>QueryResourceIT.java</code> file.</mark>
<code>query/src/test/java/it/io/openliberty/guides/query/QueryResourceIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>QueryResourceIT.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers">  1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers">  2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers">  3</span><span class="comment"> * Copyright (c) 2022 IBM Corporation and others.</span>
<span class="line-numbers">  4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers">  5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers">  6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers">  7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers">  8</span><span class="comment"> *</span>
<span class="line-numbers">  9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers"> 10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers"> 11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers"> 12</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.query</span>;
<span class="line-numbers"> 13</span>
<span class="line-numbers"> 14</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertEquals</span>;
<span class="line-numbers"> 15</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertNotNull</span>;
<span class="line-numbers"> 16</span>
<span class="line-numbers"> 17</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeAll</span>;
<span class="line-numbers"> 18</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.MethodOrderer.OrderAnnotation</span>;
<span class="line-numbers"> 19</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Order</span>;
<span class="line-numbers"> 20</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="line-numbers"> 21</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.TestMethodOrder</span>;
<span class="line-numbers"> 22</span><span class="keyword">import</span> <span class="include">org.slf4j.Logger</span>;
<span class="line-numbers"> 23</span><span class="keyword">import</span> <span class="include">org.slf4j.LoggerFactory</span>;
<span class="line-numbers"> 24</span><span class="keyword">import</span> <span class="include">org.testcontainers.containers.GenericContainer</span>;
<span class="line-numbers"> 25</span><span class="keyword">import</span> <span class="include">org.testcontainers.containers.Network</span>;
<span class="line-numbers"> 26</span><span class="keyword">import</span> <span class="include">org.testcontainers.containers.output.Slf4jLogConsumer</span>;
<span class="line-numbers"> 27</span><span class="keyword">import</span> <span class="include">org.testcontainers.junit.jupiter.Container</span>;
<span class="line-numbers"> 28</span><span class="keyword">import</span> <span class="include">org.testcontainers.junit.jupiter.Testcontainers</span>;
<span class="line-numbers"> 29</span>
<span class="line-numbers"> 30</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers"> 31</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers"> 32</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.NoteInfo</span>;
<span class="line-numbers"> 33</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemLoad</span>;
<span class="line-numbers"> 34</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemLoadData</span>;
<span class="line-numbers"> 35</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.graphql.models.SystemInfo</span>;
<span class="line-numbers"> 36</span>
<span class="line-numbers"> 37</span><span class="comment">// tag::testcontainers[]</span>
<span class="line-numbers"> 38</span><span class="annotation">@Testcontainers</span>
<span class="line-numbers"> 39</span><span class="comment">// end::testcontainers[]</span>
<span class="line-numbers"> 40</span><span class="annotation">@TestMethodOrder</span>(OrderAnnotation.class)
<span class="line-numbers"> 41</span><span class="directive">public</span> <span class="type">class</span> <span class="class">QueryResourceIT</span> {
<span class="line-numbers"> 42</span>
<span class="line-numbers"> 43</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">Logger</span> logger = LoggerFactory.getLogger(QueryResourceIT.class);
<span class="line-numbers"> 44</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> system8ImageName = <span class="string"><span class="delimiter">"</span><span class="content">system:1.0-java11-SNAPSHOT</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 45</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> queryImageName = <span class="string"><span class="delimiter">"</span><span class="content">query:1.0-SNAPSHOT</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 46</span>    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> graphqlImageName = <span class="string"><span class="delimiter">"</span><span class="content">graphql:1.0-SNAPSHOT</span><span class="delimiter">"</span></span>;
<span class="line-numbers"> 47</span>
<span class="line-numbers"> 48</span>    <span class="directive">public</span> <span class="directive">static</span> QueryResourceClient client;
<span class="line-numbers"> 49</span>    <span class="directive">public</span> <span class="directive">static</span> Network network = Network.newNetwork();
<span class="line-numbers"> 50</span>
<span class="line-numbers"> 51</span>    <span class="comment">// tag::systemContainer[]</span>
<span class="line-numbers"> 52</span>    <span class="comment">// tag::container[]</span>
<span class="line-numbers"> 53</span>    <span class="annotation">@Container</span>
<span class="line-numbers"> 54</span>    <span class="comment">// end::container[]</span>
<span class="line-numbers"> 55</span>    <span class="directive">public</span> <span class="directive">static</span> GenericContainer&lt;?&gt; systemContainer
<span class="line-numbers"> 56</span>        = <span class="keyword">new</span> GenericContainer&lt;&gt;(system8ImageName)
<span class="line-numbers"> 57</span>              .withNetwork(network)
<span class="line-numbers"> 58</span>              .withExposedPorts(<span class="integer">9080</span>)
<span class="line-numbers"> 59</span>              .withNetworkAliases(<span class="string"><span class="delimiter">"</span><span class="content">system-java11</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 60</span>              .withLogConsumer(<span class="keyword">new</span> Slf4jLogConsumer(logger));
<span class="line-numbers"> 61</span>    <span class="comment">// end::systemContainer[]</span>
<span class="line-numbers"> 62</span>
<span class="line-numbers"> 63</span>    <span class="comment">// tag::graphqlContainer[]</span>
<span class="line-numbers"> 64</span>    <span class="annotation">@Container</span>
<span class="line-numbers"> 65</span>    <span class="directive">public</span> <span class="directive">static</span> LibertyContainer graphqlContainer
<span class="line-numbers"> 66</span>        = <span class="keyword">new</span> LibertyContainer(graphqlImageName)
<span class="line-numbers"> 67</span>              .withNetwork(network)
<span class="line-numbers"> 68</span>              .withExposedPorts(<span class="integer">9082</span>)
<span class="line-numbers"> 69</span>              .withNetworkAliases(<span class="string"><span class="delimiter">"</span><span class="content">graphql</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 70</span>              .withLogConsumer(<span class="keyword">new</span> Slf4jLogConsumer(logger));
<span class="line-numbers"> 71</span>    <span class="comment">// end::graphqlContainer[]</span>
<span class="line-numbers"> 72</span>
<span class="line-numbers"> 73</span>    <span class="comment">// tag::libertyContainer[]</span>
<span class="line-numbers"> 74</span>    <span class="annotation">@Container</span>
<span class="line-numbers"> 75</span>    <span class="directive">public</span> <span class="directive">static</span> LibertyContainer libertyContainer
<span class="line-numbers"> 76</span>        = <span class="keyword">new</span> LibertyContainer(queryImageName)
<span class="line-numbers"> 77</span>              .withNetwork(network)
<span class="line-numbers"> 78</span>              .withExposedPorts(<span class="integer">9084</span>)
<span class="line-numbers"> 79</span>              .withLogConsumer(<span class="keyword">new</span> Slf4jLogConsumer(logger));
<span class="line-numbers"> 80</span>    <span class="comment">// end::libertyContainer[]</span>
<span class="line-numbers"> 81</span>
<span class="line-numbers"> 82</span>    <span class="annotation">@BeforeAll</span>
<span class="line-numbers"> 83</span>    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> setupTestClass() <span class="directive">throws</span> <span class="exception">Exception</span> {
<span class="line-numbers"> 84</span>        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">TEST: Starting Liberty Container setup</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 85</span>        client = libertyContainer.createRestClient(QueryResourceClient.class);
<span class="line-numbers"> 86</span>    }
<span class="line-numbers"> 87</span>
<span class="line-numbers"> 88</span>    <span class="comment">// tag::testGetSystem[]</span>
<span class="line-numbers"> 89</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 90</span>    <span class="annotation">@Order</span>(<span class="integer">1</span>)
<span class="line-numbers"> 91</span>    <span class="directive">public</span> <span class="type">void</span> testGetSystem() {
<span class="line-numbers"> 92</span>        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">TEST: Testing get system /system/system-java11</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 93</span>        SystemInfo systemInfo = client.querySystem(<span class="string"><span class="delimiter">"</span><span class="content">system-java11</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 94</span>        assertEquals(systemInfo.getHostname(), <span class="string"><span class="delimiter">"</span><span class="content">system-java11</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 95</span>        assertNotNull(systemInfo.getOsVersion(), <span class="string"><span class="delimiter">"</span><span class="content">osVersion is null</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 96</span>        assertNotNull(systemInfo.getJava(), <span class="string"><span class="delimiter">"</span><span class="content">java is null</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 97</span>        assertNotNull(systemInfo.getSystemMetrics(), <span class="string"><span class="delimiter">"</span><span class="content">systemMetrics is null</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 98</span>    }
<span class="line-numbers"> 99</span>    <span class="comment">// end::testGetSystem[]</span>
<span class="line-numbers">100</span>
<span class="line-numbers">101</span>    <span class="comment">// tag::testGetSystemLoad[]</span>
<span class="line-numbers">102</span>    <span class="annotation">@Test</span>
<span class="line-numbers">103</span>    <span class="annotation">@Order</span>(<span class="integer">2</span>)
<span class="line-numbers">104</span>    <span class="directive">public</span> <span class="type">void</span> testGetSystemLoad() {
<span class="line-numbers">105</span>        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">TEST: Testing get system load /systemLoad/system-java11</span><span class="delimiter">"</span></span>);
<span class="line-numbers">106</span>        <span class="predefined-type">List</span>&lt;SystemLoad&gt; systemLoad = client.querySystemLoad(<span class="string"><span class="delimiter">"</span><span class="content">system-java11</span><span class="delimiter">"</span></span>);
<span class="line-numbers">107</span>        assertEquals(systemLoad.get(<span class="integer">0</span>).getHostname(), <span class="string"><span class="delimiter">"</span><span class="content">system-java11</span><span class="delimiter">"</span></span>);
<span class="line-numbers">108</span>        SystemLoadData systemLoadData = systemLoad.get(<span class="integer">0</span>).getLoadData();
<span class="line-numbers">109</span>        assertNotNull(systemLoadData.getLoadAverage(), <span class="string"><span class="delimiter">"</span><span class="content">loadAverage is null</span><span class="delimiter">"</span></span>);
<span class="line-numbers">110</span>        assertNotNull(systemLoadData.getHeapUsed(), <span class="string"><span class="delimiter">"</span><span class="content">headUsed is null</span><span class="delimiter">"</span></span>);
<span class="line-numbers">111</span>        assertNotNull(systemLoadData.getNonHeapUsed(), <span class="string"><span class="delimiter">"</span><span class="content">nonHeapUsed is null</span><span class="delimiter">"</span></span>);
<span class="line-numbers">112</span>    }
<span class="line-numbers">113</span>    <span class="comment">// end::testGetSystemLoad[]</span>
<span class="line-numbers">114</span>
<span class="line-numbers">115</span>    <span class="comment">// tag::testEditNote[]</span>
<span class="line-numbers">116</span>    <span class="annotation">@Test</span>
<span class="line-numbers">117</span>    <span class="annotation">@Order</span>(<span class="integer">3</span>)
<span class="line-numbers">118</span>    <span class="directive">public</span> <span class="type">void</span> testEditNote() {
<span class="line-numbers">119</span>        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">"</span><span class="content">TEST: Testing editing note /mutation/system/note</span><span class="delimiter">"</span></span>);
<span class="line-numbers">120</span>        NoteInfo note = <span class="keyword">new</span> NoteInfo();
<span class="line-numbers">121</span>        note.setHostname(<span class="string"><span class="delimiter">"</span><span class="content">system-java11</span><span class="delimiter">"</span></span>);
<span class="line-numbers">122</span>        note.setText(<span class="string"><span class="delimiter">"</span><span class="content">I am trying out GraphQL on Open Liberty!</span><span class="delimiter">"</span></span>);
<span class="line-numbers">123</span>        Response response = client.editNote(note);
<span class="line-numbers">124</span>        assertEquals(<span class="integer">200</span>, response.getStatus(), <span class="string"><span class="delimiter">"</span><span class="content">Incorrect response code</span><span class="delimiter">"</span></span>);
<span class="line-numbers">125</span>        SystemInfo systemInfo = client.querySystem(<span class="string"><span class="delimiter">"</span><span class="content">system-java11</span><span class="delimiter">"</span></span>);
<span class="line-numbers">126</span>        assertEquals(systemInfo.getNote(), <span class="string"><span class="delimiter">"</span><span class="content">I am trying out GraphQL on Open Liberty!</span><span class="delimiter">"</span></span>);
<span class="line-numbers">127</span>    }
<span class="line-numbers">128</span>    <span class="comment">// end::testEditNote[]</span>
<span class="line-numbers">129</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Define the <code class="hotspot=systemContainer file=2">systemContainer</code> test container to start up the <code>system-java11</code> image, the <code class="hotspot=graphqlContainer file=2">graphqlContainer</code> test container to start up the <code>graphql</code> image, and the <code class="hotspot=libertyContainer file=2">libertyContainer</code> test container to start up the <code>query</code> image. Make sure that the containers use the same network.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testcontainers file=2">@Testcontainers</code> annotation finds all fields that are annotated with the <code class="hotspot=container file=2">@Container</code> annotation and calls their container lifecycle methods. The <code>static</code> function declaration on each container indicates that this container will be started only once before any test method is executed and stopped after the last test method is executed.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testGetSystem file=2">testGetSystem()</code> verifies the <code>/query/system/{hostname}</code> endpoint with <code>hostname</code> set to <code>system-java11</code>.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testGetSystemLoad file=2">testGetSystemLoad()</code> verifies the <code>/query/systemLoad/{hostnames}</code> endpoint with <code>hostnames</code> set to <code>system-java11</code>.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testEditNote file=2">testEditNote()</code> verifies the mutation operation at the <code>/query/mutation/system/note</code> endpoint.</p>
</div>
<div class="paragraph">
<p>pom.xml</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers">  1</span><span class="preprocessor">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="line-numbers">  2</span><span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span>
<span class="line-numbers">  3</span>         <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
<span class="line-numbers">  4</span>         <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers">  5</span>    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
<span class="line-numbers">  6</span>
<span class="line-numbers">  7</span>    <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">  8</span>    <span class="tag">&lt;artifactId&gt;</span>guide-graphql-client-query<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">  9</span>    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 10</span>    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
<span class="line-numbers"> 11</span>
<span class="line-numbers"> 12</span>    <span class="tag">&lt;properties&gt;</span>
<span class="line-numbers"> 13</span>        <span class="tag">&lt;maven.compiler.source&gt;</span>11<span class="tag">&lt;/maven.compiler.source&gt;</span>
<span class="line-numbers"> 14</span>        <span class="tag">&lt;maven.compiler.target&gt;</span>11<span class="tag">&lt;/maven.compiler.target&gt;</span>
<span class="line-numbers"> 15</span>        <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
<span class="line-numbers"> 16</span>        <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
<span class="line-numbers"> 17</span>        <span class="comment">&lt;!-- Liberty configuration --&gt;</span>
<span class="line-numbers"> 18</span>        <span class="tag">&lt;liberty.var.default.http.port&gt;</span>9084<span class="tag">&lt;/liberty.var.default.http.port&gt;</span>
<span class="line-numbers"> 19</span>        <span class="tag">&lt;liberty.var.default.https.port&gt;</span>9447<span class="tag">&lt;/liberty.var.default.https.port&gt;</span>
<span class="line-numbers"> 20</span>    <span class="tag">&lt;/properties&gt;</span>
<span class="line-numbers"> 21</span>
<span class="line-numbers"> 22</span>    <span class="tag">&lt;dependencies&gt;</span>
<span class="line-numbers"> 23</span>        <span class="comment">&lt;!-- Provided dependencies --&gt;</span>
<span class="line-numbers"> 24</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 25</span>            <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 26</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 27</span>            <span class="tag">&lt;version&gt;</span>10.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 28</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 29</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 30</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 31</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 32</span>            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 33</span>            <span class="tag">&lt;version&gt;</span>6.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 34</span>            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
<span class="line-numbers"> 35</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 36</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 37</span>        
<span class="line-numbers"> 38</span>        <span class="comment">&lt;!-- Required dependencies --&gt;</span>
<span class="line-numbers"> 39</span>        <span class="comment">&lt;!-- tag::models[] --&gt;</span>
<span class="line-numbers"> 40</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 41</span>           <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 42</span>           <span class="tag">&lt;artifactId&gt;</span>guide-graphql-client-models<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 43</span>           <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 44</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 45</span>        <span class="comment">&lt;!-- end::models[] --&gt;</span>
<span class="line-numbers"> 46</span>        
<span class="line-numbers"> 47</span>        <span class="comment">&lt;!-- GraphQL API dependencies --&gt;</span>
<span class="line-numbers"> 48</span>        <span class="comment">&lt;!-- tag::clientDependenies[] --&gt;</span>
<span class="line-numbers"> 49</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 50</span>            <span class="tag">&lt;groupId&gt;</span>io.smallrye<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 51</span>            <span class="tag">&lt;artifactId&gt;</span>smallrye-graphql-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 52</span>            <span class="tag">&lt;version&gt;</span>2.1.3<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 53</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 54</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 55</span>            <span class="tag">&lt;groupId&gt;</span>io.smallrye<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 56</span>            <span class="tag">&lt;artifactId&gt;</span>smallrye-graphql-client-implementation-vertx<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 57</span>            <span class="tag">&lt;version&gt;</span>2.1.3<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 58</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 59</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 60</span>            <span class="tag">&lt;groupId&gt;</span>io.smallrye.stork<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 61</span>            <span class="tag">&lt;artifactId&gt;</span>stork-core<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 62</span>            <span class="tag">&lt;version&gt;</span>2.1.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 63</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 64</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 65</span>            <span class="tag">&lt;groupId&gt;</span>org.slf4j<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 66</span>            <span class="tag">&lt;artifactId&gt;</span>slf4j-simple<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 67</span>            <span class="tag">&lt;version&gt;</span>2.0.7<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 68</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 69</span>        <span class="comment">&lt;!-- end::clientDependenies[] --&gt;</span>
<span class="line-numbers"> 70</span>             
<span class="line-numbers"> 71</span>        <span class="comment">&lt;!-- For tests --&gt;</span>
<span class="line-numbers"> 72</span>        <span class="comment">&lt;!-- tag::testDependenies[] --&gt;</span>
<span class="line-numbers"> 73</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 74</span>            <span class="tag">&lt;groupId&gt;</span>org.junit.jupiter<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 75</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 76</span>            <span class="tag">&lt;version&gt;</span>5.9.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 77</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 78</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 79</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 80</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 81</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 82</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 83</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 84</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 85</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 86</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 87</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-json-binding-provider<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 88</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 89</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 90</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 91</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 92</span>            <span class="tag">&lt;groupId&gt;</span>org.glassfish<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 93</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.json<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 94</span>            <span class="tag">&lt;version&gt;</span>2.0.1<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 95</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 96</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 97</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 98</span>            <span class="tag">&lt;groupId&gt;</span>org.testcontainers<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 99</span>            <span class="tag">&lt;artifactId&gt;</span>testcontainers<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">100</span>            <span class="tag">&lt;version&gt;</span>1.18.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">101</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers">102</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers">103</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers">104</span>            <span class="tag">&lt;groupId&gt;</span>org.testcontainers<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">105</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">106</span>            <span class="tag">&lt;version&gt;</span>1.18.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">107</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers">108</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers">109</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers">110</span>            <span class="tag">&lt;groupId&gt;</span>org.slf4j<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">111</span>            <span class="tag">&lt;artifactId&gt;</span>slf4j-log4j12<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">112</span>            <span class="tag">&lt;version&gt;</span>1.7.36<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">113</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers">114</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers">115</span>        <span class="comment">&lt;!-- end::testDependenies[] --&gt;</span>
<span class="line-numbers">116</span>    <span class="tag">&lt;/dependencies&gt;</span>
<span class="line-numbers">117</span>
<span class="line-numbers">118</span>    <span class="tag">&lt;build&gt;</span>
<span class="line-numbers">119</span>        <span class="tag">&lt;finalName&gt;</span>${project.artifactId}<span class="tag">&lt;/finalName&gt;</span>
<span class="line-numbers">120</span>        <span class="tag">&lt;plugins&gt;</span>
<span class="line-numbers">121</span>            <span class="comment">&lt;!-- Enable liberty-maven plugin --&gt;</span>
<span class="line-numbers">122</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">123</span>                <span class="tag">&lt;groupId&gt;</span>io.openliberty.tools<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">124</span>                <span class="tag">&lt;artifactId&gt;</span>liberty-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">125</span>                <span class="tag">&lt;version&gt;</span>3.8.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">126</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">127</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">128</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">129</span>                <span class="tag">&lt;artifactId&gt;</span>maven-war-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">130</span>                <span class="tag">&lt;version&gt;</span>3.3.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">131</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">132</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">133</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">134</span>                <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">135</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">136</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">137</span>            <span class="comment">&lt;!-- tag::failsafe[] --&gt;</span>
<span class="line-numbers">138</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers">139</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">140</span>                <span class="tag">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">141</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">142</span>                <span class="tag">&lt;configuration&gt;</span>
<span class="line-numbers">143</span>                    <span class="tag">&lt;systemPropertyVariables&gt;</span>
<span class="line-numbers">144</span>                        <span class="tag">&lt;http.port&gt;</span>${liberty.var.default.http.port}<span class="tag">&lt;/http.port&gt;</span>
<span class="line-numbers">145</span>                    <span class="tag">&lt;/systemPropertyVariables&gt;</span>
<span class="line-numbers">146</span>                <span class="tag">&lt;/configuration&gt;</span>
<span class="line-numbers">147</span>                <span class="tag">&lt;executions&gt;</span>
<span class="line-numbers">148</span>                    <span class="tag">&lt;execution&gt;</span>
<span class="line-numbers">149</span>                        <span class="tag">&lt;goals&gt;</span>
<span class="line-numbers">150</span>                            <span class="tag">&lt;goal&gt;</span>integration-test<span class="tag">&lt;/goal&gt;</span>
<span class="line-numbers">151</span>                            <span class="tag">&lt;goal&gt;</span>verify<span class="tag">&lt;/goal&gt;</span>
<span class="line-numbers">152</span>                        <span class="tag">&lt;/goals&gt;</span>
<span class="line-numbers">153</span>                    <span class="tag">&lt;/execution&gt;</span>
<span class="line-numbers">154</span>                <span class="tag">&lt;/executions&gt;</span>
<span class="line-numbers">155</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">156</span>            <span class="comment">&lt;!-- end::failsafe[] --&gt;</span>
<span class="line-numbers">157</span>        <span class="tag">&lt;/plugins&gt;</span>
<span class="line-numbers">158</span>    <span class="tag">&lt;/build&gt;</span>
<span class="line-numbers">159</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The required <code class="hotspot=testDependenies file=3">dependencies</code> are already added to the <code class="hotspot file=3">pom.xml</code> Maven configuration file for you, including JUnit5, JBoss RESTEasy client, Glassfish JSON, Testcontainers, and Log4J libraries.</p>
</div>
<div class="paragraph">
<p>To enable running the integration test by the Maven <code>verify</code> goal, the <code class="hotspot=failsafe file=3">maven-failsafe-plugin</code> plugin is also required.</p>
</div>
<div class="sect2">
<h3 id="running-the-tests">Running the tests</h3>
<div class="paragraph">
<p>You can run the Maven <code>verify</code> goal, which compiles the java files, starts the containers, runs the tests, and then stops the containers.</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn verify</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the following output:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running it.io.openliberty.guides.query.QueryResourceIT
...
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 11.694 s - in it.io.openliberty.guides.query.QueryResourceIT

Results :

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="great-work-youre-done">Great work! You’re done!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You just learnt how to use a GraphQL client to run GraphQL queries and mutations!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guide-attribution">Guide Attribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Running GraphQL queries and mutations using a GraphQL client <span class="licensedClass">by</span> Open Liberty <span class="licensedClass">is licensed under</span> CC BY-ND 4.0</p>
</div>
</div>
</div>
    </div>
  </div>

  <!-- Code section -->
  <div id="code_column" class="position_relative" tabindex="0">
    <div id="code_column_title_container">
      <div id="code_column_tabs_container" class="dimmed">
        <ul id="code_column_tabs" class="nav" role="tablist"></ul>
      </div>
      <div class="copyFileButton" tabindex="0">
        <img src="/img/guides_copy_button.svg" alt="Copy file contents" title="Copy file contents">
        <div id="code_section_copied_confirmation">Copied to clipboard </div>
      </div>
    </div>
    <div id="code_column_content"></div>

    <div id="prereqs_container">
      <p id="prereqs_title">Prerequisites:</p>
      <div class="prereqs_list"></div>
      <div class="skills_network_container">
        <div class="skills_network_description"></div>
      </div>
    </div>

    <button id="dismiss_button" aria-label="Back to text" tabindex="0">
      Back to text
    </button>
  </div>
</div>

<!-- Build a list of all the documents in the guides code base -->






<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->


    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    


<!-- Sort list of guides by date with most recent first -->





<div id="end_of_guide">
        <h2 tabindex="0">Nice work! Where to next?</h2>
        <div id="end_of_guide_left_section">
            <p id="guide_attribution"></p>
            
            <h3 id="feedback_rating_question">What did you think of this guide?</h3>
            <div id="feedback_ratings">
                <img class="guide_rating" id="extreme_dislike" src="/img/1_Extreme_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Extreme Dislike" data-guide-rating="1" tabindex="0" aria-label="Rate this guide as extreme dislike">
                <img class="guide_rating" id="dislike" src="/img/2_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Dislike" data-guide-rating="2" tabindex="0" aria-label="Rate this guide as dislike">
                <img class="guide_rating" id="like" src="/img/3_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Like" data-guide-rating="3" tabindex="0" aria-label="Rate this guide as like">
                <img class="guide_rating" id="extreme_like" src="/img/4_Extreme_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Extreme Like" data-guide-rating="4" tabindex="0" aria-label="Rate this guide as extreme like">
            </div>

            <div id="like_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <button id="close_button" class="popup_button" onclick="$('#like_popup').hide();">Close</button>
                </div>
            </div>

            <div id="dislike_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <p id="open_issue">Would you like to open an issue in GitHub?</p>
                    
                        <a href="https://github.com/OpenLiberty/guide-graphql-client/issues/new" target="_blank" id="yes_button" class="popup_button" onclick="$('#dislike_popup').hide();" rel="noopener noreferrer">Yes</a>
                    
                    <button id="no_button" class="popup_button" onclick="$('#dislike_popup').hide();">No, thank you</button>
                </div>
            </div>

            <h3 id="improve_guide_feedback">What could make this guide better?</h3>
            
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-graphql-client/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-graphql-client/pulls">Create a pull request</a> to contribute to this guide</p>
            

            <h3 id="need_help">Need help?</h3>
            <p><a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/open-liberty">Ask a question on Stack Overflow</a></p>

            <h3>Like Open Liberty? Star our repo on GitHub.</h3>
            <a class="github-button" href="https://github.com/OpenLiberty/open-liberty" data-icon="octicon-star" aria-label="Star OpenLiberty/open-liberty on GitHub" target="_blank" rel="noopener noreferrer">Star</a>
        </div>
        <div id="end_of_guide_right_section">
            <h3 id="where_to_next">Where to next?</h3>

            
            

            <!-- Related guides section -->
            
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/microprofile-graphql.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Optimizing REST queries for microservices with GraphQL</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">30 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                </div>
            </div>
            
        </div>
    </div>



    </main>

    



<footer>
    <div id="footer_gray_background">
        <div id="footer_top_container" class="footer_container container-fluid">
            <div id="footer_project_container">
                <span id="footer_open_liberty"></span>
                <p id="footer_project">IBM 开放式源代码项目</p>
            </div>
            <div id="footer_round_links_container">
                <a id="footer_github_link" class="footer_round_btn" href="https://github.com/OpenLiberty/" target="_blank" rel="noopener noreferrer" aria-label="Github"></a>
                <a id="footer_twitter_link" class="footer_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="footer_stackoverflow_link" class="footer_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="footer_groupsio_link" class="footer_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="footer_gitter_link" class="footer_round_btn" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>         
    </div>

    <div id="footer_bottom_container" class="footer_container container-fluid">
        <div id="footer_bottom_left_section">
            <p id="footer_copyright">© Copyright IBM Corp. 2017, 2023</p>
            <p class="vertical_bar">|</p>
            <a id="footer_privacy_policy_link" href="https://www.ibm.com/privacy/" target="_blank" rel="noopener noreferrer" class="left_footer_link">隐私策略</a>
            <p class="vertical_bar">|</p>
            <a id="footer_license_link" href="https://github.com/OpenLiberty/open-liberty/blob/release/LICENSE" target="_blank" rel="noopener noreferrer" class="left_footer_link">许可证</a>
            <p class="vertical_bar">|</p>
            <a id="footer_logos_link" href="https://github.com/OpenLiberty/logos" target="_blank" rel="noopener noreferrer" class="left_footer_link">洛戈斯</a>
        </div>
        <div id="footer_bottom_right_section">
            <a id="footer_docs_link" href="/docs" aria-label="Open Liberty Docs" class="right_footer_link blue_link_light_background">文档</a>
            <a id="footer_blog_link" href="/blog" aria-label="Open Liberty Blog" class="right_footer_link blue_link_light_background">博客</a>
            <a id="footer_support_link" href="/support" aria-label="Open Liberty Support" class="right_footer_link blue_link_light_background">支持</a>
        </div>
    </div>
</footer>

<!-- PRE-LOADED IMAGES FOR ON HOVER BEHAVIOR -->
<div class="d-none hidden">
    <img src="/img/Footer_GitCat_Hover.svg" alt="OpenLiberty Github link">
    <img src="/img/Footer_TwitterBird_Hover.svg" alt="OpenLibertyIO Twitter link">
    <img src="/img/Footer_StackO_Hover.svg" alt="Open-liberty Stack Overflow link">
    <img src="/img/Footer_GroupsIO_Hover.svg" alt="Openliberty Groups IO link">
    <img src="/img/footer_gitter_hover.svg" alt="Openliberty Gitter link">
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha512-lzilC+JFd6YV8+vQRNRtU7DOqv5Sa9Ek53lXt/k91HZTJpytHS1L6l1mMKR9K6VVoDt4LiEXaa6XBrYk1YhGTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>


<script type="text/javascript" src="/zh-Hans/assets/devEnvironment.js"></script>




  <script type="text/javascript" src="/zh-Hans/assets/guide-common.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/toc.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/tabs.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-static.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-multipane-static.js"></script>


<script type="text/javascript" src="/zh-Hans/assets/openliberty.js"></script>

  </body>

</html>
