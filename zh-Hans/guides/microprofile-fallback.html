<!DOCTYPE html>
<html lang="zh-Hans">

  





<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Building fault-tolerant Java microservices with Eclipse MicroProfile Fault Tolerance&#39;s fallback policy
    
  </title>
  <meta name="description" content="A tutorial and an example on how to build resilient Java microservices to handle failed executions using MicroProfile Fault Tolerance and monitor fault-tolerant methods using MicroProfile Metrics.">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/openliberty.css">
  <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/coderay-custom.css">

  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/header-dark.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/toc-multipane-static.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/end-of-guide.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-card.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/tabs.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-common.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane.css">
  
    <link type="text/css" rel="stylesheet" href="/zh-Hans/assets/guide-multipane-static.css">
  

  

  

  <link rel="canonical" href="https://openliberty.io/zh-Hans/guides/microprofile-fallback">
  <link rel="alternate" type="application/rss+xml" title="Open Liberty" href="/zh-Hans/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Asap:400,500" rel="stylesheet">
    
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@OpenLibertyIO" />
  <meta name="twitter:title" content="Building fault-tolerant Java microservices with Eclipse MicroProfile Fault Tolerance's fallback policy" />
  <meta name="twitter:description" content="A tutorial and an example on how to build resilient Java microservices to handle failed executions using MicroProfile Fault Tolerance and monitor fault-tolerant methods using MicroProfile Metrics." />

  <meta property='og:title' content="Building fault-tolerant Java microservices with Eclipse MicroProfile Fault Tolerance's fallback policy" />
  <meta property='og:image' content="https://openliberty.io/img/twitter_card.jpg" />
  <meta property='og:image:alt' content="Open Liberty Logo" />
  <meta property='og:description' content="A tutorial and an example on how to build resilient Java microservices to handle failed executions using MicroProfile Fault Tolerance and monitor fault-tolerant methods using MicroProfile Metrics." />
  <meta property='og:url' content="https://openliberty.io/zh-Hans/guides/microprofile-fallback" />
  <meta property='og:type' content="website" />
  
  <meta name="google-site-verification" content="h2P030H9b66CyL1nEmWfrZB8Fr14h9LmVMG7Ur0caBs" />

  
      <meta name="robots" content="noindex" />
  

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>


  <body>
    
    

    


<!--  -->

<header>
    <nav id="nav_bar">
        <div id="nav_header">
            <a id="home_link" href="/" aria-label="Open Liberty Home">
                <img id="ol_logo" src="/img/docs_openliberty_logo.png" alt="Open Liberty Logo">
            </a>
            <button id="hamburger_toggle_button" onclick="$('#nav_bar').toggleClass('responsive');">
                <span id="hamburger_toggle_icon"></span>
            </button>
        </div>
        <div id="hamburger_menu">
            <ul class="nav_list">
                <li class="nav_link">
                    <a href="/start/">入门</a>
                </li>
                <li class="nav_link">
                    <a href="/guides/">指南</a>
                </li>
                <li class="nav_link">
                    <a href="/docs/">文档</a>
                </li>
                <li class="nav_link">
                    <a href="/support/">支持</a>
                </li>
                <li class="nav_link">
                    <a href="/blog/">博客</a>
                </li>
            </ul>
            <div id="header_round_links_container"> 
                <a id="header_twitter_link" class="header_round_button" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="header_stackoverflow_link" class="header_round_button" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="header_groupsio_link" class="header_round_button" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="header_gitter_link" class="header_round_button" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>

    </nav>
</header>


    <main aria-label="Content">

      <!-- Build a list of all the documents in the guides code base -->
  
 

<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->
<!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
 

<!-- Sort list of guides by date with most recent first -->


<div id="background_container">
  <div id="toc_hotspot"></div>
  <!-- Guide's table of contents section -->
  <div id="toc_column" class="collapse inline open">
    <div id="toc_inner">
       
      <div id="close_container">
        <img id="toc_close_white" src="/img/toc_close_white.svg" alt="Close the table of contents" tabindex="0">
      </div>
      <h3 id="toc_title">Contents</h3>
      <div id="toc_container"><ul class="sectlevel1">
<li><a href="#what-youll-learn">What you’ll learn</a></li>
<li>
<a href="#getting-started">Getting started</a>
<ul class="sectlevel2">
<li><a href="#try-what-youll-build">Try what you’ll build</a></li>
</ul>
</li>
<li>
<a href="#enabling-fault-tolerance">Enabling fault tolerance</a>
<ul class="sectlevel2">
<li><a href="#adding-the-fallback-annotation">Adding the @Fallback annotation</a></li>
</ul>
</li>
<li><a href="#enabling-metrics-for-the-fault-tolerance-methods">Enabling metrics for the fault tolerance methods</a></li>
<li><a href="#running-the-application">Running the application</a></li>
<li>
<a href="#testing-the-application">Testing the application</a>
<ul class="sectlevel2">
<li><a href="#running-the-tests">Running the tests</a></li>
</ul>
</li>
<li><a href="#great-work-youre-done">Great work! You’re done!</a></li>
<li><a href="#guide-attribution">Guide Attribution</a></li>
</ul></div>
      <div id="toc_separator"></div>
      
      <h3 id="tag_title">标签</h3>
      <div id="tags_container"></div>
    </div>
  </div>
  <div id="toc_indicator" tabindex="0" aria-label="Open the table of contents" class="hidden">
    <img src="/img/arrow_white.svg" alt="arrow">
  </div>
  <div id="toc_line" class="open"></div>
  <!-- Entire guide section -->
  <div id="guide_column" class="position_relative open">
    <div id="guide_content">
      <!-- Guide header section -->
      <div id="guide_meta" class="sect1" tabindex="0">
        <h1 id="guide_title">Building fault-tolerant microservices with the @Fallback annotation</h1>
        <div id="duration_container">
          <img src="/img/guide_duration_clock_icon_large.svg" alt="duration">
          <span id="guide_duration">20 minutes</span>

          <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
          <!-- If new posts count is less than 4, use 4 most recent posts -->
           
          <!-- If new posts count is >= 4, use posts from last 30 days-->
          
          <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
          <!-- Count number of guides from past last 12 weeks that is 84 days-->
          <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
          
        </div>
        <div id="mobile_prereqs_section">
          <p id="mobile_prereqs_title">Prerequisites:</p>
          <div class="prereqs_list"></div>
          <div class="skills_network_container">
            <div class="skills_network_description"></div>
          </div>
        </div>
      </div>

      <div class="scroller_anchor"></div>
      <div id="mobile_toc_accordion_container" data-toggle="collapse" data-target="#toc_column" aria-expanded="false" aria-controls="toc_column" role="button">
        <div role="menuitem" id="mobile_toc_accordion">
          <button class="breadcrumb_hamburger toc-toggle collapsed" type="button" tabindex="0">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <img src="/img/toc_close_green.svg" class="TOC_Close_SVG hidden img-responsive" alt="Table of contents close button">
          </button>
          <span>Table of contents</span>
        </div>
      </div>

      <!-- Guide content section -->
      <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note hidden">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This repository contains the guide documentation source. To view the guide in published form, view it on the <a href="https://openliberty.io/guides/microprofile-fallback.html">Open Liberty website</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You’ll explore how to manage the impact of failures using MicroProfile Fault Tolerance by adding fallback behavior to microservice dependencies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-youll-learn">What you’ll learn</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will learn how to use MicroProfile (MP) Fault Tolerance to build resilient microservices that reduce the impact from failure and ensure continued operation of services.</p>
</div>
<div class="paragraph">
<p>MP Fault Tolerance provides a simple and flexible solution to build fault-tolerant microservices. Fault tolerance leverages different strategies to guide the execution and result of logic. As stated in the <a href="https://microprofile.io/project/eclipse/microprofile-fault-tolerance" target="_blank" rel="noopener noreferrer">MicroProfile website</a>, retry policies, bulkheads, and circuit breakers are popular concepts in this area. They dictate whether and when executions take place, and fallbacks offer an alternative result when an execution does not complete successfully.</p>
</div>
<div class="paragraph">
<p>The application that you will be working with is an <code>inventory</code> service, which collects, stores, and returns the system properties. It uses the <code>system</code> service to retrieve the system properties for a particular host. You will add fault tolerance to the <code>inventory</code> service so that it reacts accordingly when the <code>system</code> service is unavailable.</p>
</div>
<div class="paragraph">
<p>You will use the <code>@Fallback</code> annotations from the MicroProfile Fault Tolerance specification to define criteria for when to provide an alternative solution for a failed execution.</p>
</div>
<div class="paragraph">
<p>You will also see the application metrics for the fault tolerance methods that are automatically enabled when you add the MicroProfile Metrics feature to your Open Liberty.</p>
</div>
</div>
</div>
<div class="sect1 command">
<h2 id="getting-started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fastest way to work through this guide is to clone the <a href="https://github.com/openliberty/guide-microprofile-fallback.git" target="_blank" rel="noopener noreferrer">Git repository</a> and use the projects that are provided inside:</p>
</div>
<div id="git_clone" class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>git clone https://github.com/openliberty/guide-microprofile-fallback.git
cd guide-microprofile-fallback</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>start</code> directory contains the starting project that you will build upon.</p>
</div>
<div class="paragraph">
<p>The <code>finish</code> directory contains the finished project that you will build.</p>
</div>
<div class="paragraph">
<p>Before you begin, make sure you have all the necessary <span class="prerequisites">prerequisites</span>.</p>
</div>
<div class="sect2 command">
<h3 id="try-what-youll-build">Try what you’ll build</h3>
<div class="paragraph">
<p>The <code>finish</code> directory in the root of this guide contains the finished application. Give it a try before you proceed.</p>
</div>
<div class="paragraph">
<p>To try out the application, first go to the <code>finish</code> directory and run the following Maven goal to build the application and deploy it to Open Liberty:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>cd finish
mvn liberty:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you see the following message, your Liberty instance is ready:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>The defaultServer server is ready to run a smarter planet.</pre>
</div>
</div>
<div class="paragraph">
<p>Point your browser to the <a href="http://localhost:9080/inventory/systems/localhost" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/inventory/systems/localhost</a> URL, which accesses the <code>inventory</code> service with a localhost hostname. You see the system properties for this host. When you visit this URL, some of these system properties, such as the OS name and user name, are automatically stored in the inventory.</p>
</div>
<div class="listingblock code_command hotspot">
<div class="content">
<pre><mark>Update the <code>CustomConfigSource</code> configuration file.</mark>
<code>resources/CustomConfigSource.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>CustomConfigSource.json</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="JSON"><span class="line-numbers">1</span>{<span class="key"><span class="delimiter">"</span><span class="content">config_ordinal</span><span class="delimiter">"</span></span>:<span class="integer">500</span>,
<span class="line-numbers">2</span><span class="key"><span class="delimiter">"</span><span class="content">io_openliberty_guides_system_inMaintenance</span><span class="delimiter">"</span></span>:<span class="value">false</span>}</code></pre>
</div>
</div>
<div class="paragraph edit_command_text">
<p>Change the <code class="hotspot=2">io_openliberty_guides_system_inMaintenance</code> property from <code>false</code> to <code>true</code> and save the file.</p>
</div>
<div class="paragraph">
<p>You do not need to restart the Liberty instance. Next, return to your browser and point back to the <a href="http://localhost:9080/inventory/systems/localhost" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/inventory/systems/localhost</a> URL. The fallback mechanism is triggered because the <code>system</code> service is now in maintenance. You see the cached properties for this localhost.</p>
</div>
<div class="paragraph">
<p>When you are done checking out the application, go to the <code class="hotspot">CustomConfigSource.json</code> file again.</p>
</div>
<div class="listingblock code_command hotspot">
<div class="content">
<pre><mark>Update the <code>CustomConfigSource</code> configuration file.</mark>
<code>resources/CustomConfigSource.json</code></pre>
</div>
</div>
<div class="paragraph edit_command_text">
<p>Change the <code class="hotspot=2">io_openliberty_guides_system_inMaintenance</code> property from <code>true</code> to <code>false</code> to set this condition back to its original value.</p>
</div>
<div class="paragraph command">
<p>After you are finished checking out the application, stop the Liberty instance by pressing <code>CTRL+C</code> in the command-line session where you ran Liberty. Alternatively, you can run the <code>liberty:stop</code> goal from the <code>finish</code> directory in another shell session:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn liberty:stop</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-fault-tolerance">Enabling fault tolerance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to the <code>start</code> directory to begin.</p>
</div>
<div class="paragraph command">
<p>When you run Open Liberty in <a href="https://openliberty.io/docs/latest/development-mode.html" target="_blank" rel="noopener">dev mode</a>, dev mode listens for file changes and automatically recompiles and deploys your updates whenever you save a new change. Run the following goal to start Open Liberty in dev mode:</p>
</div>
<div class="listingblock command">
<div class="content">
<pre class="CodeRay highlight"><code>mvn liberty:dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you see the following message, your Liberty instance is ready in dev mode:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre>**************************************************************
*    Liberty is running in dev mode.</pre>
</div>
</div>
<div class="paragraph">
<p>Dev mode holds your command-line session to listen for file changes. Open another command-line session to continue, or open the project in your editor.</p>
</div>
<div class="paragraph">
<p>The MicroProfile Fault Tolerance API is included in the MicroProfile dependency that is specified in your <code class="hotspot file=4">pom.xml</code> file. Look for the dependency with the <code class="hotspot=microprofile file=4">microprofile</code> artifact ID. This dependency provides a library that allows you to use fault tolerance policies in your microservices.</p>
</div>
<div class="paragraph">
<p>You can also find the <code class="hotspot=mpFaultTolerance file=3">mpFaultTolerance</code> feature in your <code class="hotspot file=3">src/main/liberty/config/server.xml</code> configuration file, which turns on MicroProfile Fault Tolerance capabilities in Open Liberty.</p>
</div>
<div class="paragraph">
<p>To easily work through this guide, the two provided microservices are set up to run on the same Liberty instance. To simulate the availability of the services and then to enable fault tolerance, dynamic configuration with MicroProfile Configuration is used so that you can easily take one service or the other down for maintenance. If you want to learn more about setting up dynamic configuration, see <a href="https://openliberty.io/guides/microprofile-config.html" target="_blank" rel="noopener">Configuring microservices</a>.</p>
</div>
<div class="paragraph">
<p>The following two steps set up the dynamic configuration on the <code>system</code> service and its client. You can move on to the next section, which adds the fallback mechanism on the <code>inventory</code> service.</p>
</div>
<div class="paragraph">
<p>First, the <code class="hotspot file=0">src/main/java/io/openliberty/guides/system/SystemResource.java</code> file has the <code class="hotspot=isInMaintenance file=0">isInMaintenance()</code> condition, which determines that the system properties are returned only if you set the <code class="hotspot=2 file=1">io_openliberty_guides_system_inMaintenance</code> configuration property to <code>false</code> in the <code class="hotspot file=1">CustomConfigSource</code> file. Otherwise, the service returns a <code class="hotspot=response-status file=0">Status.SERVICE_UNAVAILABLE</code> message, which makes it unavailable.</p>
</div>
<div class="paragraph">
<p>Next, the <code class="hotspot file=2">src/main/java/io/openliberty/guides/inventory/client/SystemClient.java</code> file makes a request to the <code>system</code> service through the MicroProfile Rest Client API. If you want to learn more about MicroProfile Rest Client, you can follow the <a href="https://openliberty.io/guides/microprofile-rest-client.html" target="_blank" rel="noopener">Consuming RESTful services with template interfaces</a> guide. The <code>system</code> service as described in the <code class="hotspot file=0">SystemResource.java</code> file may return a <code class="hotspot=response-status file=0">Status.SERVICE_UNAVAILABLE</code> message, which is a 503 status code. This code indicates that the Liberty instance being called is unable to handle the request because of a temporary overload or scheduled maintenance, which would likely be alleviated after some delay. To simulate that the system is unavailable, an <code class="hotspot=IOException file=2">IOException</code> is thrown.</p>
</div>
<div class="paragraph">
<p>The <code>InventoryManager</code> class calls the <code class="hotspot=getProperties file=2">getProperties()</code> method in the <code class="hotspot file=2">SystemClient.java</code> class. You will look into the <code>InventoryManager</code> class in more detail in the next section.</p>
</div>
<div class="paragraph">
<p>SystemResource.java</p>
</div>
<div class="listingblock code_column tags=503_response hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="comment">// tag::503_response[]</span>
<span class="line-numbers">13</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.system</span>;
<span class="line-numbers">14</span>
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">jakarta.enterprise.context.RequestScoped</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.GET</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.inject.Inject</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Produces</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.MediaType</span>;
<span class="line-numbers">22</span>
<span class="line-numbers">23</span><span class="annotation">@RequestScoped</span>
<span class="line-numbers">24</span><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">properties</span><span class="delimiter">"</span></span>)
<span class="line-numbers">25</span><span class="directive">public</span> <span class="type">class</span> <span class="class">SystemResource</span> {
<span class="line-numbers">26</span>
<span class="line-numbers">27</span>  <span class="annotation">@Inject</span>
<span class="line-numbers">28</span>  SystemConfig systemConfig;
<span class="line-numbers">29</span>
<span class="line-numbers">30</span>  <span class="annotation">@GET</span>
<span class="line-numbers">31</span>  <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">32</span>  <span class="directive">public</span> Response getProperties() {
<span class="line-numbers">33</span>    <span class="comment">// tag::isInMaintenance[]</span>
<span class="line-numbers">34</span>    <span class="keyword">if</span> (!systemConfig.isInMaintenance()) {
<span class="line-numbers">35</span>      <span class="keyword">return</span> Response.ok(<span class="predefined-type">System</span>.getProperties()).build();
<span class="line-numbers">36</span>    <span class="comment">// end::isInMaintenance[]</span>
<span class="line-numbers">37</span>    } <span class="keyword">else</span> {
<span class="line-numbers">38</span>    <span class="comment">// tag::response-status[]</span>
<span class="line-numbers">39</span>      <span class="keyword">return</span> Response.status(Response.Status.SERVICE_UNAVAILABLE).build();
<span class="line-numbers">40</span>    <span class="comment">// end::response-status[]</span>
<span class="line-numbers">41</span>    }
<span class="line-numbers">42</span>  }
<span class="line-numbers">43</span>}
<span class="line-numbers">44</span><span class="comment">// end::503_response[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>CustomConfigSource.json</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="JSON"><span class="line-numbers">1</span>{<span class="key"><span class="delimiter">"</span><span class="content">config_ordinal</span><span class="delimiter">"</span></span>:<span class="integer">500</span>,
<span class="line-numbers">2</span><span class="key"><span class="delimiter">"</span><span class="content">io_openliberty_guides_system_inMaintenance</span><span class="delimiter">"</span></span>:<span class="value">false</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>SystemClient.java</p>
</div>
<div class="listingblock code_column tags=client hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="comment">// tag::client[]</span>
<span class="line-numbers">13</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.inventory.client</span>;
<span class="line-numbers">14</span>
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">java.util.Properties</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.ProcessingException</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.GET</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.Produces</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.MediaType</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.rest.client.annotation.RegisterProvider</span>;
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.rest.client.inject.RegisterRestClient</span>;
<span class="line-numbers">24</span>
<span class="line-numbers">25</span><span class="comment">// tag::annotations[]</span>
<span class="line-numbers">26</span>
<span class="line-numbers">27</span><span class="annotation">@RegisterRestClient</span>
<span class="line-numbers">28</span><span class="annotation">@RegisterProvider</span>(ExceptionMapper.class)
<span class="line-numbers">29</span><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">"</span><span class="content">/properties</span><span class="delimiter">"</span></span>)
<span class="line-numbers">30</span><span class="directive">public</span> <span class="type">interface</span> <span class="class">SystemClient</span> {
<span class="line-numbers">31</span>  <span class="comment">// end::annotations[]</span>
<span class="line-numbers">32</span>  <span class="annotation">@GET</span>
<span class="line-numbers">33</span>  <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="line-numbers">34</span>  <span class="comment">// tag::getProperties[]</span>
<span class="line-numbers">35</span>  <span class="predefined-type">Properties</span> getProperties()
<span class="line-numbers">36</span>      <span class="comment">// tag::IOException[]</span>
<span class="line-numbers">37</span>      <span class="directive">throws</span> UnknownUrlException, <span class="exception">IOException</span>, ProcessingException;
<span class="line-numbers">38</span>      <span class="comment">// end::IOException[]</span>
<span class="line-numbers">39</span>  <span class="comment">// end::getProperties[]</span>
<span class="line-numbers">40</span>}
<span class="line-numbers">41</span><span class="comment">// end::client[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>server.xml</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers"> 1</span><span class="tag">&lt;server</span> <span class="attribute-name">description</span>=<span class="string"><span class="delimiter">"</span><span class="content">Sample Liberty server</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 2</span>
<span class="line-numbers"> 3</span>  <span class="tag">&lt;featureManager&gt;</span>
<span class="line-numbers"> 4</span>    <span class="tag">&lt;feature&gt;</span>restfulWS-3.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 5</span>    <span class="tag">&lt;feature&gt;</span>jsonb-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 6</span>    <span class="tag">&lt;feature&gt;</span>jsonp-2.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 7</span>    <span class="tag">&lt;feature&gt;</span>cdi-4.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 8</span>    <span class="tag">&lt;feature&gt;</span>mpConfig-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 9</span>    <span class="tag">&lt;feature&gt;</span>mpRestClient-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers">10</span>    <span class="comment">&lt;!-- tag::mpFaultTolerance[] --&gt;</span>
<span class="line-numbers">11</span>    <span class="tag">&lt;feature&gt;</span>mpFaultTolerance-4.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers">12</span>    <span class="comment">&lt;!-- end::mpFaultTolerance[] --&gt;</span>
<span class="line-numbers">13</span>    <span class="comment">&lt;!-- tag::mpMetrics[] --&gt;</span>
<span class="line-numbers">14</span>    <span class="tag">&lt;feature&gt;</span>mpMetrics-5.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers">15</span>    <span class="comment">&lt;!-- end::mpMetrics[] --&gt;</span>
<span class="line-numbers">16</span>  <span class="tag">&lt;/featureManager&gt;</span>
<span class="line-numbers">17</span>
<span class="line-numbers">18</span>  <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.http.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9080</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">19</span>  <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.https.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9443</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">20</span>
<span class="line-numbers">21</span>  <span class="comment">&lt;!-- tag::quickStartSecurity[] --&gt;</span>
<span class="line-numbers">22</span>  <span class="tag">&lt;quickStartSecurity</span> <span class="attribute-name">userName</span>=<span class="string"><span class="delimiter">"</span><span class="content">admin</span><span class="delimiter">"</span></span> <span class="attribute-name">userPassword</span>=<span class="string"><span class="delimiter">"</span><span class="content">adminpwd</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">23</span>  <span class="comment">&lt;!-- end::quickStartSecurity[] --&gt;</span>
<span class="line-numbers">24</span>
<span class="line-numbers">25</span>  <span class="tag">&lt;httpEndpoint</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span> <span class="attribute-name">httpPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.http.port}</span><span class="delimiter">"</span></span>
<span class="line-numbers">26</span>    <span class="attribute-name">httpsPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.https.port}</span><span class="delimiter">"</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">defaultHttpEndpoint</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>  <span class="tag">&lt;webApplication</span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">"</span><span class="content">guide-microprofile-fallback.war</span><span class="delimiter">"</span></span> <span class="attribute-name">contextRoot</span>=<span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">29</span><span class="tag">&lt;/server&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>pom.xml</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers">  1</span><span class="preprocessor">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="line-numbers">  2</span><span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers">  3</span>
<span class="line-numbers">  4</span>    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
<span class="line-numbers">  5</span>
<span class="line-numbers">  6</span>    <span class="tag">&lt;groupId&gt;</span>io.openliberty.guides<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers">  7</span>    <span class="tag">&lt;artifactId&gt;</span>guide-microprofile-fallback<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers">  8</span>    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers">  9</span>    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
<span class="line-numbers"> 10</span>
<span class="line-numbers"> 11</span>    <span class="tag">&lt;properties&gt;</span>
<span class="line-numbers"> 12</span>        <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
<span class="line-numbers"> 13</span>        <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
<span class="line-numbers"> 14</span>        <span class="tag">&lt;maven.compiler.source&gt;</span>11<span class="tag">&lt;/maven.compiler.source&gt;</span>
<span class="line-numbers"> 15</span>        <span class="tag">&lt;maven.compiler.target&gt;</span>11<span class="tag">&lt;/maven.compiler.target&gt;</span>
<span class="line-numbers"> 16</span>        <span class="comment">&lt;!-- Liberty configuration --&gt;</span>
<span class="line-numbers"> 17</span>        <span class="tag">&lt;liberty.var.default.http.port&gt;</span>9080<span class="tag">&lt;/liberty.var.default.http.port&gt;</span>
<span class="line-numbers"> 18</span>        <span class="tag">&lt;liberty.var.default.https.port&gt;</span>9443<span class="tag">&lt;/liberty.var.default.https.port&gt;</span>
<span class="line-numbers"> 19</span>    <span class="tag">&lt;/properties&gt;</span>
<span class="line-numbers"> 20</span>
<span class="line-numbers"> 21</span>    <span class="tag">&lt;dependencies&gt;</span>
<span class="line-numbers"> 22</span>        <span class="comment">&lt;!-- Provided dependencies --&gt;</span>
<span class="line-numbers"> 23</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 24</span>            <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 25</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 26</span>            <span class="tag">&lt;version&gt;</span>10.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 27</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 28</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 29</span>        <span class="comment">&lt;!-- tag::microprofile[] --&gt;</span>
<span class="line-numbers"> 30</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 31</span>            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 32</span>            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 33</span>            <span class="tag">&lt;version&gt;</span>6.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 34</span>            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
<span class="line-numbers"> 35</span>            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 36</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 37</span>        <span class="comment">&lt;!-- end::microprofile[] --&gt;</span>
<span class="line-numbers"> 38</span>        <span class="comment">&lt;!-- For tests --&gt;</span>
<span class="line-numbers"> 39</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 40</span>            <span class="tag">&lt;groupId&gt;</span>org.junit.jupiter<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 41</span>            <span class="tag">&lt;artifactId&gt;</span>junit-jupiter<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 42</span>            <span class="tag">&lt;version&gt;</span>5.9.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 43</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 44</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 45</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 46</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 47</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-client<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 48</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 49</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 50</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 51</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 52</span>            <span class="tag">&lt;groupId&gt;</span>org.jboss.resteasy<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 53</span>            <span class="tag">&lt;artifactId&gt;</span>resteasy-json-binding-provider<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 54</span>            <span class="tag">&lt;version&gt;</span>6.2.3.Final<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 55</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 56</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 57</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 58</span>            <span class="tag">&lt;groupId&gt;</span>org.glassfish<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 59</span>            <span class="tag">&lt;artifactId&gt;</span>jakarta.json<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 60</span>            <span class="tag">&lt;version&gt;</span>2.0.1<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 61</span>            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="line-numbers"> 62</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 63</span>        <span class="comment">&lt;!-- Java utility classes --&gt;</span>
<span class="line-numbers"> 64</span>        <span class="tag">&lt;dependency&gt;</span>
<span class="line-numbers"> 65</span>            <span class="tag">&lt;groupId&gt;</span>org.apache.commons<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 66</span>            <span class="tag">&lt;artifactId&gt;</span>commons-lang3<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 67</span>            <span class="tag">&lt;version&gt;</span>3.12.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 68</span>        <span class="tag">&lt;/dependency&gt;</span>
<span class="line-numbers"> 69</span>    <span class="tag">&lt;/dependencies&gt;</span>
<span class="line-numbers"> 70</span>
<span class="line-numbers"> 71</span>    <span class="tag">&lt;build&gt;</span>
<span class="line-numbers"> 72</span>        <span class="tag">&lt;finalName&gt;</span>${project.artifactId}<span class="tag">&lt;/finalName&gt;</span>
<span class="line-numbers"> 73</span>        <span class="tag">&lt;plugins&gt;</span>
<span class="line-numbers"> 74</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 75</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 76</span>                <span class="tag">&lt;artifactId&gt;</span>maven-war-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 77</span>                <span class="tag">&lt;version&gt;</span>3.3.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 78</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 79</span>            <span class="comment">&lt;!-- Plugin to run unit tests --&gt;</span>
<span class="line-numbers"> 80</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 81</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 82</span>                <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 83</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 84</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 85</span>            <span class="comment">&lt;!-- Enable liberty-maven plugin --&gt;</span>
<span class="line-numbers"> 86</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 87</span>                <span class="tag">&lt;groupId&gt;</span>io.openliberty.tools<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 88</span>                <span class="tag">&lt;artifactId&gt;</span>liberty-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 89</span>                <span class="tag">&lt;version&gt;</span>3.8.2<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 90</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers"> 91</span>            <span class="comment">&lt;!-- Plugin to run functional tests --&gt;</span>
<span class="line-numbers"> 92</span>            <span class="tag">&lt;plugin&gt;</span>
<span class="line-numbers"> 93</span>                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
<span class="line-numbers"> 94</span>                <span class="tag">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="tag">&lt;/artifactId&gt;</span>
<span class="line-numbers"> 95</span>                <span class="tag">&lt;version&gt;</span>3.0.0<span class="tag">&lt;/version&gt;</span>
<span class="line-numbers"> 96</span>                <span class="tag">&lt;configuration&gt;</span>
<span class="line-numbers"> 97</span>                    <span class="tag">&lt;systemPropertyVariables&gt;</span>
<span class="line-numbers"> 98</span>                        <span class="tag">&lt;http.port&gt;</span>${liberty.var.default.http.port}<span class="tag">&lt;/http.port&gt;</span>
<span class="line-numbers"> 99</span>                    <span class="tag">&lt;/systemPropertyVariables&gt;</span>
<span class="line-numbers">100</span>                <span class="tag">&lt;/configuration&gt;</span>
<span class="line-numbers">101</span>            <span class="tag">&lt;/plugin&gt;</span>
<span class="line-numbers">102</span>        <span class="tag">&lt;/plugins&gt;</span>
<span class="line-numbers">103</span>    <span class="tag">&lt;/build&gt;</span>
<span class="line-numbers">104</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="adding-the-fallback-annotation">Adding the @Fallback annotation</h3>
<div class="paragraph">
<p>The <code>inventory</code> service is now able to recognize that the <code>system</code> service was taken down for maintenance. An IOException is thrown to simulate the <code>system</code> service is unavailable. Now, set a fallback method to deal with this failure.</p>
</div>
<div class="listingblock code_command hotspot">
<div class="content">
<pre><mark>Replace the <code>InventoryManager</code> class.</mark>
<code>src/main/java/io/openliberty/guides/inventory/InventoryManager.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>InventoryManager.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.inventory</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">java.net.UnknownHostException</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">java.util.Properties</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">java.util.ArrayList</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">java.util.Collections</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.enterprise.context.ApplicationScoped</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.faulttolerance.Fallback</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.inventory.model.InventoryList</span>;
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.inventory.model.SystemData</span>;
<span class="line-numbers">24</span>
<span class="line-numbers">25</span><span class="annotation">@ApplicationScoped</span>
<span class="line-numbers">26</span><span class="directive">public</span> <span class="type">class</span> <span class="class">InventoryManager</span> {
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;SystemData&gt; systems = <span class="predefined-type">Collections</span>.synchronizedList(<span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;());
<span class="line-numbers">29</span>    <span class="directive">private</span> InventoryUtils invUtils = <span class="keyword">new</span> InventoryUtils();
<span class="line-numbers">30</span>
<span class="line-numbers">31</span>    <span class="comment">// tag::Fallback[]</span>
<span class="line-numbers">32</span>    <span class="annotation">@Fallback</span>(fallbackMethod = <span class="string"><span class="delimiter">"</span><span class="content">fallbackForGet</span><span class="delimiter">"</span></span>,
<span class="line-numbers">33</span>            <span class="comment">// tag::applyOn[]</span>
<span class="line-numbers">34</span>            applyOn = {<span class="exception">IOException</span>.class},
<span class="line-numbers">35</span>            <span class="comment">// end::applyOn[]</span>
<span class="line-numbers">36</span>            <span class="comment">// tag::skipOn[]</span>
<span class="line-numbers">37</span>            skipOn = {<span class="exception">UnknownHostException</span>.class})
<span class="line-numbers">38</span>            <span class="comment">// end::skipOn[]</span>
<span class="line-numbers">39</span>    <span class="comment">// end::Fallback[]</span>
<span class="line-numbers">40</span>    <span class="comment">// tag::get[]</span>
<span class="line-numbers">41</span>    <span class="directive">public</span> <span class="predefined-type">Properties</span> get(<span class="predefined-type">String</span> hostname) <span class="directive">throws</span> <span class="exception">IOException</span> {
<span class="line-numbers">42</span>        <span class="keyword">return</span> invUtils.getProperties(hostname);
<span class="line-numbers">43</span>    }
<span class="line-numbers">44</span>    <span class="comment">// end::get[]</span>
<span class="line-numbers">45</span>
<span class="line-numbers">46</span>    <span class="comment">// tag::fallbackForGet[]</span>
<span class="line-numbers">47</span>    <span class="directive">public</span> <span class="predefined-type">Properties</span> fallbackForGet(<span class="predefined-type">String</span> hostname) {
<span class="line-numbers">48</span>        <span class="predefined-type">Properties</span> properties = findHost(hostname);
<span class="line-numbers">49</span>        <span class="keyword">if</span> (properties == <span class="predefined-constant">null</span>) {
<span class="line-numbers">50</span>            <span class="predefined-type">Properties</span> msgProp = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
<span class="line-numbers">51</span>            msgProp.setProperty(hostname,
<span class="line-numbers">52</span>                    <span class="string"><span class="delimiter">"</span><span class="content">System is not found in the inventory or system is in maintenance</span><span class="delimiter">"</span></span>);
<span class="line-numbers">53</span>            <span class="keyword">return</span> msgProp;
<span class="line-numbers">54</span>        }
<span class="line-numbers">55</span>        <span class="keyword">return</span> properties;
<span class="line-numbers">56</span>    }
<span class="line-numbers">57</span>    <span class="comment">// end::fallbackForGet[]</span>
<span class="line-numbers">58</span>
<span class="line-numbers">59</span>    <span class="directive">public</span> <span class="type">void</span> add(<span class="predefined-type">String</span> hostname, <span class="predefined-type">Properties</span> systemProps) {
<span class="line-numbers">60</span>        <span class="predefined-type">Properties</span> props = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
<span class="line-numbers">61</span>
<span class="line-numbers">62</span>        <span class="predefined-type">String</span> osName = systemProps.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.name</span><span class="delimiter">"</span></span>);
<span class="line-numbers">63</span>        <span class="keyword">if</span> (osName == <span class="predefined-constant">null</span>) {
<span class="line-numbers">64</span>            <span class="keyword">return</span>;
<span class="line-numbers">65</span>        }
<span class="line-numbers">66</span>
<span class="line-numbers">67</span>        props.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.name</span><span class="delimiter">"</span></span>, systemProps.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.name</span><span class="delimiter">"</span></span>));
<span class="line-numbers">68</span>        props.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">user.name</span><span class="delimiter">"</span></span>, systemProps.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">user.name</span><span class="delimiter">"</span></span>));
<span class="line-numbers">69</span>
<span class="line-numbers">70</span>        SystemData system = <span class="keyword">new</span> SystemData(hostname, props);
<span class="line-numbers">71</span>        <span class="keyword">if</span> (!systems.contains(system)) {
<span class="line-numbers">72</span>            systems.add(system);
<span class="line-numbers">73</span>        }
<span class="line-numbers">74</span>    }
<span class="line-numbers">75</span>
<span class="line-numbers">76</span>    <span class="directive">public</span> InventoryList list() {
<span class="line-numbers">77</span>        <span class="keyword">return</span> <span class="keyword">new</span> InventoryList(systems);
<span class="line-numbers">78</span>    }
<span class="line-numbers">79</span>
<span class="line-numbers">80</span>    <span class="directive">private</span> <span class="predefined-type">Properties</span> findHost(<span class="predefined-type">String</span> hostname) {
<span class="line-numbers">81</span>        <span class="keyword">for</span> (SystemData system : systems) {
<span class="line-numbers">82</span>            <span class="keyword">if</span> (system.getHostname().equals(hostname)) {
<span class="line-numbers">83</span>                <span class="keyword">return</span> system.getProperties();
<span class="line-numbers">84</span>            }
<span class="line-numbers">85</span>        }
<span class="line-numbers">86</span>        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
<span class="line-numbers">87</span>    }
<span class="line-numbers">88</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=Fallback">@Fallback</code> annotation dictates a method to call when the original method encounters a failed execution. In this example, use the <code class="hotspot=fallbackForGet">fallbackForGet()</code> method.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=Fallback">@Fallback</code> annotation provides two parameters, <code class="hotspot=applyOn">applyOn</code> and <code class="hotspot=skipOn">skipOn</code>, which allow you to configure which exceptions trigger a fallback and which exceptions do not, respectively. In this example, the <code class="hotspot=get">get()</code> method throws <code>IOException</code> when the system service is unavailable, and throws <code>UnknownHostException</code> when the system service cannot be found on the specified host. The <code class="hotspot=fallbackForGet">fallbackForGet()</code> method can handle the first case, but not the second.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=fallbackForGet">fallbackForGet()</code> method, which is the designated fallback method for the original <code class="hotspot=get">get()</code> method, checks to see if the system’s properties exist in the inventory. If the system properties entry is not found in the inventory, the method prints out a warning message in the browser. Otherwise, this method returns the cached property values from the inventory.</p>
</div>
<div class="paragraph">
<p>You successfully set up your microservice to have fault tolerance capability.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-metrics-for-the-fault-tolerance-methods">Enabling metrics for the fault tolerance methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>server.xml</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="line-numbers"> 1</span><span class="tag">&lt;server</span> <span class="attribute-name">description</span>=<span class="string"><span class="delimiter">"</span><span class="content">Sample Liberty server</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"> 2</span>
<span class="line-numbers"> 3</span>  <span class="tag">&lt;featureManager&gt;</span>
<span class="line-numbers"> 4</span>    <span class="tag">&lt;feature&gt;</span>restfulWS-3.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 5</span>    <span class="tag">&lt;feature&gt;</span>jsonb-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 6</span>    <span class="tag">&lt;feature&gt;</span>jsonp-2.1<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 7</span>    <span class="tag">&lt;feature&gt;</span>cdi-4.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 8</span>    <span class="tag">&lt;feature&gt;</span>mpConfig-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers"> 9</span>    <span class="tag">&lt;feature&gt;</span>mpRestClient-3.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers">10</span>    <span class="comment">&lt;!-- tag::mpFaultTolerance[] --&gt;</span>
<span class="line-numbers">11</span>    <span class="tag">&lt;feature&gt;</span>mpFaultTolerance-4.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers">12</span>    <span class="comment">&lt;!-- end::mpFaultTolerance[] --&gt;</span>
<span class="line-numbers">13</span>    <span class="comment">&lt;!-- tag::mpMetrics[] --&gt;</span>
<span class="line-numbers">14</span>    <span class="tag">&lt;feature&gt;</span>mpMetrics-5.0<span class="tag">&lt;/feature&gt;</span>
<span class="line-numbers">15</span>    <span class="comment">&lt;!-- end::mpMetrics[] --&gt;</span>
<span class="line-numbers">16</span>  <span class="tag">&lt;/featureManager&gt;</span>
<span class="line-numbers">17</span>
<span class="line-numbers">18</span>  <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.http.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9080</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">19</span>  <span class="tag">&lt;variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">default.https.port</span><span class="delimiter">"</span></span> <span class="attribute-name">defaultValue</span>=<span class="string"><span class="delimiter">"</span><span class="content">9443</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">20</span>
<span class="line-numbers">21</span>  <span class="comment">&lt;!-- tag::quickStartSecurity[] --&gt;</span>
<span class="line-numbers">22</span>  <span class="tag">&lt;quickStartSecurity</span> <span class="attribute-name">userName</span>=<span class="string"><span class="delimiter">"</span><span class="content">admin</span><span class="delimiter">"</span></span> <span class="attribute-name">userPassword</span>=<span class="string"><span class="delimiter">"</span><span class="content">adminpwd</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">23</span>  <span class="comment">&lt;!-- end::quickStartSecurity[] --&gt;</span>
<span class="line-numbers">24</span>
<span class="line-numbers">25</span>  <span class="tag">&lt;httpEndpoint</span> <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span> <span class="attribute-name">httpPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.http.port}</span><span class="delimiter">"</span></span>
<span class="line-numbers">26</span>    <span class="attribute-name">httpsPort</span>=<span class="string"><span class="delimiter">"</span><span class="content">${default.https.port}</span><span class="delimiter">"</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">defaultHttpEndpoint</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>  <span class="tag">&lt;webApplication</span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">"</span><span class="content">guide-microprofile-fallback.war</span><span class="delimiter">"</span></span> <span class="attribute-name">contextRoot</span>=<span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="line-numbers">29</span><span class="tag">&lt;/server&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>MicroProfile Fault Tolerance integrates with MicroProfile Metrics to provide metrics for the annotated fault tolerance methods. When both the <code class="hotspot=mpFaultTolerance">mpFaultTolerance</code> and the <code class="hotspot=mpMetrics">mpMetrics</code> features are included in the <code class="hotspot">server.xml</code> configuration file, the <code>@Fallback</code> fault tolerance annotation provides metrics that count the following things: the total number of annotated method invocations, the total number of failed annotated method invocations, and the total number of the fallback method calls.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=mpMetrics">mpMetrics</code> feature requires SSL and the configuration is provided for you. The <code class="hotspot=quickStartSecurity">quickStartSecurity</code> configuration element provides basic security to secure the Liberty. When you go to the <code>/metrics</code> endpoint, use the credentials that are defined in the Liberty’s configuration to log in to view the data for the fault tolerance methods.</p>
</div>
<div class="paragraph">
<p>You can learn more about MicroProfile Metrics in the <a href="https://openliberty.io/guides/microprofile-metrics.html" target="_blank" rel="noopener">Providing metrics from a microservice</a> guide. You can also learn more about the MicroProfile Fault Tolerance and MicroProfile Metrics integration in the <a href="https://github.com/eclipse/microprofile-fault-tolerance/releases" target="_blank" rel="noopener noreferrer">MicroProfile Fault Tolerance specification</a>.</p>
</div>
</div>
</div>
<div class="sect1 command">
<h2 id="running-the-application">Running the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You started the Open Liberty in dev mode at the beginning of the guide, so all the changes were automatically picked up.</p>
</div>
<div class="paragraph">
<p>When the Liberty instance is running, point your browser to the <a href="http://localhost:9080/inventory/systems/localhost" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/inventory/systems/localhost</a> URL. You receive the system properties of your local JVM from the <code>inventory</code> service.</p>
</div>
<div class="paragraph">
<p>Next, point your browser to the <code>system</code> service URL,  which is located at <a href="http://localhost:9080/system/properties" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/system/properties</a>, to retrieve the system properties for the specific localhost. Notice that the results from the two URLs are identical because the <code>inventory</code> service gets its results from calling the <code>system</code> service.</p>
</div>
<div class="paragraph">
<p>To see the application metrics, go to the <a href="https://localhost:9443/metrics?scope=base" target="_blank" rel="noopener noreferrer" class="notranslate">https://localhost:9443/metrics?scope=base</a> URL. Log in as the <code>admin</code> user, and use <code>adminpwd</code> as the password. See the following sample outputs for the <code>@Fallback</code> annotated method and the fallback method before a fallback occurs:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre># TYPE base_ft_invocations_total counter
base_ft_invocations_total{fallback="notApplied",method="io.openliberty.guides.inventory.InventoryManager.get",result="valueReturned"} 1
base_ft_invocations_total{fallback="applied",method="io.openliberty.guides.inventory.InventoryManager.get",result="valueReturned"} 0
base_ft_invocations_total{fallback="notApplied",method="io.openliberty.guides.inventory.InventoryManager.get",result="exceptionThrown"} 0
base_ft_invocations_total{fallback="applied",method="io.openliberty.guides.inventory.InventoryManager.get",result="exceptionThrown"} 0</pre>
</div>
</div>
<div class="paragraph">
<p>You can test the fault tolerance mechanism of your microservices by dynamically changing the <code class="hotspot=2 file=0">io_openliberty_guides_system_inMaintenance</code> property value to <code>true</code> in the <code class="hotspot file=0">resources/CustomConfigSource.json</code> file, which puts the <code>system</code> service in maintenance.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Update the configuration file.</mark>
<code>resources/CustomConfigSource.json</code></pre>
</div>
</div>
<div class="paragraph edit_command_text">
<p>Change the <code class="hotspot=2 file=0">io_openliberty_guides_system_inMaintenance</code> property from <code>false</code> to <code>true</code> and save the file.</p>
</div>
<div class="paragraph">
<p>CustomConfigSource.json</p>
</div>
<div class="listingblock code_column">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="line-numbers">1</span>{<span class="key"><span class="delimiter">"</span><span class="content">config_ordinal</span><span class="delimiter">"</span></span>:<span class="integer">500</span>,
<span class="line-numbers">2</span><span class="key"><span class="delimiter">"</span><span class="content">io_openliberty_guides_system_inMaintenance</span><span class="delimiter">"</span></span>:<span class="value">false</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>InventoryManager.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers"> 1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers"> 2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers"> 3</span><span class="comment"> * Copyright (c) 2017, 2022 IBM Corporation and others.</span>
<span class="line-numbers"> 4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers"> 5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers"> 6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers"> 7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers"> 8</span><span class="comment"> *</span>
<span class="line-numbers"> 9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers">10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers">11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers">12</span><span class="keyword">package</span> <span class="namespace">io.openliberty.guides.inventory</span>;
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="line-numbers">15</span><span class="keyword">import</span> <span class="include">java.net.UnknownHostException</span>;
<span class="line-numbers">16</span><span class="keyword">import</span> <span class="include">java.util.Properties</span>;
<span class="line-numbers">17</span><span class="keyword">import</span> <span class="include">java.util.ArrayList</span>;
<span class="line-numbers">18</span><span class="keyword">import</span> <span class="include">java.util.Collections</span>;
<span class="line-numbers">19</span><span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="line-numbers">20</span><span class="keyword">import</span> <span class="include">jakarta.enterprise.context.ApplicationScoped</span>;
<span class="line-numbers">21</span><span class="keyword">import</span> <span class="include">org.eclipse.microprofile.faulttolerance.Fallback</span>;
<span class="line-numbers">22</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.inventory.model.InventoryList</span>;
<span class="line-numbers">23</span><span class="keyword">import</span> <span class="include">io.openliberty.guides.inventory.model.SystemData</span>;
<span class="line-numbers">24</span>
<span class="line-numbers">25</span><span class="annotation">@ApplicationScoped</span>
<span class="line-numbers">26</span><span class="directive">public</span> <span class="type">class</span> <span class="class">InventoryManager</span> {
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;SystemData&gt; systems = <span class="predefined-type">Collections</span>.synchronizedList(<span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;());
<span class="line-numbers">29</span>    <span class="directive">private</span> InventoryUtils invUtils = <span class="keyword">new</span> InventoryUtils();
<span class="line-numbers">30</span>
<span class="line-numbers">31</span>    <span class="comment">// tag::Fallback[]</span>
<span class="line-numbers">32</span>    <span class="annotation">@Fallback</span>(fallbackMethod = <span class="string"><span class="delimiter">"</span><span class="content">fallbackForGet</span><span class="delimiter">"</span></span>,
<span class="line-numbers">33</span>            <span class="comment">// tag::applyOn[]</span>
<span class="line-numbers">34</span>            applyOn = {<span class="exception">IOException</span>.class},
<span class="line-numbers">35</span>            <span class="comment">// end::applyOn[]</span>
<span class="line-numbers">36</span>            <span class="comment">// tag::skipOn[]</span>
<span class="line-numbers">37</span>            skipOn = {<span class="exception">UnknownHostException</span>.class})
<span class="line-numbers">38</span>            <span class="comment">// end::skipOn[]</span>
<span class="line-numbers">39</span>    <span class="comment">// end::Fallback[]</span>
<span class="line-numbers">40</span>    <span class="comment">// tag::get[]</span>
<span class="line-numbers">41</span>    <span class="directive">public</span> <span class="predefined-type">Properties</span> get(<span class="predefined-type">String</span> hostname) <span class="directive">throws</span> <span class="exception">IOException</span> {
<span class="line-numbers">42</span>        <span class="keyword">return</span> invUtils.getProperties(hostname);
<span class="line-numbers">43</span>    }
<span class="line-numbers">44</span>    <span class="comment">// end::get[]</span>
<span class="line-numbers">45</span>
<span class="line-numbers">46</span>    <span class="comment">// tag::fallbackForGet[]</span>
<span class="line-numbers">47</span>    <span class="directive">public</span> <span class="predefined-type">Properties</span> fallbackForGet(<span class="predefined-type">String</span> hostname) {
<span class="line-numbers">48</span>        <span class="predefined-type">Properties</span> properties = findHost(hostname);
<span class="line-numbers">49</span>        <span class="keyword">if</span> (properties == <span class="predefined-constant">null</span>) {
<span class="line-numbers">50</span>            <span class="predefined-type">Properties</span> msgProp = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
<span class="line-numbers">51</span>            msgProp.setProperty(hostname,
<span class="line-numbers">52</span>                    <span class="string"><span class="delimiter">"</span><span class="content">System is not found in the inventory or system is in maintenance</span><span class="delimiter">"</span></span>);
<span class="line-numbers">53</span>            <span class="keyword">return</span> msgProp;
<span class="line-numbers">54</span>        }
<span class="line-numbers">55</span>        <span class="keyword">return</span> properties;
<span class="line-numbers">56</span>    }
<span class="line-numbers">57</span>    <span class="comment">// end::fallbackForGet[]</span>
<span class="line-numbers">58</span>
<span class="line-numbers">59</span>    <span class="directive">public</span> <span class="type">void</span> add(<span class="predefined-type">String</span> hostname, <span class="predefined-type">Properties</span> systemProps) {
<span class="line-numbers">60</span>        <span class="predefined-type">Properties</span> props = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
<span class="line-numbers">61</span>
<span class="line-numbers">62</span>        <span class="predefined-type">String</span> osName = systemProps.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.name</span><span class="delimiter">"</span></span>);
<span class="line-numbers">63</span>        <span class="keyword">if</span> (osName == <span class="predefined-constant">null</span>) {
<span class="line-numbers">64</span>            <span class="keyword">return</span>;
<span class="line-numbers">65</span>        }
<span class="line-numbers">66</span>
<span class="line-numbers">67</span>        props.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.name</span><span class="delimiter">"</span></span>, systemProps.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">os.name</span><span class="delimiter">"</span></span>));
<span class="line-numbers">68</span>        props.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">user.name</span><span class="delimiter">"</span></span>, systemProps.getProperty(<span class="string"><span class="delimiter">"</span><span class="content">user.name</span><span class="delimiter">"</span></span>));
<span class="line-numbers">69</span>
<span class="line-numbers">70</span>        SystemData system = <span class="keyword">new</span> SystemData(hostname, props);
<span class="line-numbers">71</span>        <span class="keyword">if</span> (!systems.contains(system)) {
<span class="line-numbers">72</span>            systems.add(system);
<span class="line-numbers">73</span>        }
<span class="line-numbers">74</span>    }
<span class="line-numbers">75</span>
<span class="line-numbers">76</span>    <span class="directive">public</span> InventoryList list() {
<span class="line-numbers">77</span>        <span class="keyword">return</span> <span class="keyword">new</span> InventoryList(systems);
<span class="line-numbers">78</span>    }
<span class="line-numbers">79</span>
<span class="line-numbers">80</span>    <span class="directive">private</span> <span class="predefined-type">Properties</span> findHost(<span class="predefined-type">String</span> hostname) {
<span class="line-numbers">81</span>        <span class="keyword">for</span> (SystemData system : systems) {
<span class="line-numbers">82</span>            <span class="keyword">if</span> (system.getHostname().equals(hostname)) {
<span class="line-numbers">83</span>                <span class="keyword">return</span> system.getProperties();
<span class="line-numbers">84</span>            }
<span class="line-numbers">85</span>        }
<span class="line-numbers">86</span>        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
<span class="line-numbers">87</span>    }
<span class="line-numbers">88</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After saving the file, go back to your browser and refresh to the <a href="http://localhost:9080/inventory/systems/localhost" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/inventory/systems/localhost</a> URL to view the cached version of the properties. The <code class="hotspot=fallbackForGet file=1">fallbackForGet()</code> method, which is the designated fallback method, is called when the <code>system</code> service is not available. The cached system properties contain only the OS name and user name key and value pairs.</p>
</div>
<div class="paragraph">
<p>To see that the <code>system</code> service is down, point your browser to the <a href="http://localhost:9080/system/properties" target="_blank" rel="noopener noreferrer" class="notranslate">http://localhost:9080/system/properties</a> URL again. You see that the service displays a 503 HTTP response code.</p>
</div>
<div class="paragraph">
<p>Go to the <a href="https://localhost:9443/metrics?scope=base" target="_blank" rel="noopener noreferrer" class="notranslate">https://localhost:9443/metrics?scope=base</a> URL again. See the following sample outputs for the <code>@Fallback</code> annotated method and the fallback method after a fallback occurs:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre># TYPE base_ft_invocations_total counter
base_ft_invocations_total{fallback="notApplied",method="io.openliberty.guides.inventory.InventoryManager.get",result="valueReturned"} 1
base_ft_invocations_total{fallback="applied",method="io.openliberty.guides.inventory.InventoryManager.get",result="valueReturned"} 1
base_ft_invocations_total{fallback="notApplied",method="io.openliberty.guides.inventory.InventoryManager.get",result="exceptionThrown"} 0
base_ft_invocations_total{fallback="applied",method="io.openliberty.guides.inventory.InventoryManager.get",result="exceptionThrown"} 0</pre>
</div>
</div>
<div class="paragraph">
<p>From the output, the <code>base_ft_invocations_total{fallback="notApplied",method="io.openliberty.guides.inventory.InventoryManager.get",result="valueReturned"}</code> data shows that the <code class="hotspot=get file=1">get()</code> method was called once without triggering a fallback method. The <code>base_ft_invocations_total{fallback="applied",method="io.openliberty.guides.inventory.InventoryManager.get",result="valueReturned"}</code> data indicates that the <code class="hotspot=get file=1">get()</code> method was called once and the fallback <code class="hotspot=fallbackForGet file=1">fallbackForGet()</code> method was triggered.</p>
</div>
<div class="listingblock code_command hotspot file=0">
<div class="content">
<pre><mark>Update the configuration file.</mark>
<code>resources/CustomConfigSource.json</code></pre>
</div>
</div>
<div class="paragraph edit_command_text">
<p>After you finish, change the <code class="hotspot=2">io_openliberty_guides_system_inMaintenance</code> property value back to <code>false</code> in the <code class="hotspot file=0">resources/CustomConfigSource.json</code> file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-the-application">Testing the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can test your application manually, but automated tests ensure code quality because they trigger a failure whenever a code change introduces a defect. JUnit and the JAX-RS Client API provide a simple environment for you to write tests.</p>
</div>
<div class="listingblock code_command hotspot">
<div class="content">
<pre><mark>Create the <code>FaultToleranceIT</code> class.</mark>
<code>src/test/java/it/io/openliberty/guides/faulttolerance/FaultToleranceIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>FaultToleranceIT.java</p>
</div>
<div class="listingblock code_column hide_tags=copyright,javadoc">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="line-numbers">  1</span><span class="comment">// tag::copyright[]</span>
<span class="line-numbers">  2</span><span class="comment">/*******************************************************************************</span>
<span class="line-numbers">  3</span><span class="comment"> * Copyright (c) 2018, 2022 IBM Corporation and others.</span>
<span class="line-numbers">  4</span><span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<span class="line-numbers">  5</span><span class="comment"> * are made available under the terms of the Eclipse Public License 2.0</span>
<span class="line-numbers">  6</span><span class="comment"> * which accompanies this distribution, and is available at</span>
<span class="line-numbers">  7</span><span class="comment"> * http://www.eclipse.org/legal/epl-2.0/</span>
<span class="line-numbers">  8</span><span class="comment"> *</span>
<span class="line-numbers">  9</span><span class="comment"> * SPDX-License-Identifier: EPL-2.0</span>
<span class="line-numbers"> 10</span><span class="comment"> *******************************************************************************/</span>
<span class="line-numbers"> 11</span><span class="comment">// end::copyright[]</span>
<span class="line-numbers"> 12</span><span class="comment">// tag::ft_testing[]</span>
<span class="line-numbers"> 13</span><span class="keyword">package</span> <span class="namespace">it.io.openliberty.guides.faulttolerance</span>;
<span class="line-numbers"> 14</span>
<span class="line-numbers"> 15</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertEquals</span>;
<span class="line-numbers"> 16</span><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.jupiter.api.Assertions.assertTrue</span>;
<span class="line-numbers"> 17</span><span class="keyword">import</span> <span class="include">jakarta.json.JsonObject</span>;
<span class="line-numbers"> 18</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.Client</span>;
<span class="line-numbers"> 19</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.client.ClientBuilder</span>;
<span class="line-numbers"> 20</span><span class="keyword">import</span> <span class="include">jakarta.ws.rs.core.Response</span>;
<span class="line-numbers"> 21</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.AfterEach</span>;
<span class="line-numbers"> 22</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeEach</span>;
<span class="line-numbers"> 23</span><span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="line-numbers"> 24</span>
<span class="line-numbers"> 25</span><span class="keyword">import</span> <span class="include">it.io.openliberty.guides.utils.TestUtils</span>;
<span class="line-numbers"> 26</span>
<span class="line-numbers"> 27</span><span class="directive">public</span> <span class="type">class</span> <span class="class">FaultToleranceIT</span> {
<span class="line-numbers"> 28</span>
<span class="line-numbers"> 29</span>    <span class="directive">private</span> Response response;
<span class="line-numbers"> 30</span>    <span class="directive">private</span> Client client;
<span class="line-numbers"> 31</span>
<span class="line-numbers"> 32</span>    <span class="comment">// tag::Before[]</span>
<span class="line-numbers"> 33</span>    <span class="annotation">@BeforeEach</span>
<span class="line-numbers"> 34</span>    <span class="comment">// end::Before[]</span>
<span class="line-numbers"> 35</span>    <span class="directive">public</span> <span class="type">void</span> setup() {
<span class="line-numbers"> 36</span>        client = ClientBuilder.newClient();
<span class="line-numbers"> 37</span>    }
<span class="line-numbers"> 38</span>
<span class="line-numbers"> 39</span>    <span class="comment">// tag::After[]</span>
<span class="line-numbers"> 40</span>    <span class="annotation">@AfterEach</span>
<span class="line-numbers"> 41</span>    <span class="comment">// end::After[]</span>
<span class="line-numbers"> 42</span>    <span class="directive">public</span> <span class="type">void</span> teardown() {
<span class="line-numbers"> 43</span>        client.close();
<span class="line-numbers"> 44</span>        response.close();
<span class="line-numbers"> 45</span>    }
<span class="line-numbers"> 46</span>    <span class="comment">// tag::javadoc[]</span>
<span class="line-numbers"> 47</span>    <span class="comment">/**</span>
<span class="line-numbers"> 48</span><span class="comment">     * testFallbackForGet - test for checking if the fallback is being called</span>
<span class="line-numbers"> 49</span><span class="comment">     * correctly 1. Return system properties for a hostname when inventory</span>
<span class="line-numbers"> 50</span><span class="comment">     * service is available. 2. Make System service down and get the system</span>
<span class="line-numbers"> 51</span><span class="comment">     * properties from inventory service when it is down. 3. Check if system</span>
<span class="line-numbers"> 52</span><span class="comment">     * properties for the specific host was returned when the inventory service</span>
<span class="line-numbers"> 53</span><span class="comment">     * was down by: Asserting if the total number of the system properties, when</span>
<span class="line-numbers"> 54</span><span class="comment">     * service is up, is greater than the total number of the system properties</span>
<span class="line-numbers"> 55</span><span class="comment">     * when service is down.</span>
<span class="line-numbers"> 56</span><span class="comment">     */</span>
<span class="line-numbers"> 57</span>    <span class="comment">// end::javadoc[]</span>
<span class="line-numbers"> 58</span>
<span class="line-numbers"> 59</span>    <span class="comment">// tag::Test1[]</span>
<span class="line-numbers"> 60</span>    <span class="annotation">@Test</span>
<span class="line-numbers"> 61</span>    <span class="comment">// end::Test1[]</span>
<span class="line-numbers"> 62</span>    <span class="comment">// tag::testFallbackForGet[]</span>
<span class="line-numbers"> 63</span>    <span class="directive">public</span> <span class="type">void</span> testFallbackForGet() <span class="directive">throws</span> <span class="exception">InterruptedException</span> {
<span class="line-numbers"> 64</span>        response = TestUtils.getResponse(client,
<span class="line-numbers"> 65</span>                                         TestUtils.INVENTORY_LOCALHOST_URL);
<span class="line-numbers"> 66</span>        assertResponse(TestUtils.baseUrl, response);
<span class="line-numbers"> 67</span>        JsonObject obj = response.readEntity(JsonObject.class);
<span class="line-numbers"> 68</span>        <span class="type">int</span> propertiesSize = obj.size();
<span class="line-numbers"> 69</span>        <span class="comment">// tag::changeSystemProperty1[]</span>
<span class="line-numbers"> 70</span>        TestUtils.changeSystemProperty(TestUtils.SYSTEM_MAINTENANCE_FALSE,
<span class="line-numbers"> 71</span>                                       TestUtils.SYSTEM_MAINTENANCE_TRUE);
<span class="line-numbers"> 72</span>        <span class="comment">// end::changeSystemProperty1[]</span>
<span class="line-numbers"> 73</span>        <span class="predefined-type">Thread</span>.sleep(<span class="integer">3000</span>);
<span class="line-numbers"> 74</span>        response = TestUtils.getResponse(client,
<span class="line-numbers"> 75</span>                                         TestUtils.INVENTORY_LOCALHOST_URL);
<span class="line-numbers"> 76</span>        assertResponse(TestUtils.baseUrl, response);
<span class="line-numbers"> 77</span>        obj = response.readEntity(JsonObject.class);
<span class="line-numbers"> 78</span>        <span class="type">int</span> propertiesSizeFallBack = obj.size();
<span class="line-numbers"> 79</span>        assertTrue(propertiesSize &gt; propertiesSizeFallBack,
<span class="line-numbers"> 80</span>                   <span class="string"><span class="delimiter">"</span><span class="content">The total number of properties from the @Fallback method </span><span class="delimiter">"</span></span>
<span class="line-numbers"> 81</span>                 + <span class="string"><span class="delimiter">"</span><span class="content">is not smaller than the number from the system service</span><span class="delimiter">"</span></span>
<span class="line-numbers"> 82</span>                 +  <span class="string"><span class="delimiter">"</span><span class="content">as expected.</span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 83</span>        <span class="comment">// tag::changeSystemProperty2[]</span>
<span class="line-numbers"> 84</span>        TestUtils.changeSystemProperty(TestUtils.SYSTEM_MAINTENANCE_TRUE,
<span class="line-numbers"> 85</span>                                       TestUtils.SYSTEM_MAINTENANCE_FALSE);
<span class="line-numbers"> 86</span>        <span class="comment">// end::changeSystemProperty2[]</span>
<span class="line-numbers"> 87</span>        <span class="predefined-type">Thread</span>.sleep(<span class="integer">3000</span>);
<span class="line-numbers"> 88</span>    }
<span class="line-numbers"> 89</span>    <span class="comment">// end::testFallbackForGet[]</span>
<span class="line-numbers"> 90</span>
<span class="line-numbers"> 91</span>    <span class="comment">// tag::javadoc[]</span>
<span class="line-numbers"> 92</span>    <span class="comment">/**</span>
<span class="line-numbers"> 93</span><span class="comment">     * testFallbackForGet :</span>
<span class="line-numbers"> 94</span><span class="comment">     * test for checking if the fallback skip mechanism is working as intended:</span>
<span class="line-numbers"> 95</span><span class="comment">     * 1. Access system properties for the wrong hostname (localhot)</span>
<span class="line-numbers"> 96</span><span class="comment">     * 2. Verify that the response code is 404</span>
<span class="line-numbers"> 97</span><span class="comment">     * 3. Verify that the response text contains an error</span>
<span class="line-numbers"> 98</span><span class="comment">     */</span>
<span class="line-numbers"> 99</span>    <span class="comment">// end::javadoc[]</span>
<span class="line-numbers">100</span>    <span class="comment">// tag::Test2[]</span>
<span class="line-numbers">101</span>    <span class="annotation">@Test</span>
<span class="line-numbers">102</span>    <span class="comment">// end::Test2[]</span>
<span class="line-numbers">103</span>    <span class="comment">// tag::testFallbackSkipForGet[]</span>
<span class="line-numbers">104</span>    <span class="directive">public</span> <span class="type">void</span> testFallbackSkipForGet() {
<span class="line-numbers">105</span>        response = TestUtils.getResponse(client,
<span class="line-numbers">106</span>                TestUtils.INVENTORY_UNKNOWN_HOST_URL);
<span class="line-numbers">107</span>        assertResponse(TestUtils.baseUrl, response, <span class="integer">404</span>);
<span class="line-numbers">108</span>        assertTrue(response.readEntity(<span class="predefined-type">String</span>.class).contains(<span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>),
<span class="line-numbers">109</span>                   <span class="string"><span class="delimiter">"</span><span class="content">Incorrect response body from </span><span class="delimiter">"</span></span>
<span class="line-numbers">110</span>                   + TestUtils.INVENTORY_UNKNOWN_HOST_URL);
<span class="line-numbers">111</span>    }
<span class="line-numbers">112</span>    <span class="comment">//end::testFallbackSkipForGet[]</span>
<span class="line-numbers">113</span>
<span class="line-numbers">114</span>    <span class="comment">// tag::javadoc[]</span>
<span class="line-numbers">115</span>    <span class="comment">/**</span>
<span class="line-numbers">116</span><span class="comment">     * Asserts that the given URL's response code matches the given status code.</span>
<span class="line-numbers">117</span><span class="comment">     */</span>
<span class="line-numbers">118</span>    <span class="comment">// end::javadoc[]</span>
<span class="line-numbers">119</span>    <span class="directive">private</span> <span class="type">void</span> assertResponse(<span class="predefined-type">String</span> url, Response response, <span class="type">int</span> statusCode) {
<span class="line-numbers">120</span>        assertEquals(statusCode, response.getStatus(),
<span class="line-numbers">121</span>                <span class="string"><span class="delimiter">"</span><span class="content">Incorrect response code from </span><span class="delimiter">"</span></span> + url);
<span class="line-numbers">122</span>    }
<span class="line-numbers">123</span>
<span class="line-numbers">124</span>    <span class="comment">// tag::javadoc[]</span>
<span class="line-numbers">125</span>    <span class="comment">/**</span>
<span class="line-numbers">126</span><span class="comment">     * Asserts that the given URL has the correct response code of 200.</span>
<span class="line-numbers">127</span><span class="comment">     */</span>
<span class="line-numbers">128</span>    <span class="comment">// end::javadoc[]</span>
<span class="line-numbers">129</span>    <span class="directive">private</span> <span class="type">void</span> assertResponse(<span class="predefined-type">String</span> url, Response response) {
<span class="line-numbers">130</span>        assertResponse(url, response, <span class="integer">200</span>);
<span class="line-numbers">131</span>    }
<span class="line-numbers">132</span>}
<span class="line-numbers">133</span><span class="comment">// end::ft_testing[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="hotspot=Before">@BeforeEach</code> and <code class="hotspot=After">@AfterEach</code> annotations indicate that this method runs either before or after the other test case. These methods are generally used to perform any setup and teardown tasks. In this case, the setup method creates a JAX-RS client, which makes HTTP requests to the <code>inventory</code> service. This client must also be registered with a JSON-P provider to process JSON resources. The teardown method simply destroys this client instance as well as the HTTP responses.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testFallbackForGet">testFallbackForGet()</code> test case sends a request to the <code>inventory</code> service to get the systems properties for a hostname before and after the <code>system</code> service becomes unavailable. Then, it asserts outputs from the two requests to ensure that they are different from each other.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=testFallbackSkipForGet">testFallbackSkipForGet()</code> test case sends a request to the <code>inventory</code> service to get the system properties for an incorrect hostname (<code>unknown</code>). Then, it confirms that the fallback method has not been called by asserting that the response’s status code is <code>404</code> with an error message in the response body.</p>
</div>
<div class="paragraph">
<p>The <code class="hotspot=Test1 hotspot=Test2">@Test</code> annotations indicate that the methods automatically execute when your test class runs.</p>
</div>
<div class="paragraph">
<p>In addition, a few endpoint tests have been included for you to test the basic functionality of the <code>inventory</code> and <code>system</code> services. If a test failure occurs, then you might have introduced a bug into the code.</p>
</div>
<div class="sect2 command">
<h3 id="running-the-tests">Running the tests</h3>
<div class="paragraph">
<p>Because you started Open Liberty in dev mode, you can run the tests by pressing the <code>enter/return</code> key from the command-line session where you started dev mode.</p>
</div>
<div class="paragraph">
<p>If the tests pass, you see a similar output to the following example:</p>
</div>
<div class="listingblock no_copy">
<div class="content">
<pre class="CodeRay highlight"><code>-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running it.io.openliberty.guides.faulttolerance.FaultToleranceIT
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.517 sec - in it.io.openliberty.guides.faulttolerance.FaultToleranceIT
Running it.io.openliberty.guides.system.SystemEndpointIT
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.937 sec - in it.io.openliberty.guides.system.SystemEndpointIT
Running it.io.openliberty.guides.inventory.InventoryEndpointIT
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.396 sec - in it.io.openliberty.guides.inventory.InventoryEndpointIT

Results :

Tests run: 6, Failures: 0, Errors: 0, Skipped: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>To see if the tests detect a failure, comment out the <code class="hotspot=changeSystemProperty1 hotspot=changeSystemProperty2">changeSystemProperty()</code> methods in the <code class="hotspot">FaultToleranceIT.java</code> file. Rerun the tests to see that a test failure occurs for the <code class="hotspot=testFallbackForGet">testFallbackForGet()</code> and <code class="hotspot=testFallbackSkipForGet">testFallbackSkipForGet()</code> test cases.</p>
</div>
<div class="paragraph command">
<p>When you are done checking out the service, exit dev mode by pressing <code>CTRL+C</code> in the command-line session where you ran Liberty, or by typing <code>q</code> and then pressing the <code>enter/return</code> key.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="great-work-youre-done">Great work! You’re done!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You just learned how to build a fallback mechanism for a microservice with MicroProfile Fault Tolerance in Open Liberty and wrote a test to validate it.</p>
</div>
<div class="paragraph">
<p>You can try one of the related MicroProfile guides. They demonstrate technologies that you can learn and expand on what you built here.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guide-attribution">Guide Attribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Building fault-tolerant microservices with the @Fallback annotation <span class="licensedClass">by</span> Open Liberty <span class="licensedClass">is licensed under</span> CC BY-ND 4.0</p>
</div>
</div>
</div>
    </div>
  </div>

  <!-- Code section -->
  <div id="code_column" class="position_relative" tabindex="0">
    <div id="code_column_title_container">
      <div id="code_column_tabs_container" class="dimmed">
        <ul id="code_column_tabs" class="nav" role="tablist"></ul>
      </div>
      <div class="copyFileButton" tabindex="0">
        <img src="/img/guides_copy_button.svg" alt="Copy file contents" title="Copy file contents">
        <div id="code_section_copied_confirmation">Copied to clipboard </div>
      </div>
    </div>
    <div id="code_column_content"></div>

    <div id="prereqs_container">
      <p id="prereqs_title">Prerequisites:</p>
      <div class="prereqs_list"></div>
      <div class="skills_network_container">
        <div class="skills_network_description"></div>
      </div>
    </div>

    <button id="dismiss_button" aria-label="Back to text" tabindex="0">
      Back to text
    </button>
  </div>
</div>

<!-- Build a list of all the documents in the guides code base -->






<!-- Remove any documents deemed private (archived, templates, etc) -->


<!-- Count number of guides from past 30 days-->


    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    

    
    
    

    <!-- 2592000 is 30 days in seconds (30 days * 24 hours * 60 minutes * 60 seconds) -->
    


<!-- Sort list of guides by date with most recent first -->





<div id="end_of_guide">
        <h2 tabindex="0">Nice work! Where to next?</h2>
        <div id="end_of_guide_left_section">
            <p id="guide_attribution"></p>
            
            <h3 id="feedback_rating_question">What did you think of this guide?</h3>
            <div id="feedback_ratings">
                <img class="guide_rating" id="extreme_dislike" src="/img/1_Extreme_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Extreme Dislike" data-guide-rating="1" tabindex="0" aria-label="Rate this guide as extreme dislike">
                <img class="guide_rating" id="dislike" src="/img/2_Dislike.png" onclick="$('#dislike_popup').show(); $('.popup_content').focus();" alt="Dislike" data-guide-rating="2" tabindex="0" aria-label="Rate this guide as dislike">
                <img class="guide_rating" id="like" src="/img/3_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Like" data-guide-rating="3" tabindex="0" aria-label="Rate this guide as like">
                <img class="guide_rating" id="extreme_like" src="/img/4_Extreme_Like.png" onclick="$('#like_popup').show(); $('.popup_content').focus();" alt="Extreme Like" data-guide-rating="4" tabindex="0" aria-label="Rate this guide as extreme like">
            </div>

            <div id="like_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <button id="close_button" class="popup_button" onclick="$('#like_popup').hide();">Close</button>
                </div>
            </div>

            <div id="dislike_popup" class="popup">
                <div class="popup_content" tabindex="0">
                    <p class="popup_title">Thank you for your feedback!</p>
                    <p id="open_issue">Would you like to open an issue in GitHub?</p>
                    
                        <a href="https://github.com/OpenLiberty/guide-microprofile-fallback/issues/new" target="_blank" id="yes_button" class="popup_button" onclick="$('#dislike_popup').hide();" rel="noopener noreferrer">Yes</a>
                    
                    <button id="no_button" class="popup_button" onclick="$('#dislike_popup').hide();">No, thank you</button>
                </div>
            </div>

            <h3 id="improve_guide_feedback">What could make this guide better?</h3>
            
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-microprofile-fallback/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/OpenLiberty/guide-microprofile-fallback/pulls">Create a pull request</a> to contribute to this guide</p>
            

            <h3 id="need_help">Need help?</h3>
            <p><a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/open-liberty">Ask a question on Stack Overflow</a></p>

            <h3>Like Open Liberty? Star our repo on GitHub.</h3>
            <a class="github-button" href="https://github.com/OpenLiberty/open-liberty" data-icon="octicon-star" aria-label="Star OpenLiberty/open-liberty on GitHub" target="_blank" rel="noopener noreferrer">Star</a>
        </div>
        <div id="end_of_guide_right_section">
            <h3 id="where_to_next">Where to next?</h3>

            
            

            <!-- Related guides section -->
            
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/rest-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Creating a RESTful web service</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">30 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/cdi-intro.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Injecting dependencies into microservices</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">15 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/microprofile-config.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Configuring microservices</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">20 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                            </a>
                        </div>
                    
                
                    
                    
                    
                        <!-- Only create a card if we find the permalink -->
                        
                        <div class="col-sm-12 col-lg-6">
                            <a href="/zh-Hans/guides/circuit-breaker.html" class="small_guide_item">
                                <div class="guide_title_container">
                                    <h3 class="guide_title">Preventing repeated failed calls to microservices</h3>
                                </div>
                                <img class="duration_clock_icon" src="/img/guide_duration_clock_icon_small.svg" alt="Duration">
                                <span class="guide_duration">25 minutes</span>

                                <!-- Add New flag to guides from the past 30 days or 4 most recent posts. -->
                                <!-- If new posts count is less than 4, use 4 most recent posts -->
                                
                                    
                                <!-- If new posts count is >= 4, use posts from last 30 days-->
                                
                                <!-- Add Updated flag to guides if the last major update is within last 12 weeks. -->
                                <!-- Count number of guides from past last 12 weeks that is 84 days-->
                                <!-- 7257600 is 84 days in seconds (84 days * 24 hours * 60 minutes * 60 seconds) -->
                                
                                
                                    <div class="guide_interactive_container">
                                        <img class="interactive_bolt_icon" src="/img/guide_lightning_bolt.svg" alt="Interactive">
                                        <span class="guide_interactive">Interactive</span>
                                    </div>
                                
                            </a>
                        </div>
                    
                
                </div>
            </div>
            
        </div>
    </div>



    </main>

    



<footer>
    <div id="footer_gray_background">
        <div id="footer_top_container" class="footer_container container-fluid">
            <div id="footer_project_container">
                <span id="footer_open_liberty"></span>
                <p id="footer_project">IBM 开放式源代码项目</p>
            </div>
            <div id="footer_round_links_container">
                <a id="footer_github_link" class="footer_round_btn" href="https://github.com/OpenLiberty/" target="_blank" rel="noopener noreferrer" aria-label="Github"></a>
                <a id="footer_twitter_link" class="footer_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a>
                <a id="footer_stackoverflow_link" class="footer_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a>
                <a id="footer_groupsio_link" class="footer_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a>
                <a id="footer_gitter_link" class="footer_round_btn" href="https://app.gitter.im/#/room/#OpenLiberty_development:gitter.im" target="_blank" rel="noopener" aria-label="Open Liberty Gitter"></a>
            </div>
        </div>         
    </div>

    <div id="footer_bottom_container" class="footer_container container-fluid">
        <div id="footer_bottom_left_section">
            <p id="footer_copyright">© Copyright IBM Corp. 2017, 2023</p>
            <p class="vertical_bar">|</p>
            <a id="footer_privacy_policy_link" href="https://www.ibm.com/privacy/" target="_blank" rel="noopener noreferrer" class="left_footer_link">隐私策略</a>
            <p class="vertical_bar">|</p>
            <a id="footer_license_link" href="https://github.com/OpenLiberty/open-liberty/blob/release/LICENSE" target="_blank" rel="noopener noreferrer" class="left_footer_link">许可证</a>
            <p class="vertical_bar">|</p>
            <a id="footer_logos_link" href="https://github.com/OpenLiberty/logos" target="_blank" rel="noopener noreferrer" class="left_footer_link">洛戈斯</a>
        </div>
        <div id="footer_bottom_right_section">
            <a id="footer_docs_link" href="/docs" aria-label="Open Liberty Docs" class="right_footer_link blue_link_light_background">文档</a>
            <a id="footer_blog_link" href="/blog" aria-label="Open Liberty Blog" class="right_footer_link blue_link_light_background">博客</a>
            <a id="footer_support_link" href="/support" aria-label="Open Liberty Support" class="right_footer_link blue_link_light_background">支持</a>
        </div>
    </div>
</footer>

<!-- PRE-LOADED IMAGES FOR ON HOVER BEHAVIOR -->
<div class="d-none hidden">
    <img src="/img/Footer_GitCat_Hover.svg" alt="OpenLiberty Github link">
    <img src="/img/Footer_TwitterBird_Hover.svg" alt="OpenLibertyIO Twitter link">
    <img src="/img/Footer_StackO_Hover.svg" alt="Open-liberty Stack Overflow link">
    <img src="/img/Footer_GroupsIO_Hover.svg" alt="Openliberty Groups IO link">
    <img src="/img/footer_gitter_hover.svg" alt="Openliberty Gitter link">
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha512-lzilC+JFd6YV8+vQRNRtU7DOqv5Sa9Ek53lXt/k91HZTJpytHS1L6l1mMKR9K6VVoDt4LiEXaa6XBrYk1YhGTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>


<script type="text/javascript" src="/zh-Hans/assets/devEnvironment.js"></script>




  <script type="text/javascript" src="/zh-Hans/assets/guide-common.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/toc.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/tabs.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-static.js"></script>

  <script type="text/javascript" src="/zh-Hans/assets/guide-multipane-static.js"></script>


<script type="text/javascript" src="/zh-Hans/assets/openliberty.js"></script>

  </body>

</html>
